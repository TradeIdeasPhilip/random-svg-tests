import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as P}from"./client-misc-ZHNZ3-cL.js";import{b as a,r as o,m as at,c as it,s as ot,g as nt,t as E,h as H}from"./fourier-samples-xM5J_l3H.js";import{p as rt,P as W}from"./path-shape-ZNbOYjhy.js";import{m as w}from"./misc-wGF4FraP.js";import{d as C,g as st}from"./utility-D-kBkb6L.js";import{H as mt}from"./handwriting-effect-2FjZRqWW.js";import{T as lt}from"./letters-more-DkNc7UGy.js";import"./letters-base-DU8plAKw.js";const pt=1024,O=P.getById("scaled",SVGGElement),J=P.getById("reference",SVGPathElement),ct=P.getById("samples",SVGPathElement);function A(r,l){if(r>=l)throw new Error("wtf");const S=w.makeLinear(r,0,l,1);function D(f){if(f<=r)return 0;if(f>=l)return 1;const c=S(f);return st(c)}return D}function Q(r){J.setAttribute("d",r.pathString);const l=rt(J.getBBox(),{x:1,y:1,width:14,height:7},"srcRect fits completely into destRect",1),S=l.a;O.style.transform=l.toString(),O.style.setProperty("--path-scale",S.toString());const D=it(r.pathString,pt);let f="";D.forEach(([t,i])=>{f+=`M${t},${i}l0,0`}),ct.setAttribute("d",f);const c=ot(D),b=nt({addTime:4800,pauseTime:200,maxGroupsToDisplay:r.maxGroupsToDisplay,terms:c}),$=t=>Math.max(...c.slice(0,t).map(e=>Math.abs(e.frequency))),R=t=>8*$(t)+7,Z=b.map(t=>{if(t.addingCircles==0){const i=E(c,t.usingCircles),e=R(t.usingCircles),n=W.glitchFreeParametric(i,e);return()=>n.rawPath}else if(t.usingCircles==0&&t.addingCircles==1&&c[0].frequency==0){let i=function(m){return`${s.x*m},${s.y*m}`};const{startTime:e,endTime:n}=t,p=n-e,d=A(e,e+p/2),u=A(e,n),s=H(c[0]);return m=>{const g=u(m),h=i(g),y=d(m),T=i(y);return`M ${h} L ${T}`}}else{const e=.2/$(t.usingCircles+t.addingCircles),n=w.makeBoundedLinear(t.startTime,-e,t.endTime,1+e),p=E(c,t.usingCircles),d=E(c,t.addingCircles,t.usingCircles);let u=R(t.usingCircles+t.addingCircles);if(t.usingCircles==0||t.usingCircles==1&&H(c[0])){const s=H(c[0])??{x:0,y:0};return m=>{const g=n(m),h=g-e,y=g+e,T=A(h,y),x=Math.min(1,y);if(x<=0)return`$M${s.x},${s.y} L${s.x},${s.y}`;{let G=function(k){k=k*x;const M=p(k),v=1-T(k);if(v==0)return M;{const K=d(k);return{x:M.x+v*K.x,y:M.y+v*K.y}}};const F=Math.ceil(Math.max(u,150)*x);return W.glitchFreeParametric(G,F).rawPath}}}else return s=>{const m=n(s),g=A(m-e,m+e);function h(T){const x=p(T),G=1-g(T);if(G==0)return x;{const F=d(T);return{x:x.x+G*F.x,y:x.y+G*F.y}}}return W.glitchFreeParametric(h,u).rawPath}}}),j=new Intl.NumberFormat("en-US",{minimumSignificantDigits:5,maximumSignificantDigits:5,useGrouping:!1}).format,L=t=>{t<0&&(t=0);let i=j(t);const[,e,n]=/^([0-9]+)\.([0-9]+)$/.exec(i);switch(e.length){case 3:break;case 2:{i=w.FIGURE_SPACE+i;break}case 1:{i=w.FIGURE_SPACE+w.FIGURE_SPACE+i;break}default:throw console.warn({beforeDecimalPoint:e,afterDecimalPoint:n,result:i}),new Error("wtf")}return i+"%"},X=b.map(t=>({usingAmplitude:L(t.usingAmplitude),addingAmplitude:L(t.addingAmplitude),availableAmplitude:L(t.availableAmplitude)})),B=C("[data-using] [data-circles]",HTMLTableCellElement),q=C("[data-using] [data-amplitude]",HTMLTableCellElement),I=C("[data-adding] [data-circles]",HTMLTableCellElement),N=C("[data-adding] [data-amplitude]",HTMLTableCellElement),U=C("[data-available] [data-circles]",HTMLTableCellElement),V=C("[data-available] [data-amplitude]",HTMLTableCellElement);function z(t,i){const e=new mt(t),n=new lt(.5);n.leftMargin=0,n.rightMargin=16,n.CRLF(),n.addText(i).forEach(u=>{e.add({baseline:u.baseline,x:u.x,shape:u.description.shape})});const d=n.font.get("0").fontMetrics.strokeWidth;return t.style.strokeWidth=d.toString(),e.setProgress(0),e}const Y=z(P.getById("topText",SVGGElement),r.topText??""),tt=z(P.getById("bottomText",SVGGElement),r.bottomText??"");function et(t){Y.setProgressLength((t-750)/1e3*3),tt.setProgressLength((t-5e3)/1e3*3);function i(){const s=b.findIndex(({endTime:m})=>t<m);return s==-1?b.length-1:s}const e=i(),n=s=>`${s.toString().padStart(4,w.FIGURE_SPACE)}`,p=b[e];B.innerText=n(p.usingCircles),I.innerText=n(p.addingCircles),U.innerText=n(p.availableCircles),[{value:p.usingCircles,element1:B,element2:q},{value:p.addingCircles,element1:I,element2:N},{value:p.availableCircles,element1:U,element2:V}].forEach(({value:s,element1:m,element2:g})=>{const h=s==0?"0.5":"";m.style.opacity=h,g.style.opacity=h});const d=X[e];q.innerText=d.usingAmplitude,N.innerText=d.addingAmplitude,V.innerText=d.availableAmplitude;const u=W.cssifyPath(Z[e](t));O.style.setProperty("--d",u)}window.showFrame=et}const _=new Map([["likeShareAndSubscribe",{maxGroupsToDisplay:30,pathString:a.likeShareAndSubscribe,minGoodCircles:10,topText:"Cursive Writing",bottomText:"Hershey Fonts"}],["hilbert0",{maxGroupsToDisplay:20,pathString:a.hilbert[0],topText:"Hilbert, First Order",bottomText:"Wikipedia"}],["hilbert1",{maxGroupsToDisplay:20,pathString:o(a.hilbert[1]).rawPath,minGoodCircles:13,topText:"Hilbert, Second Order",bottomText:"Wikipedia"}],["hilbert4",{maxGroupsToDisplay:30,pathString:o(a.hilbert[4]).rawPath,topText:"Hilbert, Fifth Order",bottomText:"Wikipedia"}],["p0",{maxGroupsToDisplay:7,pathString:o(a.peanocurve[0]).rawPath,topText:"Peano Curve #0",bottomText:"Wikipedia"}],["p1",{maxGroupsToDisplay:10,pathString:o(a.peanocurve[1]).rawPath,topText:"Peano Curve #1",bottomText:"Wikipedia"}],["p2",{maxGroupsToDisplay:20,pathString:o(a.peanocurve[2]).rawPath,topText:"Peano Curve #2",bottomText:"Wikipedia"}],["square",{maxGroupsToDisplay:7,pathString:"M-0.5,-0.667 h 1 v 1 h -1 z"}],["ellipse",{maxGroupsToDisplay:7,pathString:"M1,0 A1,1.25 0 1 1 -1,0 A1,1.25 0 1 1 1,0 z"}],["star7",{maxGroupsToDisplay:8,pathString:at(7,2,"My seed 2025a").rawPath,topText:"Random 7 Pointed Star",bottomText:'makePolygon(7,2, "My seed 2025a")'}],["Daphne_Oram_1",{maxGroupsToDisplay:17,pathString:o(a.daphneOram1).rawPath,topText:"Daphne Oram #1",bottomText:"Wikimedia Commons"}],["Daphne_Oram_2",{maxGroupsToDisplay:22,pathString:o(a.daphneOram2,.025,.71).rawPath,topText:"Daphne Oram #2",bottomText:"Wikimedia Commons"}],["water_opossum",{maxGroupsToDisplay:9,pathString:a.waterOpossum,topText:"Water Opossum",bottomText:"Wikimedia Commons",minGoodCircles:10}],["cat",{maxGroupsToDisplay:9,pathString:o(a.cat).rawPath,topText:"Cat",bottomText:"Wikimedia Commons"}],["airplane",{maxGroupsToDisplay:15,pathString:o(a.airplane,.3,.7).rawPath,topText:"Airplane",bottomText:"Wikimedia Commons"}],["head_facing_right",{maxGroupsToDisplay:12,pathString:o(a.headFacingRight).rawPath,topText:"Head Facing Right",bottomText:"Wikimedia Commons"}],["Lavater",{maxGroupsToDisplay:8,pathString:o(a.lavater).rawPath,topText:"Johann Kaspar Lavaters",bottomText:"Wikimedia Commons"}],["man_walking",{maxGroupsToDisplay:16,pathString:o(a.manWalking).rawPath,bottomText:"Wikimedia Commons",topText:"Man Walking"}],["bear",{maxGroupsToDisplay:16,pathString:o(a.bear).rawPath,topText:"Bear",bottomText:"Wikimedia Commons"}],["head_facing_left",{maxGroupsToDisplay:13,pathString:o(a.headFacingLeft).rawPath,topText:"Head Facing Left",bottomText:"Wikimedia Commons"}],["kiwi",{maxGroupsToDisplay:17,pathString:o(a.kiwi,1,.85).rawPath,topText:"Kiwi",bottomText:"Wikimedia Commons"}],["hand",{maxGroupsToDisplay:15,pathString:o(a.hand,.8,.2).rawPath,topText:"Hand",bottomText:"Wikimedia Commons"}],["carpe",{maxGroupsToDisplay:16,pathString:o(a.carpe).rawPath,topText:"Carpe",bottomText:"Wikimedia Commons"}],["pigeon",{maxGroupsToDisplay:19,pathString:a.pigeon,topText:"Pigeon",bottomText:"Wikimedia Commons"}],["smallAirplane",{maxGroupsToDisplay:16,pathString:o(a.smallAirplane,.8,.7).rawPath,topText:"Robin DR400",bottomText:"Wikimedia Commons"}],["hawk",{maxGroupsToDisplay:8,pathString:o(a.hawk).rawPath,topText:"Hawk",bottomText:"Wikimedia Commons"}],["songBird",{maxGroupsToDisplay:7,pathString:o(a.songBird).rawPath,topText:"Song Bird",bottomText:"Wikimedia Commons"}]]);{const r=new URLSearchParams(window.location.search).get("script_name");if(r){const l=_.get(r);if(!l)throw console.log(`invalid script name: ${r}`,_),new Error("wtf");Q(l)}else Q(_.get("hand"))}setTimeout(()=>{let r=NaN;window.animationLoop=new P.AnimationLoop(l=>{isNaN(r)&&(r=l);const S=l-r;window.showFrame(S)})},1);
