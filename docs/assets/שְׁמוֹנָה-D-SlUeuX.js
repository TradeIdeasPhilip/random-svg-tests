import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as C,Q as T,b as z}from"./path-shape-BZC9YcLk.js";import{g as P,i as $,a as F}from"./client-misc-DWuUZUgy.js";import{c as O,r as U,e as Y,a as W,f as J}from"./utility-CsOzd0ZV.js";const E=P("pathInputElement",HTMLInputElement),k=P("displaySinglePath",HTMLButtonElement),q=P("singlePathErrorMessage",HTMLSpanElement);function j(s){const c=document.createElement("div");c.innerHTML=`
      <div class="pathDebugger">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          preserveAspectRatio="xMidYMid meet"
          id="singlePathSvg"
        ></svg>
        <table class="segments">
          <tr>
            <th rowspan="2">#</th>
            <th rowspan="2">C</th>
            <th rowspan="2">Length</th>
            <th colspan="2">Requested</th>
            <th colspan="2">Actual</th>
            <th rowspan="2">Difference</th>
          </tr>
          <tr>
            <th>Incoming</th>
            <th>Outgoing</th>
            <th>Incoming</th>
            <th>Outgoing</th>
          </tr>
        </table>
      </div>`;const o=F(c.firstElementChild,HTMLDivElement),e=F(o.firstElementChild,SVGSVGElement),S=F(e.nextElementSibling,HTMLTableElement);let d=-1;function f(){if(e.innerHTML="",S.querySelectorAll("tr[data-temporary]").forEach(n=>{n.firstElementChild&&n.remove()}),d=-1,s){let n;const h=s.commands;h.map((m,a)=>{const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.style.d=new C([m]).cssPath;const v=`hsl(${2.4*a}rad ${60+Math.sin(a)*40}% 50%)`;i.style.stroke=v,e.appendChild(i);const x=i.getBBox();n?n=J(n,x):n=x;const r=S.insertRow();r.dataset.temporary="ðŸ˜Ž";const B=r.insertCell();B.innerText=a.toString(),B.style.color=v;const A=r.insertCell();A.innerText=m.command;const I=r.insertCell();I.innerText=i.getTotalLength().toFixed(2);const l=(b,L)=>{b.innerText=(L*Y).toFixed(2)+"Â°"},u=r.insertCell(),p=r.insertCell();if(m instanceof T){const b=m.creationInfo;b.source=="angles"&&(l(u,b.angle0),l(p,b.angle),b.success||[u,p].forEach(L=>L.classList.add("error")))}const y=r.insertCell(),N=m.incomingAngle;l(y,N);const V=r.insertCell(),R=m.outgoingAngle;l(V,R);const _=r.insertCell(),Q=h[a-1],G=C.needAnM(Q,m)?void 0:O(Q.outgoingAngle,m.incomingAngle);G!==void 0&&l(_,G);{const L=[i,...[B,A,I,u,p,y,V]],X=H=>{L.forEach(D=>{D.classList[H]("hover")})};L.forEach(H=>{H.addEventListener("mouseenter",()=>X("add")),H.addEventListener("mouseleave",()=>X("remove")),H.addEventListener("click",()=>{o.querySelectorAll(".selected").forEach(D=>D.classList.remove("selected")),[i,B].forEach(D=>D.classList.add("selected")),d=a,g()})})}}),n&&(e.viewBox.baseVal.x=n.x,e.viewBox.baseVal.y=n.y,e.viewBox.baseVal.width=n.width,e.viewBox.baseVal.height=n.height,e.style.setProperty("--stroke-width",(Math.hypot(n.width,n.height)*.008305657597434369).toString()))}g()}const t=[];function g(){t.forEach(n=>{try{n()}catch(h){console.error(h)}})}return{topLevelElement:o,get pathShape(){return s},set pathShape(n){s=n,f()},get selectedIndex(){return d},listeners:t}}const M=j();{const s=P("insertPathDebuggerHere",Element);s.parentElement.insertBefore(M.topLevelElement,s)}const w=j();{let s=function(){const o=M.pathShape;if(!o)w.pathShape=void 0;else{const e=M.selectedIndex;switch(F(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value){case"delete":{e>-1?w.pathShape=new C(o.commands.toSpliced(e,1)):w.pathShape=o;break}case"mergeWithNext":{const d=o.commands;if(e<0||e>=d.length-1)w.pathShape=void 0;else{const f=d[e],t=d[e+1];if(!(f instanceof T&&t instanceof T))throw new Error("wtf");const g=T.angles(f.x0,f.y0,f.requestedIncomingAngle,t.x,t.y,t.requestedOutgoingAngle);w.pathShape=new C(d.toSpliced(e,2,g))}break}case"deleteThenMerge":{w.pathShape=void 0;break}case"flip":{w.pathShape=void 0;break}default:throw new Error("wtf")}}};const c=P("insertProcessingPathDebuggerHere",Element);c.parentElement.insertBefore(w.topLevelElement,c),M.listeners.push(s),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(o=>o.addEventListener("click",s))}k.addEventListener("click",()=>{M.pathShape=void 0;const s=E.value,c=C.fromString(s);M.pathShape=c});E.addEventListener("keyup",s=>{s.code=="Enter"&&(k.click(),s.preventDefault())});{let s=()=>{};const c=()=>{const o=E.value;if(o.trim()==="")E.style.backgroundColor="",k.disabled=!0,q.innerText="";else try{C.fromString(o),k.disabled=!1,q.innerText=""}catch(e){if(!(e instanceof z))throw e;k.disabled=!0,q.innerText=e.message,s=()=>{E.focus(),E.setSelectionRange(o.length-e.where.length,o.length)}}};E.addEventListener("input",c),E.value='{"commands":[{"command":"Q","x0":3.3402364362167827,"y0":-3.3007448073623697,"x1":3.9340253985180738,"y1":-4.407606648762401,"x":3.011655728124868,"y":-4.539237903380115,"creationInfo":{"source":"angles","success":true,"angle":-2.9998399305675316,"angle0":-1.0784066014045661}},{"command":"Q","x0":3.011655728124868,"y0":-4.539237903380115,"x1":1.574687929408164,"y1":-4.744307389359313,"x":1.472816111697163,"y":-3.4705009993745333,"creationInfo":{"source":"angles","success":true,"angle":1.6506008096939941,"angle0":-2.9998399305675316}},{"command":"Q","x0":1.472816111697163,"y0":-3.4705009993745333,"x1":2.425601605422024,"y1":-3.103608911097618,"x":3.378387099146885,"y":-2.7367168228207026,"creationInfo":{"source":"angles","success":false,"angle":1.3560482815273174,"angle0":1.6506008096939941}},{"command":"Q","x0":3.378387099146885,"y0":-2.7367168228207026,"x1":3.3100861700748974,"y1":-2.9792037225344936,"x":3.2417852410029093,"y":-3.2216906222482846,"creationInfo":{"source":"angles","success":false,"angle":-1.3703249858538125,"angle0":1.3560482815273174}},{"command":"Q","x0":3.2417852410029093,"y0":-3.2216906222482846,"x1":3.71956498838227,"y1":-3.1350455976774514,"x":4.1973447357616305,"y":-3.048400573106618,"creationInfo":{"source":"angles","success":false,"angle":-0.1010220204226494,"angle0":-0.1456045239311423}},{"command":"Q","x0":4.1973447357616305,"y0":-3.048400573106618,"x1":5.4196689403631035,"y1":-3.172304017662219,"x":5.061868062841531,"y":-4.160669146632123,"creationInfo":{"source":"angles","success":true,"angle":-1.918132677407088,"angle0":-0.1010220204226494}},{"command":"Q","x0":5.061868062841531,"y0":-4.160669146632123,"x1":5.268526125402326,"y1":-4.012893855293418,"x":5.475184187963122,"y":-3.8651185639547148,"creationInfo":{"source":"angles","success":false,"angle":-0.37440229149874305,"angle0":-1.918132677407088}},{"command":"Q","x0":5.475184187963122,"y0":-3.8651185639547148,"x1":16.480296958276732,"y1":-8.189428173637983,"x":2.683828194676533,"y":-6.181870056091758,"creationInfo":{"source":"angles","success":true,"angle":2.997094360451321,"angle0":-0.37440229149874305}},{"command":"Q","x0":2.683828194676533,"y0":-6.181870056091758,"x1":0.1382015495290775,"y1":-5.81144965915722,"x":0.0608453441230225,"y":-3.4844558053025536,"creationInfo":{"source":"angles","success":true,"angle":1.6040270673159511,"angle0":2.997094360451321}},{"command":"Q","x0":0.0608453441230225,"y0":-3.4844558053025536,"x1":-0.040183084485440876,"y1":-0.4453650018892805,"x":2.6303996577439386,"y":-0.5926166531791432,"creationInfo":{"source":"angles","success":true,"angle":-0.055082620605849786,"angle0":1.6040270673159511}},{"command":"Q","x0":2.6303996577439386,"y0":-0.5926166531791432,"x1":3.7388797143957104,"y1":-0.6537364665377791,"x":4.4264871867272255,"y":-0.9672211302345681,"creationInfo":{"source":"angles","success":true,"angle":-0.42775484124811636,"angle0":-0.055082620605849786}}]}',c(),q.parentElement.addEventListener("click",()=>s())}{let s=function(t,g){const n=document.createElement("th");t.appendChild(n),g!==void 0&&n.append((g*Y).toFixed(1)+"Â° "+g.toFixed(3))};const c=P("byAngle",HTMLTableElement),o=0,e=5,S=$(e,t=>o+Math.PI*2*t/e),d=3,f=$(d,t=>o+Math.PI*2*t/d);{const t=c.insertRow();s(t),S.forEach(g=>{s(t,g)})}f.forEach((t,g)=>{const n=c.insertRow();s(n,t),S.forEach((h,m)=>{const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.classList.add("angles");const i=0,v=1,x=0,r=1;a.viewBox.baseVal.x=i,a.viewBox.baseVal.y=x,a.viewBox.baseVal.width=v-i,a.viewBox.baseVal.height=r-x,n.insertCell().appendChild(a);function A(u,p){const y=document.createElementNS("http://www.w3.org/2000/svg","line"),N=.2,[V,R,_]=p?[i,x,u+Math.PI]:[v,r,u],Q=W(N,_);y.x1.baseVal.value=V,y.x2.baseVal.value=V+Q.x,y.y1.baseVal.value=R,y.y2.baseVal.value=R+Q.y,a.appendChild(y)}A(h,!0),A(t,!1);const I=document.createElementNS("http://www.w3.org/2000/svg","path"),l=T.angles(i,x,h,v,r,t);if(l.creationInfo.success){const u=new C([l]).rawPath;I.setAttribute("d",u),a.appendChild(I);const p=Math.abs(O(h,l.incomingAngle))+Math.abs(O(t,l.outgoingAngle));p>U?(console.error({error:p,degrees:p*Y,path:I,inExpected:h,inFound:l.incomingAngle,outExpected:t,outFound:l.outgoingAngle,qCommand:l}),a.style.backgroundColor="lightpink"):a.style.backgroundColor="rgb(26, 217, 255)"}else a.style.backgroundColor="hsl(190 100% 85% / 1)";a.addEventListener("click",()=>{console.log({inExpected:h,inFound:l?.incomingAngle,outExpected:t,outFound:l?.outgoingAngle,qCommand:l});debugger;const u=T.angles(i,x,h,v,r,t);console.log(u)})})})}k.click();
