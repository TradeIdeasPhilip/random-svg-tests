import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as M}from"./client-misc-ZHNZ3-cL.js";import{b as c,m as K,c as X,s as Y,g as ee,t as L,h as $}from"./fourier-shared-DMwfk1EW.js";import{p as te,P as A}from"./path-shape-n6EbRjvk.js";import{m as b}from"./misc-wGF4FraP.js";import{d as C,g as ae}from"./utility-D2jUDy1w.js";const ne=1024,k=M.getById("scaled",SVGGElement),z=M.getById("reference",SVGPathElement),ie=M.getById("samples",SVGPathElement);function F(i,o){if(i>=o)throw new Error("wtf");const S=b.makeLinear(i,0,o,1);function G(f){if(f<=i)return 0;if(f>=o)return 1;const l=S(f);return ae(l)}return G}function V(i){z.setAttribute("d",i.pathString);const o=te(z.getBBox(),{x:1,y:1,width:14,height:7},"srcRect fits completely into destRect",1),S=o.a;k.style.transform=o.toString(),k.style.setProperty("--path-scale",S.toString());const G=X(i.pathString,ne);let f="";G.forEach(([e,a])=>{f+=`M${e},${a}l0,0`}),ie.setAttribute("d",f);const l=Y(G),T=ee({addTime:4800,pauseTime:200,maxGroupsToDisplay:i.maxGroupsToDisplay,terms:l}),q=e=>8*Math.max(...l.slice(0,e).map(t=>t.frequency))+7,Q=T.map(e=>{if(e.addingCircles==0){const a=L(l,e.usingCircles),t=q(e.usingCircles),r=A.parametric(a,t);return()=>r.rawPath}else if(e.usingCircles==0&&e.addingCircles==1&&l[0].frequency==0){let a=function(s){return`${n.x*s},${n.y*s}`};const{startTime:t,endTime:r}=e,m=r-t,u=F(t,t+m/2),x=F(t,r),n=$(l[0]);return s=>{const p=x(s),d=a(p),y=u(s),h=a(y);return`M ${d} L ${h}`}}else{const t=.2/Math.max(...l.slice(0,e.usingCircles+e.addingCircles).map(n=>n.frequency)),r=b.makeBoundedLinear(e.startTime,-t,e.endTime,1+t),m=L(l,e.usingCircles),u=L(l,e.addingCircles,e.usingCircles);let x=q(e.usingCircles+e.addingCircles);if(e.usingCircles==0||e.usingCircles==1&&$(l[0])){const n=$(l[0])??{x:0,y:0};return s=>{const p=r(s),d=p-t,y=p+t,h=F(d,y),g=Math.min(1,y);if(g<=0)return`$M${n.x},${n.y} L${n.x},${n.y}`;{let P=function(w){w=w*g;const E=m(w),v=1-h(w);if(v==0)return E;{const W=u(w);return{x:E.x+v*W.x,y:E.y+v*W.y}}};const D=Math.ceil(Math.max(x,150)*g);return A.parametric(P,D).rawPath}}}else return n=>{const s=r(n),p=F(s-t,s+t);function d(h){const g=m(h),P=1-p(h);if(P==0)return g;{const D=u(h);return{x:g.x+P*D.x,y:g.y+P*D.y}}}return A.parametric(d,x).rawPath}}}),Z=new Intl.NumberFormat("en-US",{minimumSignificantDigits:5,maximumSignificantDigits:5,useGrouping:!1}).format,O=e=>{e<0&&(e=0);let a=Z(e);const[,t,r]=/^([0-9]+)\.([0-9]+)$/.exec(a);switch(t.length){case 3:break;case 2:{a=b.FIGURE_SPACE+a;break}case 1:{a=b.FIGURE_SPACE+b.FIGURE_SPACE+a;break}default:throw console.warn({beforeDecimalPoint:t,afterDecimalPoint:r,result:a}),new Error("wtf")}return a+"%"},j=T.map(e=>({usingAmplitude:O(e.usingAmplitude),addingAmplitude:O(e.addingAmplitude),availableAmplitude:O(e.availableAmplitude)})),I=C("[data-using] [data-circles]",HTMLTableCellElement),R=C("[data-using] [data-amplitude]",HTMLTableCellElement),H=C("[data-adding] [data-circles]",HTMLTableCellElement),B=C("[data-adding] [data-amplitude]",HTMLTableCellElement),N=C("[data-available] [data-circles]",HTMLTableCellElement),U=C("[data-available] [data-amplitude]",HTMLTableCellElement);function J(e){function a(){const n=T.findIndex(({endTime:s})=>e<s);return n==-1?T.length-1:n}const t=a(),r=n=>`${n.toString().padStart(4,b.FIGURE_SPACE)}`,m=T[t];I.innerText=r(m.usingCircles),H.innerText=r(m.addingCircles),N.innerText=r(m.availableCircles),[{value:m.usingCircles,element1:I,element2:R},{value:m.addingCircles,element1:H,element2:B},{value:m.availableCircles,element1:N,element2:U}].forEach(({value:n,element1:s,element2:p})=>{const d=n==0?"0.5":"";s.style.opacity=d,p.style.opacity=d});const u=j[t];R.innerText=u.usingAmplitude,B.innerText=u.addingAmplitude,U.innerText=u.availableAmplitude;const x=A.cssifyPath(Q[t](e));k.style.setProperty("--d",x)}window.showFrame=J}const _=new Map([["likeShareAndSubscribe",{maxGroupsToDisplay:30,pathString:c.likeShareAndSubscribe,minGoodCircles:10}],["hilbert0",{maxGroupsToDisplay:20,pathString:c.hilbert[0]}],["hilbert1",{maxGroupsToDisplay:20,pathString:c.hilbert[1],minGoodCircles:13}],["hilbert4",{maxGroupsToDisplay:20,pathString:c.hilbert[4]}],["p0",{maxGroupsToDisplay:20,pathString:c.peanocurve[0]}],["p1",{maxGroupsToDisplay:20,pathString:c.peanocurve[1]}],["p2",{maxGroupsToDisplay:20,pathString:c.peanocurve[2]}],["square",{maxGroupsToDisplay:7,pathString:"M-0.5,-0.667 h 1 v 1 h -1 z"}],["ellipse",{maxGroupsToDisplay:7,pathString:"M1,0 A1,1.25 0 1 1 -1,0 A1,1.25 0 1 1 1,0 z"}],["star7",{maxGroupsToDisplay:8,pathString:K(7,2,"My seed 2025a").rawPath,topText:"Random 7 Pointed Star",bottomText:'makePolygon(7,2, "My seed 2025a")'}],["Daphne_Oram_1",{maxGroupsToDisplay:18,pathString:c.daphneOram1,topText:"Daphne Oram #1",bottomText:"Wikimedia Commons"}],["Daphne_Oram_2",{maxGroupsToDisplay:22,pathString:c.daphneOram2,topText:"Daphne Oram #2",bottomText:"Wikimedia Commons"}],["water_opossum",{maxGroupsToDisplay:22,pathString:c.waterOpossum,topText:"Chironectes (Water Opossum)",bottomText:"Wikimedia Commons",minGoodCircles:10}]]);{const i=new URLSearchParams(window.location.search).get("script_name");if(i){const o=_.get(i);if(!o)throw console.log(`invalid script name: ${i}`,_),new Error("wtf");V(o)}else V(_.get("star7"))}setTimeout(()=>{let i=NaN;window.animationLoop=new M.AnimationLoop(o=>{isNaN(i)&&(i=o);const S=o-i;window.showFrame(S)})},1);
