import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as T,Q as _,b as z}from"./path-shape-BZC9YcLk.js";import{g as k,i as $,a as R}from"./client-misc-DWuUZUgy.js";import{c as O,r as U,e as Y,a as W,f as J}from"./utility-CsOzd0ZV.js";const x=k("pathInputElement",HTMLInputElement),L=k("displaySinglePath",HTMLButtonElement),D=k("singlePathErrorMessage",HTMLSpanElement);function j(t){const c=document.createElement("div");c.innerHTML=`
      <div class="pathDebugger">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          preserveAspectRatio="xMidYMid meet"
          id="singlePathSvg"
        ></svg>
        <table class="segments">
          <tr>
            <th rowspan="2">#</th>
            <th rowspan="2">C</th>
            <th rowspan="2">Length</th>
            <th colspan="2">Requested</th>
            <th colspan="2">Actual</th>
            <th rowspan="2">Difference</th>
          </tr>
          <tr>
            <th>Incoming</th>
            <th>Outgoing</th>
            <th>Incoming</th>
            <th>Outgoing</th>
          </tr>
        </table>
      </div>`;const a=R(c.firstElementChild,HTMLDivElement),n=R(a.firstElementChild,SVGSVGElement),w=R(n.nextElementSibling,HTMLTableElement);let b=-1;function q(){if(n.innerHTML="",w.querySelectorAll("tr[data-temporary]").forEach(e=>{e.firstElementChild&&e.remove()}),b=-1,t){let e;const d=t.commands;d.map((u,o)=>{const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.style.d=new T([u]).cssPath;const y=`hsl(${2.4*o}rad ${60+Math.sin(o)*40}% 50%)`;i.style.stroke=y,n.appendChild(i);const p=i.getBBox();e?e=J(e,p):e=p;const r=w.insertRow();r.dataset.temporary="ðŸ˜Ž";const M=r.insertCell();M.innerText=o.toString(),M.style.color=y;const P=r.insertCell();P.innerText=u.command;const C=r.insertCell();C.innerText=i.getTotalLength().toFixed(2);const l=(E,S)=>{E.innerText=(S*Y).toFixed(2)+"Â°"},g=r.insertCell(),m=r.insertCell();if(u instanceof _){const E=u.creationInfo;E.source=="angles"&&(l(g,E.angle0),l(m,E.angle),E.success||[g,m].forEach(S=>S.classList.add("error")))}const f=r.insertCell(),F=u.incomingAngle;l(f,F);const B=r.insertCell(),H=u.outgoingAngle;l(B,H);const N=r.insertCell(),A=d[o-1],G=T.needAnM(A,u)?void 0:O(A.outgoingAngle,u.incomingAngle);G!==void 0&&l(N,G);{const S=[i,...[M,P,C,g,m,f,B]],X=V=>{S.forEach(Q=>{Q.classList[V]("hover")})};S.forEach(V=>{V.addEventListener("mouseenter",()=>X("add")),V.addEventListener("mouseleave",()=>X("remove")),V.addEventListener("click",()=>{a.querySelectorAll(".selected").forEach(Q=>Q.classList.remove("selected")),[i,M].forEach(Q=>Q.classList.add("selected")),b=o,h()})})}}),e&&(n.viewBox.baseVal.x=e.x,n.viewBox.baseVal.y=e.y,n.viewBox.baseVal.width=e.width,n.viewBox.baseVal.height=e.height,n.style.setProperty("--stroke-width",(Math.hypot(e.width,e.height)*.008305657597434369).toString()))}h()}const s=[];function h(){s.forEach(e=>{try{e()}catch(d){console.error(d)}})}return{topLevelElement:a,get pathShape(){return t},set pathShape(e){t=e,q()},get selectedIndex(){return b},listeners:s}}const I=j();{const t=k("insertPathDebuggerHere",Element);t.parentElement.insertBefore(I.topLevelElement,t)}const v=j();{let t=function(){const a=I.pathShape;if(!a)v.pathShape=void 0;else{const n=I.selectedIndex;switch(R(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value){case"delete":{n>-1?v.pathShape=new T(a.commands.toSpliced(n,1)):v.pathShape=a;break}case"mergeWithNext":{v.pathShape=void 0;break}case"deleteThenMerge":{v.pathShape=void 0;break}case"flip":{v.pathShape=void 0;break}default:throw new Error("wtf")}}};const c=k("insertProcessingPathDebuggerHere",Element);c.parentElement.insertBefore(v.topLevelElement,c),I.listeners.push(t),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(a=>a.addEventListener("click",t))}L.addEventListener("click",()=>{I.pathShape=void 0;const t=x.value,c=T.fromString(t);I.pathShape=c});x.addEventListener("keyup",t=>{t.code=="Enter"&&(L.click(),t.preventDefault())});{let t=()=>{};const c=()=>{const a=x.value;if(a.trim()==="")x.style.backgroundColor="",L.disabled=!0,D.innerText="";else try{T.fromString(a),L.disabled=!1,D.innerText=""}catch(n){if(!(n instanceof z))throw n;L.disabled=!0,D.innerText=n.message,t=()=>{x.focus(),x.setSelectionRange(a.length-n.where.length,a.length)}}};x.addEventListener("input",c),x.value='{"commands":[{"command":"Q","x0":3.3402364362167827,"y0":-3.3007448073623697,"x1":3.9340253985180738,"y1":-4.407606648762401,"x":3.011655728124868,"y":-4.539237903380115,"creationInfo":{"source":"angles","success":true,"angle":-2.9998399305675316,"angle0":-1.0784066014045661}},{"command":"Q","x0":3.011655728124868,"y0":-4.539237903380115,"x1":1.574687929408164,"y1":-4.744307389359313,"x":1.472816111697163,"y":-3.4705009993745333,"creationInfo":{"source":"angles","success":true,"angle":1.6506008096939941,"angle0":-2.9998399305675316}},{"command":"Q","x0":1.472816111697163,"y0":-3.4705009993745333,"x1":2.425601605422024,"y1":-3.103608911097618,"x":3.378387099146885,"y":-2.7367168228207026,"creationInfo":{"source":"angles","success":false,"angle":1.3560482815273174,"angle0":1.6506008096939941}},{"command":"Q","x0":3.378387099146885,"y0":-2.7367168228207026,"x1":3.3100861700748974,"y1":-2.9792037225344936,"x":3.2417852410029093,"y":-3.2216906222482846,"creationInfo":{"source":"angles","success":false,"angle":-1.3703249858538125,"angle0":1.3560482815273174}},{"command":"Q","x0":3.2417852410029093,"y0":-3.2216906222482846,"x1":3.71956498838227,"y1":-3.1350455976774514,"x":4.1973447357616305,"y":-3.048400573106618,"creationInfo":{"source":"angles","success":false,"angle":-0.1010220204226494,"angle0":-0.1456045239311423}},{"command":"Q","x0":4.1973447357616305,"y0":-3.048400573106618,"x1":5.4196689403631035,"y1":-3.172304017662219,"x":5.061868062841531,"y":-4.160669146632123,"creationInfo":{"source":"angles","success":true,"angle":-1.918132677407088,"angle0":-0.1010220204226494}},{"command":"Q","x0":5.061868062841531,"y0":-4.160669146632123,"x1":5.268526125402326,"y1":-4.012893855293418,"x":5.475184187963122,"y":-3.8651185639547148,"creationInfo":{"source":"angles","success":false,"angle":-0.37440229149874305,"angle0":-1.918132677407088}},{"command":"Q","x0":5.475184187963122,"y0":-3.8651185639547148,"x1":16.480296958276732,"y1":-8.189428173637983,"x":2.683828194676533,"y":-6.181870056091758,"creationInfo":{"source":"angles","success":true,"angle":2.997094360451321,"angle0":-0.37440229149874305}},{"command":"Q","x0":2.683828194676533,"y0":-6.181870056091758,"x1":0.1382015495290775,"y1":-5.81144965915722,"x":0.0608453441230225,"y":-3.4844558053025536,"creationInfo":{"source":"angles","success":true,"angle":1.6040270673159511,"angle0":2.997094360451321}},{"command":"Q","x0":0.0608453441230225,"y0":-3.4844558053025536,"x1":-0.040183084485440876,"y1":-0.4453650018892805,"x":2.6303996577439386,"y":-0.5926166531791432,"creationInfo":{"source":"angles","success":true,"angle":-0.055082620605849786,"angle0":1.6040270673159511}},{"command":"Q","x0":2.6303996577439386,"y0":-0.5926166531791432,"x1":3.7388797143957104,"y1":-0.6537364665377791,"x":4.4264871867272255,"y":-0.9672211302345681,"creationInfo":{"source":"angles","success":true,"angle":-0.42775484124811636,"angle0":-0.055082620605849786}}]}',c(),D.parentElement.addEventListener("click",()=>t())}{let t=function(s,h){const e=document.createElement("th");s.appendChild(e),h!==void 0&&e.append((h*Y).toFixed(1)+"Â° "+h.toFixed(3))};const c=k("byAngle",HTMLTableElement),a=0,n=5,w=$(n,s=>a+Math.PI*2*s/n),b=3,q=$(b,s=>a+Math.PI*2*s/b);{const s=c.insertRow();t(s),w.forEach(h=>{t(s,h)})}q.forEach((s,h)=>{const e=c.insertRow();t(e,s),w.forEach((d,u)=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("angles");const i=0,y=1,p=0,r=1;o.viewBox.baseVal.x=i,o.viewBox.baseVal.y=p,o.viewBox.baseVal.width=y-i,o.viewBox.baseVal.height=r-p,e.insertCell().appendChild(o);function P(g,m){const f=document.createElementNS("http://www.w3.org/2000/svg","line"),F=.2,[B,H,N]=m?[i,p,g+Math.PI]:[y,r,g],A=W(F,N);f.x1.baseVal.value=B,f.x2.baseVal.value=B+A.x,f.y1.baseVal.value=H,f.y2.baseVal.value=H+A.y,o.appendChild(f)}P(d,!0),P(s,!1);const C=document.createElementNS("http://www.w3.org/2000/svg","path"),l=_.angles(i,p,d,y,r,s);if(l.creationInfo.success){const g=new T([l]).rawPath;C.setAttribute("d",g),o.appendChild(C);const m=Math.abs(O(d,l.incomingAngle))+Math.abs(O(s,l.outgoingAngle));m>U?(console.error({error:m,degrees:m*Y,path:C,inExpected:d,inFound:l.incomingAngle,outExpected:s,outFound:l.outgoingAngle,qCommand:l}),o.style.backgroundColor="lightpink"):o.style.backgroundColor="rgb(26, 217, 255)"}else o.style.backgroundColor="hsl(190 100% 85% / 1)";o.addEventListener("click",()=>{console.log({inExpected:d,inFound:l?.incomingAngle,outExpected:s,outFound:l?.outgoingAngle,qCommand:l});debugger;const g=_.angles(i,p,d,y,r,s);console.log(g)})})})}L.click();
