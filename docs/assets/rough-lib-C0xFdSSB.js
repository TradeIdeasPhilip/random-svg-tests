import{m as E}from"./misc-wGF4FraP.js";import{l as Q}from"./math-to-path-BjxPr1Cw.js";import{Q as i,P as p}from"./path-shape-n6EbRjvk.js";function R(v,b){const y=E.angleBetween(v,b),f=1*E.radiansPerDegree;return Math.abs(y)<f}function F(v,b,y){const f=v.commands.map(l=>l instanceof i?l:i.line2({x:l.x0,y:l.y0},l)),c=new Array;return new p(f).splitOnMove().forEach(l=>{const g=l.commands.map(t=>{if(!(t instanceof i))throw new Error("wtf");const e=document.createElementNS("http://www.w3.org/2000/svg","path"),o=new p([t]).rawPath;e.setAttribute("d",o);const s=e.getTotalLength();return{command:t,length:s}}),q=g.flatMap(({command:t},e)=>e==0?[]:{x:t.x0,y:t.y0});function w(t,e){const o=Math.min(b,e)*y(),s=y()*Math.PI*2,n=E.polarToRectangular(o,s),x=t.x+n.x,u=t.y+n.y;return{x,y:u,offset:n,initial:t}}const I=g[0],h=[w({x:I.command.x0,y:I.command.y0},I.length)];q.forEach((t,e)=>{const o=g[e],s=g[e+1],n=Math.min(o.length,s.length)/2;h.push(w(t,n))});const C=g[g.length-1];if(h.push(w(C.command,C.length)),h.length!=g.length+1||g.length!=q.length+1)throw new Error("wtf");g.forEach((t,e)=>{const o=h[e],s=h[e+1];let n={x:t.command.x1,y:t.command.y1};if(n={x:n.x+(o.offset.x+s.offset.x)/2,y:n.y+(o.offset.y+s.offset.y)/2},n=w(n,t.length),c.push(i.controlPoints(o.x,o.y,n.x,n.y,s.x,s.y)),e>0&&R(f.at(c.length-2).requestedOutgoingAngle,f.at(c.length-1).requestedIncomingAngle)){let x=function(){return[r,a].some(m=>m.creationInfo.source=="angles"&&!m.creationInfo.success)};const u=c.pop(),A=c.pop(),O=A.requestedOutgoingAngle+E.angleBetween(A.requestedOutgoingAngle,u.requestedIncomingAngle)/2;let r=A.newAngles(void 0,O),a=u.newAngles(O,void 0);if(x()){const m=i.angles(r.x0,r.y0,r.incomingAngle,a.x,a.y,a.outgoingAngle);if(m.creationInfo.success){const d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d",new p([m]).rawPath);const S=d.getTotalLength(),T=S/5,B=S/200,M=d.getPointAtLength(T-B),L=d.getPointAtLength(T+B),P=Q(M,L,.5),N=Math.atan2(L.y-M.y,L.x-M.x);r=i.angles(r.x0,r.y0,r.incomingAngle,P.x,P.y,N),a=i.angles(P.x,P.y,N,a.x,a.y,a.outgoingAngle)}}x()&&(r=A,a=u),c.push(r),c.push(a)}})}),{before:new p(f),after:new p(c)}}export{F as m};
