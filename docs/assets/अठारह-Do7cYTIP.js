import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as S}from"./client-misc-ZHNZ3-cL.js";import{d as G,s as E}from"./utility-DqApwI2-.js";import{m as i}from"./misc-wGF4FraP.js";import"./path-shape-n6EbRjvk.js";function I(e,t,s,o,n){const a=Math.atan2(n-s,o-t),r=i.polarToRectangular(20,a);e.x1.baseVal.value=t+r.x,e.y1.baseVal.value=s+r.y,e.x2.baseVal.value=t-r.x,e.y2.baseVal.value=s-r.y}function b(...e){e.forEach(t=>{t.style.display=""})}function M(...e){e.forEach(t=>{t.style.display="none"})}function R(){return[[29,41],[3,5],[37,7],[11,13],[31,17],[19,23],[103,43],[307,71]].map(([s,o])=>{function n(a,r){function h(m){const l=a*i.FULL_CIRCLE/m;return Math.sin(l)*r}return{Δx:h(s),Δy:h(o)}}return n})}const v=R();function $(e){function s(o){return Math.sin(o*e)*10}return s}const q=[2,Math.E,Math.PI,2**1.5,4,3].map(e=>$(e));class T{#m=S.getById("scale",SVGGElement);#d=S.getById("function",SVGPathElement);#o=G("#singleEstimate",SVGLineElement);#t=E("#estimateLines line",SVGLineElement);#i=G("#margin-of-error",SVGGElement);#a;#e;addBorders(){E("svg#main text",SVGTextElement).forEach(s=>{const o=i.assertClass(s.cloneNode(!0),SVGTextElement);o.classList.add("text-background"),s.parentElement.insertBefore(o,s)})}constructor(){[this.#a,this.#e]=E("circle.measurement-fill",SVGCircleElement,2,2);const s=.13333333*2,o=s/this.#t.length,n=o*1.15,a=s-n;if(a<0)throw new Error("wtf");const r=`${n} ${a}`;this.#t.forEach((h,m)=>{h.style.strokeDasharray=r,h.style.strokeDashoffset=(o*m).toString()}),this.addBorders(),this.#c=E(".blur-me",SVGTSpanElement,2,2),this.#l=E(".shake-me",SVGTextElement,2,2),this.update()}#c;#l;static instance=new T;#s=1;#r=2;get dx(){return this.#r}#u=0;set timeInSeconds(t){this.#u=t,this.update()}get timeInSeconds(){return this.#u}update(){const t=0+this.#r,o=-this.f(t),n=this.#s,a=t*n,r=o*n;this.#e.cx.baseVal.value=a,this.#e.cy.baseVal.value=r;let h,m;if(this.blurry){b(this.#i),M(this.#o),b(...this.#t),this.#t.forEach((l,d)=>{const f=.00333333325*this.zoom,x=v[d*2](this.timeInSeconds,f),V=v[d*2+1](this.timeInSeconds,f);I(l,x.Δx,x.Δy,a+V.Δx,r+V.Δy)}),h=T.initialBlurRadius*Math.sqrt(n),m="url(#measurementBlur)";{const f=`blur(${(1-Math.abs(Math.cos(this.timeInSeconds*i.FULL_CIRCLE/2/2)))*.04}px)`;this.#c.forEach(x=>x.style.filter=f)}this.#l.forEach(l=>{const d=q.map(x=>x(this.timeInSeconds));d.push(0);const f=d.join(" ");l.setAttribute("rotate",f)})}else M(this.#i),M(...this.#t),b(this.#o),I(this.#o,0,0,a,r),h=.06666666,m="var(--measurement-color)";[this.#a,this.#e].forEach(l=>{l.r.baseVal.value=h,l.style.fill=m})}#h=!1;get blurry(){return this.#h}set blurry(t){this.#h=t,this.update()}set dx(t){this.#r=t,this.update()}updatePath(){const t=this.#s,s=`path('M ${-3*t} ${-9*t} Q ${0*t} ${9*t} ${3*t} ${-9*t}')`;this.#d.style.d=s}get zoom(){return this.#s}set zoom(t){this.#s=t,this.update(),this.updatePath(),this.#m.style.transform=`scale(${t})`}f(t){return t*t}#n;get automaticTime(){return!!this.#n}set automaticTime(t){this.#n?.cancel(),this.#n=void 0,t&&(this.#n=new S.AnimationLoop(s=>{this.blurry&&(this.timeInSeconds=s/1e3)}))}static initialBlurRadius=1/8}const g=T.instance,w=window;w.GUI=T.instance;function k(e){if(e.length==0)return()=>{throw new Error("empty")};const t=e[0].x,s=[];return e.forEach((n,a)=>{const r=e[a+1];if(r!==void 0){if(n.x>r.x)throw new Error("x’s are out of order.");if(n.x<r.x){const h=n.x,m=n.y,l=r.x,d=r.y,f=m==d?()=>m:i.makeLinear(h,m,l,d);s.push({f,x2:l})}}}),n=>{if(n<t)throw new Error("x is too small");for(let a=0;a<s.length;a++){const r=s[a];if(n<=r.x2)return r.f(n)}throw new Error("x is too big")}}const L=22.5,y=22.5-L,c=33.5-L,u=54.5-L,p=82-L,D=k([{x:y,y:2},{x:i.lerp(y,c,.15),y:Math.sqrt(3)},{x:i.lerp(y,c,.3),y:Math.sqrt(2)},{x:i.lerp(y,c,.45),y:1},{x:i.lerp(y,c,.95),y:.005},{x:c,y:.005},{x:c,y:2},{x:i.lerp(c,u,.15),y:Math.sqrt(3)},{x:i.lerp(c,u,.3),y:Math.sqrt(2)},{x:i.lerp(c,u,.45),y:1},{x:i.lerp(c,u,.95),y:.1},{x:u,y:.1},{x:i.lerp(u,p,.25),y:.1},{x:i.lerp(u,p,.5),y:.05},{x:i.lerp(u,p,.75),y:.005},{x:p,y:.005}]),F=k([{x:y,y:1},{x:i.lerp(y,c,.55),y:1},{x:i.lerp(y,c,.85),y:6},{x:c,y:6},{x:c,y:1},{x:i.lerp(c,u,.55),y:1},{x:i.lerp(c,u,.85),y:6},{x:u,y:6},{x:i.lerp(u,p,.3),y:32},{x:p,y:32}]);function C(e){g.timeInSeconds=e-c,g.blurry=e>=c,g.dx=D(e),g.zoom=F(e)}let P;function z(){P?.cancel()}function A(){g.automaticTime=!1,z();let e;const t=new S.AnimationLoop(s=>{e??=s;const n=(s-e)/1e3;n>p?t.cancel():C(n)});P=t}S.getById("start",HTMLButtonElement).addEventListener("click",A);S.getById("stop",HTMLButtonElement).addEventListener("click",z);w.startRealtimeAnimation=A;function O(e){return document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(t=>{if(!(t instanceof SVGElement||t instanceof HTMLElement))throw new Error("wtf");t.style.display="none"}),g.automaticTime=!1,{source:"parabola-tangent-line.ts",script:e,seconds:p-y}}w.initScreenCapture=O;w.showFrame=C;function B(e,t){const s=new DOMPointReadOnly(e.clientX,e.clientY);t??=e.target;const o=t.getScreenCTM().inverse(),n=s.matrixTransform(o);return{x:n.x,y:n.y}}function Y(e){let t={x:0,y:0};e.addEventListener("pointerdown",s=>{t=B(s);const o=s.target;o.setPointerCapture(s.pointerId),console.log(t,o)}),e.addEventListener("lostpointercapture",s=>{const o=B(s),n=o.x-t.x,a=o.y-t.y;(n!=0||a!=0)&&console.log({...o,dx:n,dy:a})})}E("svg",SVGSVGElement).forEach(e=>Y(e));
