import{m as a}from"./misc-wGF4FraP.js";function w(s,r,e=1,t=1/0,o=document){const n=[];if(o.querySelectorAll(s).forEach(i=>{n.push(a.assertClass(i,r))}),n.length<e||n.length>t)throw new Error(`Expecting "${s}" to return [${e} - ${t}] instances of ${r.name}, found ${n.length}.`);return n}function p(s,r,e=document){return w(s,r,1,1,e)[0]}class d{constructor(){throw new Error("wtf")}static sfc32(r,e,t,o){function n(){r|=0,e|=0,t|=0,o|=0;let c=(r+e|0)+o|0;return o=o+1|0,r=e^e>>>9,e=t+(t<<3)|0,t=t<<21|t>>>11,t=t+c|0,(c>>>0)/4294967296}const i=n;return Object.defineProperty(i,"currentSeed",{get(){return JSON.stringify([r,e,t,o])}}),i}static#t=42;static seedIsValid(r){try{return this.create(r),!0}catch{return!1}}static create(r=this.newSeed()){console.info(r);const e=JSON.parse(r);if(!(e instanceof Array))throw new Error("invalid input");if(e.length!=4)throw new Error("invalid input");const[t,o,n,i]=e;if(!(typeof t=="number"&&typeof o=="number"&&typeof n=="number"&&typeof i=="number"))throw new Error("invalid input");return this.sfc32(t,o,n,i)}static newSeed(){const r=[];return r.push(Date.now()|0),r.push(this.#t++|0),r.push(Math.random()*2**31|0),r.push(performance.now()*1e4|0),JSON.stringify(r)}static fromString(r){try{return this.create(r)}catch{return this.create(this.anyStringToSeed(r))}}static anyStringToSeed(r){function e(n,i){return(n<<i|n>>>32-i)>>>0}const t=[2654435769,608135816,2242054355,320440878];return new TextEncoder().encode(r).forEach(n=>{t[0]^=n,t[0]=e(t[0],3),t[1]^=n,t[1]=e(t[1],5),t[2]^=n,t[2]=e(t[2],7),t[3]^=n,t[3]=e(t[3],11)}),t[0]^=e(t[1],7),t[1]^=e(t[2],11),t[2]^=e(t[3],13),t[3]^=e(t[0],17),JSON.stringify(t)}static test(){const t=[this.create()];for(;t.length<=10;){for(let n=0;n<20;n++){const i=t.map(c=>c());for(let c=1;c<i.length;c++)if(i[c]!==i[0]){debugger;throw new Error("wtf")}}const o=a.pick(t).currentSeed;t.forEach(n=>{if(n.currentSeed!=o){debugger;throw new Error("wtf")}}),t.push(this.create(o))}}}window.Random=d;function u(s){if(!(Number.isFinite(s)&&s>=0&&s<=1))throw new Error(`t should be between 0 and 1, inclusive. t == ${s}`)}function S(...s){s.forEach(t=>{if(!(t>=0&&t<Number.MAX_SAFE_INTEGER))throw new Error("wtf")});const r=a.sum(s);if(r==0)throw new Error("wtf");return t=>{u(t),t*=r;for(let o=0;o<s.length;o++){const n=s[o];if(t<=n)return t/=n,{t,index:o};t-=n}throw new Error("wtf")}}function E(s,r,e){const t=s+r+e,o=a.makeBoundedLinear(s/t,0,(s+r)/t,1);return i=>{u(i);const c=o(i)*r,f=Math.min(c|0,r-1),h=c-f;return u(h),{t:h,index:f}}}function g(s){const r=2/(s+1),e=1-r;return o=>e*o*o+r*o}function l(s,r){return r?l(r,s%r):s}function y(s,r){return s*r/l(s,r)}class x{#t;constructor(r=60){if(a.assertFinite(r),r<1||r!=(r|0))throw new Error("wtf");this.#t=r,this.fromMSF=this.fromMSF.bind(this),this.fromString=this.fromString.bind(this),Object.freeze(this)}get framesPerSecond(){return this.#t}fromMSF(r,e,t){return(r*60+e)*this.#t+t}fromString(r){const e=/^([0-9]+):([0-9]+):([0-9]+)$/.exec(r);if(!e)throw new Error("wtf");const t=a.parseIntX(e[1]),o=a.parseIntX(e[2]),n=a.parseIntX(e[3]);if(t===void 0||o===void 0||n===void 0)throw new Error("wtf");return this.fromMSF(t,o,n)}}export{x as G,d as R,u as a,p as b,g as c,E as d,y as l,S as m,w as s};
