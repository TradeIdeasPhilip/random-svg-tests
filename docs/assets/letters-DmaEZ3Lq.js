import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as I,g as rt,i as ot,m as pt,s as ct}from"./client-misc-DyzYuCZn.js";/* empty css              */import{b as X,l as W}from"./utility-BJJSsp0G.js";import{a as lt}from"./rough.esm-C_8OcXYf.js";class J{constructor(p,e,f){this.x0=p,this.y0=e,this.x=f,X(p,e,f),this.y=e,this.asString=`H ${f}`}y;incomingAngle=NaN;outgoingAngle=NaN;command="H";asString;translate(p,e){return new J(this.x0+p,this.y0+e,this.x+p)}toCubic(){return new K(this.x0,this.y0,W(this.x0,this.x,1/3),this.y0,W(this.x0,this.x,2/3),this.y0,this.x,this.y0)}}class tt{constructor(p,e,f){this.x0=p,this.y0=e,this.y=f,X(p,e,f),this.x=p,this.asString=`V ${f}`}x;incomingAngle=NaN;outgoingAngle=NaN;command="V";asString;translate(p,e){return new tt(this.x0+p,this.y0+e,this.y+e)}toCubic(){return new K(this.x0,this.y0,this.x0,W(this.y0,this.y,1/3),this.x0,W(this.y0,this.y,2/3),this.x0,this.y)}}class et{constructor(p,e,f,i){this.x0=p,this.y0=e,this.x=f,this.y=i,X(p,e,f,i),this.asString=`L ${f},${i}`}incomingAngle=NaN;outgoingAngle=NaN;command="L";asString;translate(p,e){return new et(this.x0+p,this.y0+e,this.x+p,this.y+e)}toCubic(){return new K(this.x0,this.y0,W(this.x0,this.x,1/3),W(this.y0,this.y,1/3),W(this.x0,this.x,2/3),W(this.y0,this.y,2/3),this.x,this.y)}}class st{constructor(p,e,f,i,a,M){this.x0=p,this.y0=e,this.x1=f,this.y1=i,this.x=a,this.y=M,X(p,e,f,i,a,M),this.asString=`Q ${f},${i} ${a},${M}`}incomingAngle=NaN;outgoingAngle=NaN;command="Q";asString;translate(p,e){return new st(this.x0+p,this.y0+e,this.x1+p,this.y1+e,this.x+p,this.y+e)}toCubic(){return new K(this.x0,this.y0,W(this.x0,this.x1,2/3),W(this.y0,this.y1,2/3),W(this.x,this.x1,2/3),W(this.y,this.y1,2/3),this.x,this.y)}}class K{constructor(p,e,f,i,a,M,h,g){this.x0=p,this.y0=e,this.x1=f,this.y1=i,this.x2=a,this.y2=M,this.x=h,this.y=g,X(p,e,f,i,a,M,h,g),this.asString=`C ${f},${i} ${a},${M} ${h},${g}`}incomingAngle=NaN;outgoingAngle=NaN;command="C";asString;translate(p,e){return new K(this.x0+p,this.y0+e,this.x1+p,this.y1+e,this.x2+p,this.y2+e,this.x+p,this.y+e)}toCubic(){return this}}class u{get commands(){return this.#t}addCommands(p){this.#t.push(...p)}static fromStrings(p){let e=p.join(" ");const f=[];let i;for(;e=e.replace(/^ */,""),e!="";){let a=dt.exec(e);if(a){const M=I(a[1]),h=I(a[2]);if(M===void 0||h===void 0)throw console.error(a,M,h,this),new Error("wtf");i&&f.push(i),i=this.M(M,h),e=a[3];continue}if(i){if(a=ut.exec(e),a){const M=I(a[1]),h=I(a[2]),g=I(a[3]),o=I(a[4]);if(M===void 0||h===void 0||g===void 0||o===void 0)throw console.error(a,M,h,g,o,this),new Error("wtf");i=i.Q(M,h,g,o),e=a[5];continue}if(a=mt.exec(e),a){const M=I(a[1]),h=I(a[2]),g=I(a[3]),o=I(a[4]),y=I(a[5]),_=I(a[6]);if(M===void 0||h===void 0||g===void 0||o===void 0||y===void 0||_===void 0)throw console.error(a,M,h,g,o,y,_,this),new Error("wtf");i=i.C(M,h,g,o,y,_),e=a[7];continue}}throw console.error(e),new Error("wtf")}return i&&f.push(i),f}static M(p,e){const f=new u;return f.M(p,e),f}#t=[];get pathShape(){return new D(this.#t)}#e;M(p,e){return X(p,e),this.#e={x:p,y:e,outgoingAngle:NaN},this}peekPrevious(){return this.#e??this.#t.at(-1)}consumePrevious(){const p=this.peekPrevious();return this.#e=void 0,p}H(p){const e=this.consumePrevious();return this.#t.push(new J(e.x,e.y,p)),this}V(p){const e=this.consumePrevious();return this.#t.push(new tt(e.x,e.y,p)),this}L(p,e){const f=this.consumePrevious();return this.#t.push(new et(f.x,f.y,p,e)),this}Q(p,e,f,i){const a=this.consumePrevious();return this.#t.push(new st(a.x,a.y,p,e,f,i)),this}Q_HV(p,e){const f=this.peekPrevious();return this.Q(p,f.y,p,e)}Q_VH(p,e){const f=this.peekPrevious();return this.Q(f.x,e,p,e)}C(p,e,f,i,a,M){const h=this.consumePrevious();return this.#t.push(new K(h.x,h.y,p,e,f,i,a,M)),this}}const nt=" *",B="(-?[0-9]+.?[0-9]*)",O=" *[, ] *",dt=new RegExp(`^M${nt}${B}${O}${B}(.*)$`),ut=new RegExp(`^Q${nt}${B}${O}${B}${O}${B}${O}${B}(.*)$`),mt=new RegExp(`^C${nt}${B}${O}${B}${O}${B}${O}${B}${O}${B}${O}${B}(.*)$`);class D{matchForMorph(p){const e=this.commands.map(h=>h.toCubic()),f=p.commands.map(h=>h.toCubic());if(e.length!=f.length){const{shorter:h,longer:g}=e.length<f.length?{shorter:e,longer:f}:{shorter:f,longer:e};if(h.length==0)throw new Error("can't morph something into nothing");const o=g.length/h.length,y=[];h.forEach((_,c)=>{const z=Math.round((c+1)*o);for(;y.length<z;)y.push(_)}),h.length=0,h.push(...y)}if(e.length!=f.length)throw new Error("wtf");function i(h){return D.cssifyPath(h.map(g=>new D([g]).rawPath).join())}const a=i(e),M=i(f);return[a,M]}commands;get endX(){return this.commands.at(-1)?.x}get endY(){return this.commands.at(-1)?.y}get startX(){return this.commands.at(0)?.x0}get startY(){return this.commands.at(0)?.y0}static fromStrings(p){const f=u.fromStrings(p).flatMap(a=>a.commands);return new this(f)}constructor(p){this.commands=[...p]}static cssifyPath(p){return`path('${p}')`}get cssPath(){return D.cssifyPath(this.rawPath)}makeElement(){const p=document.createElementNS("http://www.w3.org/2000/svg","path"),e=this.cssPath;if(p.style.d=e,p.style.d=="")throw console.error(e,p),new Error("wtf");return p}static needAnM(p,e){return!p||p.x!=e.x0||p.y!=e.y0}get rawPath(){return this.commands.flatMap((p,e)=>{const f=[],i=this.commands[e-1];return D.needAnM(i,p)&&f.push(`M ${p.x0},${p.y0}`),f.push(p.asString),f}).join(" ")}get cssPaths(){return this.splitOnMove().map(p=>p.cssPath)}get rawPaths(){return this.splitOnMove().map(p=>p.rawPath)}splitOnMove(){const p=[];let e=[];return this.commands.forEach(f=>{D.needAnM(e.at(-1),f)&&(e=[],p.push(e)),e.push(f)}),p.map(f=>new D(f))}static join(p){return new D(p.flatMap(({Δx:e,Δy:f,shape:i})=>i.translate(e,f).commands))}convertToCubics(){return new D(this.commands.map(p=>p.toCubic()))}translate(p,e){return new D(this.commands.map(f=>f.translate(p,e)))}}class it{constructor(p,e=p/10){if(this.fontSize=p,this.strokeWidth=e,p<=0||!isFinite(p))throw new Error("wtf")}get mHeight(){return this.fontSize}get xHeight(){return this.fontSize*.5}get aWidth(){return this.fontSize*.75}get digitWidth(){return this.fontSize*.5}get defaultKerning(){return this.strokeWidth*2.5}get spaceWidth(){return this.strokeWidth+this.digitWidth/2}get top(){return this.capitalTop-this.mHeight/4}get capitalTop(){return this.baseline-this.mHeight}get capitalTopMiddle(){return(this.capitalTop+this.capitalMiddle)/2}get capitalMiddle(){return this.baseline-this.xHeight}get capitalBottomMiddle(){return(this.baseline+this.capitalMiddle)/2}get baseline(){return 0}get descender(){return this.mHeight/4}get bottom(){return this.descender+this.mHeight/4}}class at{constructor(p,e,f){this.advance=e,this.fontMetrics=f,p instanceof D?this.#t=()=>p:this.#t=p}#t;get shape(){return this.#t()}get cssPath(){return this.shape.cssPath}get d(){return this.shape.rawPath}makeElement(){return this.shape.makeElement()}makeElements(){return this.shape.splitOnMove().map(p=>({innerShape:p,element:p.makeElement()}))}}function G(x){const p=new Map;typeof x=="number"&&(x=new it(x));const e=(t,n,s)=>{const r=new at(n,s,x);if(p.has(t))throw new Error(`duplicate letter: "${t}", previous letter: "${[...p].at(-1)[0]}"`);p.set(t,r)},{aWidth:f,digitWidth:i,capitalTop:a,capitalTopMiddle:M,capitalMiddle:h,capitalBottomMiddle:g,baseline:o,descender:y,strokeWidth:_}=x,c=0;{const t=i,s=t/2,r=t;{const l=(y-o)*2,w=y,S=w-l,b=a-l/4,V=b+l;if(l<=0||w<=S||S<=V||V<=b)throw new Error("wtf");const d=i*.5;{const m=u.M(d,b).Q_HV(0,V).V(S).Q_VH(d,w).pathShape;e("(",m,d)}{const m=i*.5,Q=u.M(0,b).Q_HV(m,V).V(S).Q_VH(0,w).pathShape;e(")",Q,m)}{const m=u.M(d,b).H(0).V(w).H(d).pathShape;e("[",m,d)}{const m=u.M(0,b).H(d).V(w).H(0).pathShape;e("]",m,d)}}{const l=i*.75,w=l/2,S=u.M(w,h-w).V(h+w).M(c,h).H(l).pathShape;e("+",S,l)}{const l=i*.75,w=u.M(c,h).H(l).pathShape;e("-",w,l)}{const l=i*.75,w=u.M(c,h-_*1.25).H(l).M(c,h+_*1.25).H(l).pathShape;e("=",w,l)}{const l=i*1.25,w=o+_,S=u.M(0,w).H(l).pathShape;e("_",S,l)}{const l=i/2,w=3*l,S=l/3,b=a,V=b+l,d=V+l,m=d+l,Q=u.M(l+S,b).L(l-S,m).M(2*l+S,b).L(2*l-S,m).M(0,V).H(w).M(0,d).H(w).pathShape;e("#",Q,w)}{const l=i/2,w=3*l,S=0,b=l,V=w/2,d=2*l,m=w,Q=a+(x.mHeight-w)/2,H=Q+b,v=Q+V,L=Q+d,C=Q+m,k=u.M(d,v).Q_VH(V,H).Q_HV(b,v).Q_VH(V,L).Q_HV(d,v).Q_VH((d+m)/2,L).Q_HV(m,v).V((H+v)/2).Q_VH(V,Q).Q_HV(S,v).Q_VH(V,C).H((d+m)/2).pathShape;e("@",k,w)}{const l=u.M(s,a).Q(r,a,r,M).L(r,g).Q(r,o,s,o).Q(c,o,c,g).L(c,M).Q(c,a,s,a).M(r,M).L(c,g).pathShape;e("0",l,t)}{const l=u.M(c,M).Q(s,M,s,a).L(s,o).M(c,o).L(r,o).pathShape;e("1",l,t)}{const l=u.M(c,M).Q_VH(s,a).Q_HV(r,M).Q_VH(s,h).Q_HV(c,o).L(r,o).pathShape;e("2",l,t)}{const l=u.M(c,M).Q_VH(s,a).Q_HV(r,M).Q_VH(s,h).Q_HV(r,g).Q_VH(s,o).Q_HV(c,g).pathShape;e("3",l,t)}{const l=(s+r)/2,w=(s+c)/2,S=u.M(r,h).L(c,h).L(w,a).M(l,a).L(l,o).pathShape;e("4",S,t)}{const l=c+i/5,w=r-i/5,S=(h+g)/2,b=u.M(w,a).L(l,a).L(c,h).Q_VH(s,M).Q_HV(r,S).Q_VH(s,o).Q_HV(c,g).pathShape;e("5",b,t)}{const l=u.M(r,a).Q_HV(c,g).Q_VH(s,o).Q_HV(r,g).Q_VH(s,h).Q_HV(c,g).pathShape;e("6",l,t)}{const l=u.M(c,a).L(r,a).L(c,o).pathShape;e("7",l,t)}{const l=u.M(s,a).Q(r,a,r,M).Q(r,h,s,h).Q(c,h,c,g).Q(c,o,s,o).Q(r,o,r,g).Q(r,h,s,h).Q(c,h,c,M).Q(c,a,s,a).pathShape;e("8",l,t)}{const l=u.M(r,M).Q(r,a,s,a).Q(c,a,c,M).Q(c,h,s,h).Q(r,h,r,M).Q(r,o,c,o).pathShape;e("9",l,t)}}{const t=u.M(c,o).L(f/2,a).L(x.aWidth,o).M(x.aWidth/4,h).L(x.aWidth*.75,h).pathShape;e("A",t,f)}{const t=i,n=M-a;if(n<=0)throw new Error("wtf");const s=(t-n)*(2/3),r=o-g;if(r<=0)throw new Error("wtf");const l=t-r,w=u.M(c,a).L(c,o).L(l,o).M(Math.max(l,s),h).L(c,h).M(c,a).L(s,a).Q(s+n,a,s+n,a+n).Q(s+n,h,s,h).M(l,h).Q(l+r,h,l+r,o-r).Q(l+r,o,l,o).pathShape;e("B",w,t)}{const t=i,s=t/2,r=t,l=u.M(r,M).Q(r,a,s,a).Q(c,a,c,M).L(c,g).Q(c,o,s,o).Q(r,o,r,g).pathShape;e("C",l,t)}{const t=i,s=t/2,r=t,l=u.M(c,a).L(c,o).L(s,o).Q(r,o,r,g).L(r,M).Q(r,a,s,a).L(c,a).pathShape;e("D",l,t)}{const t=i,n=t*(2/3),s=t,r=u.M(s,a).L(c,a).L(c,o).L(s,o).M(n,h).L(c,h).pathShape;e("E",r,t)}{const t=i,n=t*(2/3),s=t,r=u.M(s,a).L(c,a).L(c,o).M(n,h).L(c,h).pathShape;e("F",r,t)}{const t=i,s=t/2,r=t,l=u.M(r,M).Q(r,a,s,a).Q(c,a,c,M).L(c,g).Q(c,o,s,o).Q(r,o,r,g).L(r,h).L(s,h).pathShape;e("G",l,t)}{const t=i,n=t,s=u.M(c,a).L(c,o).M(n,a).L(n,o).M(c,h).L(n,h).pathShape;e("H",s,t)}{const t=x.mHeight/3,n=t/2,s=t,r=u.M(c,a).L(s,a).M(c,o).L(s,o).M(n,a).L(n,o).pathShape;e("I",r,t)}{const t=i*.85,s=t/2,r=t,l=u.M(r,a).L(r,g).Q(r,o,s,o).Q(c,o,c,g).pathShape;e("J",l,t)}{const t=i+_,n=(a+o)/2,s=u.M(c,a).L(c,o).M(t,a).L(c+.5,n).L(t,o).pathShape;e("K",s,t)}{const t=i,n=u.M(c,a).L(c,o).L(t,o).pathShape;e("L",n,t)}{const t=i*1.5,n=t/2,s=u.M(c,o).L(c,a).L(n,h).L(t,a).L(t,o).pathShape;e("M",s,t)}{const t=i*1.2,n=u.M(c,o).L(c,a).L(t,o).L(t,a).pathShape;e("N",n,t)}{const t=i*1.5,n=t/2,s=(a+o)/2,r=u.M(n,a).Q_HV(t,s).Q_VH(n,o).Q_HV(c,s).Q_VH(n,a).pathShape;e("O",r,t)}{const t=i,n=h-M;if(n<=0)throw new Error("wtf");const s=t-n,r=u.M(c,a).L(c,o).M(c,a).L(s,a).Q_HV(t,M).Q_VH(s,h).L(c,h).pathShape;e("P",r,t)}{const t=i*1.5,n=t/2,s=(a+o)/2,r=u.M(n,a).Q_HV(t,s).Q_VH(n,o).Q_HV(c,s).Q_VH(n,a).M(t-n*.75,o-n*.75).L(t+n/6,o+n/6).pathShape;e("Q",r,t)}{const t=i,n=h-M;if(n<=0)throw new Error("wtf");const s=t-n,r=u.M(c,a).L(c,o).M(c,a).L(s,a).Q_HV(t,M).Q_VH(s,h).L(c,h).M(s,h).L(t,o).pathShape;e("R",r,t)}{const t=i,n=i/2,s=i,r=u.M(s,M).Q_VH(n,a).Q_HV(c,M).Q_VH(n,h).Q_HV(s,g).Q_VH(n,o).Q_HV(c,g).pathShape;e("S",r,t)}{const n=i+_,s=n/2,r=n,l=x.mHeight/8,w=u.M(r,M).Q_VH(s,a).Q_HV(c,M).Q_VH(s,h).Q_HV(r,g).Q_VH(s,o).Q_HV(c,g).M(s,a-l).V(o+l).pathShape;e("$",w,n)}{const t=i,n=t/2,s=u.M(n,a).L(n,o).M(t,a).L(c,a).pathShape;e("T",s,t)}{const t=(g+h)/2,n=Math.abs(t-o)*.85,s=n*2,r=u.M(c,a).V(t).Q_VH(n,o).Q_HV(s,t).V(a).pathShape;e("U",r,s)}{const t=f,n=t/2,s=u.M(c,a).L(n,o).L(t,a).pathShape;e("V",s,t)}{const t=f*1.5,n=t/3,s=t/2,r=n*2,l=u.M(c,a).L(n,o).L(s,h).L(r,o).L(t,a).pathShape;e("W",l,t)}{const t=i,n=u.M(t,a).L(c,o).M(c,a).L(t,o).pathShape;e("X",n,t)}{const t=_,n=i+t,s=u.M(n,a).L(t,o).M(c,a).L(n/2,h).pathShape;e("Y",s,n)}{const t=i,n=u.M(c,a).H(t).L(c,o).H(t).pathShape;e("Z",n,t)}{const t=i/4,n=i*1.2,s=u.M(t*2,a+t).Q_VH(t,a).Q_HV(0,a+t).Q_VH(t,a+t*2).Q_HV(t*2,a+t),l=s.pathShape.translate(n-t*2,x.mHeight-t*2);s.addCommands(l.commands),s.M(n,a).L(c,o);const w=s.pathShape;e("%",w,n)}{const t=i,n=u.M(t,a).L(c,o).pathShape;e("/",n,t)}{const t=i,n=u.M(c,a).L(t,o).pathShape;e("\\",n,t)}{const t=i,n=_/2,s=t+n,r=t/2,l=u.M(r,h).Q_HV(c,g).Q_VH(r,o).Q_HV(t,g).Q_VH(r,h).M(s,h).L(s,o).pathShape;e("a",l,s)}{const t=i,n=_/2,s=t+n,r=n,l=n+t/2,w=s,S=u.M(c,a).V(o).M(r,g).Q_VH(l,o).Q_HV(w,g).Q_VH(l,h).Q_HV(r,g).pathShape;e("b",S,s)}{const t=i*.875,n=0,s=i/2,r=t,l=(h+g)/2,w=(g+o)/2,S=u.M(r,l).Q_VH(s,h).Q_HV(n,g).Q_VH(s,o).Q_HV(r,w).pathShape;e("c",S,t)}{const t=i,n=_/2,s=t+n,r=t/2,l=u.M(r,h).Q_HV(c,g).Q_VH(r,o).Q_HV(t,g).Q_VH(r,h).M(s,a).L(s,o).pathShape;e("d",l,s)}const z=i/8;{const t=i,n=i/2,s=t,r=s-z,l=u.M(c,g).H(s).Q_VH(n,h).Q_HV(c,g).Q_VH(n,o).H(r).pathShape;e("e",l,t)}{const t=i*.75,n=t/2,s=t,r=u.M(s,a).Q_HV(n,M).V(o).M(s,h).H(c).pathShape;e("f",r,t)}{const t=i,n=_/2,s=t+n,r=t/2,l=u.M(r,h).Q_HV(c,g).Q_VH(r,o).Q_HV(t,g).Q_VH(r,h).M(s,h).V(o).Q_VH(r,y).H(c+z).pathShape;e("g",l,s)}{const t=i*.85,n=t/2,s=u.M(c,a).V(o).Q_VH(n,h).Q_HV(t,g).V(o).pathShape;e("h",s,t)}const N=_/4;{const n=u.M(c,h).V(o).M(c,M).V(M-N).pathShape;e("i",n,0)}{const t=Math.abs(o-y),n=t/2,s=u.M(t,h).V(o).Q_VH(n,y).Q_HV(c,o).M(t,M).V(M-N).pathShape;e("j",s,t)}{const n=u.M(c,o).V(o-N).pathShape;e(".",n,0)}{const n=u.M(c,a).V(g).M(c,o).V(o-N).pathShape;e("!",n,0)}{const n=(y-o)/2,s=n/2,r=u.M(c,o-N).V(o).Q_VH(-s,o+n).pathShape;e(",",r,0)}{const n=h,s=u.M(c,o).V(o-N).M(c,n-N).V(n).pathShape;e(":",s,0)}{const n=h,s=(y-o)/2,r=s/2,l=u.M(c,o-N).V(o).Q_VH(-r,o+s).M(c,n-N).V(n).pathShape;e(";",l,0)}{const t=x.xHeight*2/3,n=i/10,s=t+n,r=u.M(c,a).V(o).M(t,h).L(c,h+t).M(t/2,o-t).L(s,o).pathShape;e("k",r,s)}{const n=u.M(c,a).V(o).pathShape;e("l",n,0)}{const t=i*1.5,n=t/4,s=t/2,r=t*3/4,l=t,w=u.M(c,h).V(o).Q_VH(n,h).Q_HV(s,g).V(o).M(s,g).Q_VH(r,h).Q_HV(l,g).V(o).pathShape;e("m",w,t)}{const t=i*.85,n=t/2,s=u.M(c,h).V(o).Q_VH(n,h).Q_HV(t,g).V(o).pathShape;e("n",s,t)}{const t=i,n=0,s=t/2,r=t,l=u.M(s,h).Q_HV(r,g).Q_VH(s,o).Q_HV(n,g).Q_VH(s,h).pathShape;e("o",l,t)}{const t=i,n=_/2,s=t+n,r=n,l=n+t/2,w=s,S=u.M(c,h).V(y).M(r,g).Q_VH(l,h).Q_HV(w,g).Q_VH(l,o).Q_HV(r,g).pathShape;e("p",S,s)}{const t=i,n=t/2,s=t+_/2,r=Math.abs(o-y),l=s+r/2,w=s+r,S=u.M(n,h).Q_HV(c,g).Q_VH(n,o).Q_HV(t,g).Q_VH(n,h).M(s,h).V(o).Q_VH(l,y).Q_HV(w,o).pathShape;e("q",S,w)}{const t=i,n=t/2,s=u.M(c,h).V(o).Q_VH(n,h).Q_HV(t,g).pathShape;e("r",s,t)}{const t=x.xHeight*2/3,n=t/2,s=o,r=g,l=h,w=(s+r)/2,S=(r+l)/2,b=(S+l)/2,V=(s+w)/2,d=u.M(t,b).Q_VH(n,l).Q_HV(c,S).Q_VH(n,r).Q_HV(t,w).Q_VH(n,s).Q_HV(c,V).pathShape;e("s",d,t)}{const t=i*.75,n=t/2,s=t,r=u.M(n,M).V(g).Q_VH(s,o).M(s,h).H(c).pathShape;e("t",r,t)}{const t=i*.85,n=t/2,s=u.M(c,h).V(g).Q_VH(n,o).Q_HV(t,h).L(t,o).pathShape;e("u",s,t)}{const t=i,n=t/2,s=u.M(c,h).L(n,o).L(t,h).pathShape;e("v",s,t)}{const t=x.xHeight*1.5,n=t/3,s=t/2,r=n*2,l=u.M(c,h).L(n,o).L(s,g).L(r,o).L(t,h).pathShape;e("w",l,t)}{const t=i,n=u.M(t,h).L(c,o).M(c,h).L(t,o).pathShape;e("x",n,t)}{const t=i,n=t/2,s=(h+y)/2,r=u.M(t,h).L(c,y).M(c,h).L(n,s).pathShape;e("y",r,t)}{const t=i,n=u.M(c,h).H(t).L(c,o).H(t).pathShape;e("z",n,t)}return new Map([...p.entries()].sort(([t],[n])=>t<n?-1:t==n?1:0))}const Y=rt("main",SVGSVGElement);function gt(x){const p=new Map;return x.forEach((e,f)=>{const{advance:i,fontMetrics:a}=e,M=e.shape.convertToCubics(),h=new at(M,i,a);p.set(f,h)}),p}function ft(x,p=x*.75){const e=G(x);return G(p).forEach((i,a)=>{const M=a.toLowerCase();M!=a&&e.set(M,i)}),e}function Z(x,p){const e={roughness:.5,bowing:3,disableMultiStroke:!0,preserveVertices:!0},f=lt.generator({options:{...e,...p}}),i=new Map;return x.forEach((a,M)=>{const h=()=>{const o=f.path(a.d),_=f.toPaths(o).map(c=>c.d);return D.fromStrings(_)},g=new at(h,a.advance,a.fontMetrics);i.set(M,g)}),i}{let x=function(V){return V.length==1},p=function(V){let m=1/0,Q=-1/0;V.forEach(C=>{const{description:k,baseline:E}=C,{fontMetrics:T}=k;m=Math.min(m,T.top+E),Q=Math.max(Q,T.bottom+E)});const H=m-1,v=Q+1,L=document.createElementNS("http://www.w3.org/2000/svg","rect");return L.x.baseVal.value=0,L.y.baseVal.value=H,L.width.baseVal.value=100,L.height.baseVal.value=v-H,Y.insertBefore(L,V[0].element),L};class e{leftMargin=0;rightMargin=95;x=this.leftMargin;baseline=0;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(d=1){this.baseline+=this.lineHeight*d}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=G(5);getDescription(d){return this.font.get(d)}static join(d){return new D(d.flatMap(m=>m.description.shape.translate(m.x,m.baseline).commands))}displayText(d){return d.map(m=>{const Q=m.description.shape,H=Q.makeElement();return Y.appendChild(H),H.style.transform=`translate(${this.x}px,${this.baseline}px)`,{...m,shape:Q,element:H}})}static WORD_BREAK=/^(\n+| +|[^ \n]+)(.*)/ms;addText(d){const m=new Set,Q=[];for(;;){const H=e.WORD_BREAK.exec(d);if(!H)break;const v=H[1];if(d=H[2],v[0]==`
`)this.carriageReturn(),this.lineFeed(v.length*4/3);else if(v[0]==" ")this.addSpace(v.length);else{let L=0;const C=0,k=[...v].flatMap(E=>{const T=this.getDescription(E);if(T){const $=T.advance+T.fontMetrics.defaultKerning,F={x:L,width:$,baseline:C,description:T,char:E};return L+=$,F}else return m.add(E),[]});this.x+L>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),k.forEach(E=>{E.x+=this.x,E.baseline=this.baseline,Q.push(E)}),this.x+=L}}return m.size>0&&console.warn(m),Q}addSpace(d=1){this.x+=this.font.get("0").fontMetrics.spaceWidth*d}}class f{leftMargin=5;rightMargin=95;x=this.leftMargin;baseline=10;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(d=1){this.baseline+=this.lineHeight*d}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=G(5);getDescription(d){return this.font.get(d)}makeRoom(d){this.x+d.advance>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed())}advance(d){this.x+=d.advance+d.fontMetrics.defaultKerning}moveToCursor(d){d.style.transform=`translate(${this.x}px,${this.baseline}px)`}showAndAdvance(d,m){return this.x+m>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),Y.appendChild(d),d.style.transform=`translate(${this.x}px,${this.baseline}px)`,this.x+=m,this}show1(d){this.makeRoom(d);const m=d.makeElement();Y.appendChild(m);const{x:Q,baseline:H}=this;return this.moveToCursor(m),this.advance(d),{element:m,x:Q,baseline:H}}splitAndShow1(d){this.makeRoom(d);const m=d.makeElements();return m.forEach(({element:Q})=>{Y.appendChild(Q),this.moveToCursor(Q)}),this.advance(d),m}show(d){const m=new Set,Q=[...d].flatMap(H=>{const v=this.getDescription(H);return v?{...this.show1(v),description:v,char:H}:H==" "?(this.showSpace(),[]):(m.add(H),[])});return m.size>0&&console.warn(m),Q}splitAndShow(d){const m=new Set,Q=[...d].flatMap(H=>{const v=this.getDescription(H);return v?this.splitAndShow1(v):H==" "?(this.showSpace(),[]):(m.add(H),[])});return m.size>0&&console.warn(m),Q}showSpace(d=1){return this.x+=this.font.get("0").fontMetrics.spaceWidth*d,this}}const i=new f;let a="";i.font.forEach((V,d)=>{x(d)&&(a+=d)}),i.show(a),i.CRLF();{const V=i.show(a);V.forEach(({element:d})=>{d.classList.add("lights")}),p(V).style.fill="black"}i.CRLF();const M=i.splitAndShow(a),h=V=>{if(V==0)return 0;const d=M[V].innerShape,m=M[V-1].innerShape,Q=Math.hypot(m.endX-d.startX,m.endY-d.startY);return X(Q),Q},{totalLength:g,maxLength:o}=M.reduce(({totalLength:V,maxLength:d},{element:m},Q)=>{const H=m.getTotalLength();return X(H),V+=h(Q)+H,d=Math.max(d,H),{totalLength:V,maxLength:d}},{totalLength:0,maxLength:0}),y=Math.ceil(o)+1,_=`0 ${y} ${y} 0`;async function c(){for(;;){let m=0,Q;M.forEach(({element:H},v)=>{const L=H.getTotalLength();m+=h(v);const C=1e3+m/g*3e4;m+=L;const k=L/g*3e4;Q=H.animate([{strokeDasharray:_,strokeDashoffset:1e-5},{strokeDasharray:_,strokeDashoffset:-L}],{delay:C,duration:k,fill:"backwards"})}),await Q.finished,await ct(3e3)}}c(),i.CRLF(),i.font=ft(5,3),i.show("Small  Caps"),i.lineHeight*=1.125;const z=G(new it(6,.5)),N=gt(z),t=[{roughness:.4,title:"Heartbeat"},{roughness:.44,title:"Toggle (snap)"},{roughness:.5,title:"Skywriting"},{roughness:.54,title:"Do the Wave"},{roughness:.59,title:"Wavy Lights."},{roughness:.64,title:"Blustery day.i"}].map(V=>{const{roughness:d,title:m}=V;return i.font=Z(N,{roughness:d}),i.CRLF(),i.show(`${Math.round(d*100)} ${m??"Rough Font"} [4XxYyZ]`)}),n=t[0],s=t[1],r=t[2],l=t[3],w=t[4],S=t[5],b=Z(N,{roughness:0});p(w).style.fill="black",w.forEach(({element:V})=>{V.classList.add("lights")}),[w,S].forEach(V=>{V.forEach(d=>{function m(){return Math.random()+.5|0}const Q=3+m()+m()+m(),H=ot(Q,()=>({d:d.description.cssPath}));H.push(H[0]);const v=Q*1e4/3,L=v/8,C=Math.exp(W(Math.log(L),Math.log(v),Math.random()));d.element.animate(H,{duration:C,iterations:1/0})})}),s.forEach(V=>{const d=b.get(V.char).cssPath,m=V.element.style.d,Q=.03,H=[{offset:0,d:m},{offset:Q,d},{offset:.5,d},{offset:Q+.5,d:m},{offset:1,d:m}];V.element.animate(H,{duration:2e3,iterations:1/0})});{const H=l.length,v=H*3,L=5e3;l.forEach((C,k)=>{const E=b.get(C.char).cssPath,T=C.element.style.d,$=C.element.style.transform,F=$+" scale(1.32)",A={d:E,transform:$},R={d:T,transform:F},P=[{offset:0,...A},{offset:4/v,...R},{offset:6/v,...R},{offset:14/v,...A},{offset:1,...A}];C.element.animate(P,{duration:L,iterationStart:1-k/H,iterations:1/0})})}{const V=r;p(V).style.fill="hwb(190 10% 0% / 1)",V.forEach(d=>{const m=b.get(d.char).cssPath,Q=d.element.style.d,H=1/16,v=15/16,L=14e3,C=[{offset:0,strokeWidth:.5},{offset:H,strokeWidth:.5},{offset:v,strokeWidth:2.25},{offset:1,strokeWidth:2.25}],k=[{offset:0,d:m},{offset:H,d:m,easing:"cubic-bezier(0.275, 0.760, 0.495, 1.005)"},{offset:v,d:Q},{offset:1,d:Q}],E=[{offset:0,opacity:1},{offset:H,opacity:1,easing:"cubic-bezier(0.280, 0.650, 0.630, 1.000)"},{offset:v,opacity:0},{offset:1,opacity:0}];d.element.animate(E,{duration:L,iterations:1/0}),d.element.animate(k,{duration:L,iterations:1/0}),d.element.animate(C,{duration:L,iterations:1/0}),d.element.style.stroke="white"})}n.forEach(V=>{const d=b.get(V.char).cssPath,m=V.element.style.d,Q=750,H="cubic-bezier(.55,0,1,.55)";V.element.animate([{offset:0,d,easing:H},{offset:.5,d:m,easing:H},{offset:1,d}],{duration:Q,iterations:1/0})});{i.CRLF();const V=.25,d=1.5,m="The more I drink the more I want to tell you what I really think about you.",Q=pt(0,V,m.length-1,d),H=[...m].flatMap(($,F)=>(i.font=Z(N,{roughness:Q(F)}),i.splitAndShow($))),v=$=>{if($==0)return 0;const F=H[$].innerShape,A=H[$-1].innerShape,R=Math.hypot(A.endX-F.startX,A.endY-F.startY);return X(R),R},{totalLength:L,maxLength:C}=H.reduce(({totalLength:$,maxLength:F},{element:A},R)=>{const P=A.getTotalLength();return $+=v(R)+P,F=Math.max(F,P),{totalLength:$,maxLength:F}},{totalLength:0,maxLength:0}),k=Math.ceil(C)+1,E=`0 ${k} ${k} 0`;async function T(){for(;;){let A=0,R;H.forEach(({element:P},U)=>{const j=P.getTotalLength();A+=v(U);const q=1e3+A/L*3e4;A+=j;const ht=j/L*3e4;R=P.animate([{strokeDasharray:E,strokeDashoffset:1e-5},{strokeDasharray:E,strokeDashoffset:-j}],{delay:q,duration:ht,fill:"backwards"})}),await R.finished,await ct(3e3)}}T()}{let V=function(R){const P=new e;P.font=z;const U=P.addText(R),j=e.join(U),q=P.x;return{shape:j,advance:q}};i.font=z,i.CRLF();const d=V("Stop"),m=V("Go");i.CRLF();const Q=d.shape.makeElement();i.showAndAdvance(Q,d.advance),i.showSpace();const H=m.shape.makeElement();i.showAndAdvance(H,m.advance);const v=m.shape.matchForMorph(d.shape);console.log({goShapeInfo:m,stopShapeInfo:d,morphable:v});const L=v[0],C=v[1],k=d.shape.makeElement();i.showSpace(),i.showAndAdvance(k,d.advance),i.showAndAdvance(k,d.advance),k.animate([{d:L},{d:L,easing:"ease"},{d:C},{d:C,easing:"ease"},{d:L}],{duration:5e3,iterations:1/0});const E=R=>V([...R].join(`
`)).shape,T=E("123"),$=E("ABC"),[F,A]=T.matchForMorph($);i.CRLF(),ot(7,R=>{const P=T.makeElement();i.showAndAdvance(P,10*(6/7)*.86),P.animate([{d:F},{d:A}],{duration:Number.MAX_SAFE_INTEGER,iterations:1,iterationStart:R/6*.999})}),i.lineFeed(2)}i.x>i.rightMargin&&i.CRLF(),Y.viewBox.baseVal.height=i.baseline+i.font.get("0").fontMetrics.bottom}
