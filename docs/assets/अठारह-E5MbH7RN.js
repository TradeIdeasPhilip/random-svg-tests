import"./modulepreload-polyfill-B5Qt9EMX.js";import{g,A as G}from"./client-misc-1LRynplM.js";import{b as I,s as T}from"./utility-DC2vzgXJ.js";import{m as o}from"./misc-CLGTS8fC.js";function v(e,t,s,c,n){const a=Math.atan2(n-s,c-t),r=o.polarToRectangular(20,a);e.x1.baseVal.value=t+r.x,e.y1.baseVal.value=s+r.y,e.x2.baseVal.value=t-r.x,e.y2.baseVal.value=s-r.y}function V(...e){e.forEach(t=>{t.style.display=""})}function B(...e){e.forEach(t=>{t.style.display="none"})}function R(){return[[29,41],[3,5],[37,7],[11,13],[31,17],[19,23],[103,43],[307,71]].map(([s,c])=>{function n(a,r){function h(u){const m=a*o.FULL_CIRCLE/u;return Math.sin(m)*r}return{Δx:h(s),Δy:h(c)}}return n})}const k=R();class p{#l=g("scale",SVGGElement);#h=g("function",SVGPathElement);#r=I("#singleEstimate",SVGLineElement);#t=T("#estimateLines line",SVGLineElement);#i;#e;addBorders(){T("svg#main text",SVGTextElement).forEach(s=>{const c=o.assertClass(s.cloneNode(!0),SVGTextElement);c.classList.add("scale-background"),s.parentElement.insertBefore(c,s)})}constructor(){[this.#i,this.#e]=T("circle.measurement-fill",SVGCircleElement,2,2);const s=.13333333*2,c=s/this.#t.length,n=c*1.15,a=s-n;if(a<0)throw new Error("wtf");const r=`${n} ${a}`;this.#t.forEach((h,u)=>{h.style.strokeDasharray=r,h.style.strokeDashoffset=(c*u).toString()}),this.addBorders(),this.update()}static instance=new p;#s=1;#o=2;get dx(){return this.#o}#a=0;set timeInSeconds(t){this.#a=t,this.update()}get timeInSeconds(){return this.#a}update(){const t=0+this.#o,c=-this.f(t),n=this.#s,a=t*n,r=c*n;this.#e.cx.baseVal.value=a,this.#e.cy.baseVal.value=r;let h,u;this.blurry?(B(this.#r),V(...this.#t),this.#t.forEach((m,d)=>{const E=.00333333325*this.zoom,b=k[d*2](this.timeInSeconds,E),L=k[d*2+1](this.timeInSeconds,E);v(m,b.Δx,b.Δy,a+L.Δx,r+L.Δy)}),h=p.initialBlurRadius*Math.sqrt(n),u="url(#measurementBlur)"):(B(...this.#t),V(this.#r),v(this.#r,0,0,a,r),h=.06666666,u="var(--measurement-color)"),[this.#i,this.#e].forEach(m=>{m.r.baseVal.value=h,m.style.fill=u})}#c=!1;get blurry(){return this.#c}set blurry(t){this.#c=t,this.update()}set dx(t){this.#o=t,this.update()}updatePath(){const t=this.#s,s=`path('M ${-3*t} ${-9*t} Q ${0*t} ${9*t} ${3*t} ${-9*t}')`;this.#h.style.d=s}get zoom(){return this.#s}set zoom(t){this.#s=t,this.update(),this.updatePath(),this.#l.style.transform=`scale(${t})`}f(t){return t*t}#n;get automaticTime(){return!!this.#n}set automaticTime(t){this.#n?.cancel(),this.#n=void 0,t&&(this.#n=new G(s=>{this.blurry&&(this.timeInSeconds=s/1e3)}))}static initialBlurRadius=1/8}const x=p.instance,S=window;S.GUI=p.instance;function M(e){if(e.length==0)return()=>{throw new Error("empty")};const t=e[0].x,s=[];return e.forEach((n,a)=>{const r=e[a+1];if(r!==void 0){if(n.x>r.x)throw new Error("x’s are out of order.");if(n.x<r.x){const h=n.x,u=n.y,m=r.x,d=r.y,E=u==d?()=>u:o.makeLinear(h,u,m,d);s.push({f:E,x2:m})}}}),n=>{if(n<t)throw new Error("x is too small");for(let a=0;a<s.length;a++){const r=s[a];if(n<=r.x2)return r.f(n)}throw new Error("x is too big")}}const w=22.5,y=22.5-w,i=33.5-w,l=54.5-w,f=82-w,q=M([{x:y,y:2},{x:o.lerp(y,i,.15),y:Math.sqrt(3)},{x:o.lerp(y,i,.3),y:Math.sqrt(2)},{x:o.lerp(y,i,.45),y:1},{x:o.lerp(y,i,.95),y:.005},{x:i,y:.005},{x:i,y:2},{x:o.lerp(i,l,.15),y:Math.sqrt(3)},{x:o.lerp(i,l,.3),y:Math.sqrt(2)},{x:o.lerp(i,l,.45),y:1},{x:o.lerp(i,l,.95),y:.1},{x:l,y:.1},{x:o.lerp(l,f,.25),y:.1},{x:o.lerp(l,f,.5),y:.05},{x:o.lerp(l,f,.75),y:.005},{x:f,y:.005}]),P=M([{x:y,y:1},{x:o.lerp(y,i,.55),y:1},{x:o.lerp(y,i,.85),y:6},{x:i,y:6},{x:i,y:1},{x:o.lerp(i,l,.55),y:1},{x:o.lerp(i,l,.85),y:6},{x:l,y:6},{x:o.lerp(l,f,.3),y:32},{x:f,y:32}]);function z(e){x.timeInSeconds=e-i,x.blurry=e>=i,x.dx=q(e),x.zoom=P(e)}let C;function A(){C?.cancel()}function $(){x.automaticTime=!1,A();let e;const t=new G(s=>{e??=s;const n=(s-e)/1e3;n>f?t.cancel():z(n)});C=t}g("start",HTMLButtonElement).addEventListener("click",$);g("stop",HTMLButtonElement).addEventListener("click",A);S.startRealtimeAnimation=$;function _(e){return document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(t=>{if(!(t instanceof SVGElement||t instanceof HTMLElement))throw new Error("wtf");t.style.display="none"}),x.automaticTime=!1,{source:"parabola-tangent-line.ts",script:e,seconds:f-y}}S.initScreenCapture=_;S.showFrame=z;
