import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as v,Q as d,b as _}from"./path-shape-T33T0rPM.js";import{g as T,i as D,a as N}from"./client-misc-DWuUZUgy.js";import{c as P,r as O,e as F,a as X}from"./utility-BHSQpXni.js";import{c as H}from"./path-debugger-widget-ByBcRFrX.js";const r=T("pathInputElement",HTMLInputElement),b=T("displaySinglePath",HTMLButtonElement),k=T("singlePathErrorMessage",HTMLSpanElement),E=H();E.insertBefore("insertPathDebuggerHere");const i=H();i.insertBefore("insertProcessingPathDebuggerHere");{let a=function(){const o=E.pathShape;if(!o)i.pathShape=void 0;else{const n=E.selectedIndex,g=N(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value,c=o.commands;switch(g){case"select":{i.pathShape=o,i.selectedIndex=n;break}case"mergeWithNext":{if(n<0||n>=c.length-1)i.pathShape=void 0;else{const t=c[n],p=c[n+1];if(!(t instanceof d&&p instanceof d))throw new Error("wtf");const e=d.angles(t.x0,t.y0,t.requestedIncomingAngle,p.x,p.y,p.requestedOutgoingAngle);i.pathShape=new v(c.toSpliced(n,2,e)),i.selectedIndex=n}break}case"deleteThenMerge":{if(n<1||n>=c.length-1)i.pathShape=void 0;else{const t=c[n-1],p=c[n],e=c[n+1];if(!(t instanceof d&&p instanceof d&&e instanceof d))throw new Error("wtf");const u=(t.x+e.x0)/2,h=(t.y+e.y0)/2,m=t.requestedOutgoingAngle,L=e.requestedIncomingAngle,s=m+P(m,L)/2,x=d.angles(t.x0,t.y0,t.requestedIncomingAngle,u,h,s),y=d.angles(u,h,s,e.x,e.y,e.requestedOutgoingAngle),f=c.toSpliced(n-1,3,x,y);i.pathShape=new v(f),i.selectedIndex=n-1}break}default:throw new Error("wtf")}}};E.listeners.push(a),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(o=>o.addEventListener("click",a))}b.addEventListener("click",()=>{E.pathShape=void 0;const a=r.value,o=v.fromString(a);E.pathShape=o,r.selectionStart=0,r.selectionEnd=Number.MAX_SAFE_INTEGER,r.focus()});r.addEventListener("keyup",a=>{a.code=="Enter"&&(b.click(),a.preventDefault())});{let a=()=>{};const o=()=>{const n=r.value;if(n.trim()==="")r.style.backgroundColor="",b.disabled=!0,k.innerText="";else try{v.fromString(n),b.disabled=!1,k.innerText=""}catch(g){if(!(g instanceof _))throw g;b.disabled=!0,k.innerText=g.message,a=()=>{r.focus(),r.setSelectionRange(n.length-g.where.length,n.length)}}};r.addEventListener("input",o),r.value='{"commands":[{"command":"Q","x0":3.3402364362167827,"y0":-3.3007448073623697,"x1":3.9340253985180738,"y1":-4.407606648762401,"x":3.011655728124868,"y":-4.539237903380115,"creationInfo":{"source":"angles","success":true,"angle":-2.9998399305675316,"angle0":-1.0784066014045661}},{"command":"Q","x0":3.011655728124868,"y0":-4.539237903380115,"x1":1.574687929408164,"y1":-4.744307389359313,"x":1.472816111697163,"y":-3.4705009993745333,"creationInfo":{"source":"angles","success":true,"angle":1.6506008096939941,"angle0":-2.9998399305675316}},{"command":"Q","x0":1.472816111697163,"y0":-3.4705009993745333,"x1":2.425601605422024,"y1":-3.103608911097618,"x":3.378387099146885,"y":-2.7367168228207026,"creationInfo":{"source":"angles","success":false,"angle":1.3560482815273174,"angle0":1.6506008096939941}},{"command":"Q","x0":3.378387099146885,"y0":-2.7367168228207026,"x1":3.3100861700748974,"y1":-2.9792037225344936,"x":3.2417852410029093,"y":-3.2216906222482846,"creationInfo":{"source":"angles","success":false,"angle":-1.3703249858538125,"angle0":1.3560482815273174}},{"command":"Q","x0":3.2417852410029093,"y0":-3.2216906222482846,"x1":3.71956498838227,"y1":-3.1350455976774514,"x":4.1973447357616305,"y":-3.048400573106618,"creationInfo":{"source":"angles","success":false,"angle":-0.1010220204226494,"angle0":-0.1456045239311423}},{"command":"Q","x0":4.1973447357616305,"y0":-3.048400573106618,"x1":5.4196689403631035,"y1":-3.172304017662219,"x":5.061868062841531,"y":-4.160669146632123,"creationInfo":{"source":"angles","success":true,"angle":-1.918132677407088,"angle0":-0.1010220204226494}},{"command":"Q","x0":5.061868062841531,"y0":-4.160669146632123,"x1":5.268526125402326,"y1":-4.012893855293418,"x":5.475184187963122,"y":-3.8651185639547148,"creationInfo":{"source":"angles","success":false,"angle":-0.37440229149874305,"angle0":-1.918132677407088}},{"command":"Q","x0":5.475184187963122,"y0":-3.8651185639547148,"x1":16.480296958276732,"y1":-8.189428173637983,"x":2.683828194676533,"y":-6.181870056091758,"creationInfo":{"source":"angles","success":true,"angle":2.997094360451321,"angle0":-0.37440229149874305}},{"command":"Q","x0":2.683828194676533,"y0":-6.181870056091758,"x1":0.1382015495290775,"y1":-5.81144965915722,"x":0.0608453441230225,"y":-3.4844558053025536,"creationInfo":{"source":"angles","success":true,"angle":1.6040270673159511,"angle0":2.997094360451321}},{"command":"Q","x0":0.0608453441230225,"y0":-3.4844558053025536,"x1":-0.040183084485440876,"y1":-0.4453650018892805,"x":2.6303996577439386,"y":-0.5926166531791432,"creationInfo":{"source":"angles","success":true,"angle":-0.055082620605849786,"angle0":1.6040270673159511}},{"command":"Q","x0":2.6303996577439386,"y0":-0.5926166531791432,"x1":3.7388797143957104,"y1":-0.6537364665377791,"x":4.4264871867272255,"y":-0.9672211302345681,"creationInfo":{"source":"angles","success":true,"angle":-0.42775484124811636,"angle0":-0.055082620605849786}}]}',o(),k.parentElement.addEventListener("click",()=>a())}{let a=function(e,u){const h=document.createElement("th");e.appendChild(h),u!==void 0&&h.append((u*F).toFixed(1)+"Â° "+u.toFixed(3))};const o=T("byAngle",HTMLTableElement),n=0,g=5,c=D(g,e=>n+Math.PI*2*e/g),t=3,p=D(t,e=>n+Math.PI*2*e/t);{const e=o.insertRow();a(e),c.forEach(u=>{a(e,u)})}p.forEach((e,u)=>{const h=o.insertRow();a(h,e),c.forEach((m,L)=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("angles");const x=0,y=1,f=0,C=1;s.viewBox.baseVal.x=x,s.viewBox.baseVal.y=f,s.viewBox.baseVal.width=y-x,s.viewBox.baseVal.height=C-f,h.insertCell().appendChild(s);function Q(w,I){const S=document.createElementNS("http://www.w3.org/2000/svg","line"),V=.2,[A,B,R]=I?[x,f,w+Math.PI]:[y,C,w],q=X(V,R);S.x1.baseVal.value=A,S.x2.baseVal.value=A+q.x,S.y1.baseVal.value=B,S.y2.baseVal.value=B+q.y,s.appendChild(S)}Q(m,!0),Q(e,!1);const M=document.createElementNS("http://www.w3.org/2000/svg","path"),l=d.angles(x,f,m,y,C,e);if(l.creationInfo.success){const w=new v([l]).rawPath;M.setAttribute("d",w),s.appendChild(M);const I=Math.abs(P(m,l.incomingAngle))+Math.abs(P(e,l.outgoingAngle));I>O?(console.error({error:I,degrees:I*F,path:M,inExpected:m,inFound:l.incomingAngle,outExpected:e,outFound:l.outgoingAngle,qCommand:l}),s.style.backgroundColor="lightpink"):s.style.backgroundColor="rgb(26, 217, 255)"}else s.style.backgroundColor="hsl(190 100% 85% / 1)";s.addEventListener("click",()=>{console.log({inExpected:m,inFound:l?.incomingAngle,outExpected:e,outFound:l?.outgoingAngle,qCommand:l});debugger;const w=d.angles(x,f,m,y,C,e);console.log(w)})})})}b.click();
