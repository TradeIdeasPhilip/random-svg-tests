import"./modulepreload-polyfill-B5Qt9EMX.js";import{c}from"./client-misc-B8CxQsfg.js";import{m as A,b as f}from"./utility-DH3fWvUB.js";import{m as d}from"./misc-BHUyxQfl.js";import{P as M}from"./path-shape-CZZKMsju.js";import{T as H}from"./letters-more-DS-WHSP9.js";import{m as C}from"./rough-lib-D9lzy4DB.js";import{H as F}from"./handwriting-effect-2FjZRqWW.js";import"./letters-base-Diwx_0WQ.js";import"./math-to-path-DHD-XsCZ.js";const V=c.getById("tau",SVGPathElement),w=V.getTotalLength(),v=(()=>{const e=c.getById("main-handwriting",SVGUseElement);e.style.strokeDasharray=`0, ${w+1}, ${w+1},0`;const t=d.makeLinear(0,0,1,-w);function n(o){f(o),e.style.display="",e.style.strokeDashoffset=t(o).toFixed(6)}function s(){e.style.display="none"}return{show:n,hide:s}})(),g=c.getById("dance",SVGGElement),u=4,b=c.selectorQueryAll("#dance line",SVGLineElement,u,u),k=c.selectorQueryAll("#dance circle",SVGCircleElement,u,u),y=c.selectorQueryAll("#dance .main-path",SVGPathElement,1,1)[0],I=(()=>{const e=M.fromString(V.getAttribute("d")),n=["[865414075,46,1165012143,288037704]","[888652358,42,1959707975,1083510000]","[888761724,43,1169051802,-2117776296]"].map(a=>{const l=d.Random.create(a),h=C(e,25,l);if(h.after.commands.length!=e.commands.length)throw new Error("wtf");return h}),s=n[0].before.cssPath,o=n.map(a=>a.after.cssPath),i=y.animate([{offset:0,d:s},{offset:.1,d:s},{offset:.2,d:o[0]},{offset:.4,d:o[0]},{offset:.5,d:s},{offset:.7,d:o[1]},{offset:.9,d:o[2]},{offset:1,d:s}],{duration:1,fill:"both"});return i.pause(),i})(),x=(()=>{function e(n){f(n),g.style.display="",b.forEach(o=>o.style.display="none"),I.currentTime=0,d.initializedArray(u,o=>{const i=d.positiveModulo(n*(o+1)/u,1);return y.getPointAtLength(y.getTotalLength()*i)}).forEach((o,i)=>{const a=k[i];a.cx.baseVal.value=o.x,a.cy.baseVal.value=o.y})}function t(){g.style.display=""}return{show:e,hide:t}})(),T=(()=>{function e(n,s){function o(i){f(i),g.style.display="",b.forEach(r=>r.style.display="");const a=d.initializedArray(u,r=>{const l=d.positiveModulo(i+r/u,1);return y.getPointAtLength(y.getTotalLength()*l)});a.forEach((r,l)=>{const h=b[l],m=k[l];h.x1.baseVal.value=m.cx.baseVal.value=r.x,h.y1.baseVal.value=m.cy.baseVal.value=r.y;const p=a[l+1]??a[0];h.x2.baseVal.value=p.x,h.y2.baseVal.value=p.y})}I.currentTime=n,o(n*s%1)}function t(){g.style.display="none"}return{show:e,hide:t}})(),G=3,R=A(1,1,G);function D(e){f(e),v.hide(),x.hide(),T.hide();const t=R(e);switch(t.index){case 0:{v.show(t.t);break}case 1:{x.show(t.t);break}case 2:{T.show(t.t,G);break}default:throw new Error("wtf")}}const E=c.getById("conversation-handwriting",SVGGElement),P=c.getById("thumbnail-text",SVGGElement),z=(()=>{const e=E,t=new F(e),n=new H(40);n.rightMargin=1e3,n.lineHeight*=.87,n.CRLF(),n.baseline+=10;function s(a,r){const l=r=="student"?120:45;n.x=n.leftMargin=l,n.addText(a).forEach(m=>{t.add({baseline:m.baseline,x:m.x,shape:m.description.shape}).forEach(({element:p})=>{p.classList.add(r)})}),n.baseline+=10,n.CRLF()}s("Did you see the latest 3Blue1Brown video?","teacher"),s("Yes.  It looks amazing!","student"),s("Would you like to see something similar with tau instead of pi?","teacher"),s("Of course!","student"),s("I have some real stuff on the way.  I just really â™¡ some of those animations so I had to try them myself.","teacher");const o=d.makeBoundedLinear(.05,0,.8,1);function i(a){t.setProgress(o(a)),f(a)}return i})();function B(e){f(e),D(e),z(e)}{const e=c.getById("time",HTMLInputElement),t=()=>{const n=e.valueAsNumber;B(n)};e.addEventListener("input",t),t()}function L(e){switch(e){case"main":{P.style.display="none",E.style.display="";break}case"thumbnail":{E.style.display="none",P.style.display="";break}default:throw new Error(`unknown scene: ${e}`)}}{let e=function(){const s=t.checked?"thumbnail":"main";L(s)};const t=c.getById("showThumbnail",HTMLInputElement);t.addEventListener("click",e),e()}function Q(e){return L(e),document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(t=>{if(!(t instanceof SVGElement||t instanceof HTMLElement))throw new Error("wtf");t.style.display="none"}),{source:"tau.ts",devicePixelRatio,scene:e}}const S=window;S.initScreenCapture=Q;S.showFrame=B;S.showScene=L;
