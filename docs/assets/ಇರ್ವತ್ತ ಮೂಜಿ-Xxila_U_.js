import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as d}from"./client-misc-B8CxQsfg.js";import{r as n,m as it,b as ot,s as nt,t as F,c as rt,h as v}from"./fourier-shared-yVHHVzl_.js";import{s as a}from"./fourier-samples-B7zUL-X_.js";import{p as st,c as mt,P as A}from"./path-shape-Cey3Rpwf.js";import{m as S}from"./misc-BHUyxQfl.js";import{e as lt}from"./utility-Dgy6CMn3.js";import{H as ct}from"./handwriting-effect-2FjZRqWW.js";import{T as pt}from"./letters-more-CUw3YRHl.js";import"./letters-base-QYeM0XQg.js";const dt=1024,H=d.getById("scaled",SVGGElement),O=d.getById("reference",SVGPathElement),ut=d.getById("samples",SVGPathElement);function W(o,s){if(o>=s)throw new Error("wtf");const w=S.makeLinear(o,0,s,1);function G(y){if(y<=o)return 0;if(y>=s)return 1;const c=w(y);return lt(c)}return G}let j=NaN,I=o=>{console.error("not ready yet")};window.showFrame=o=>{const s=o/60*1e3;I(s)};function Z(o){O.setAttribute("d",o.pathString);const s=st(O.getBBox(),{x:1,y:1,width:14,height:7},"srcRect fits completely into destRect",1),w=s.a;H.style.transform=s.toString(),H.style.setProperty("--path-scale",w.toString());const G=ot(o.pathString,dt);let y="";G.forEach(([t,i])=>{y+=`M${t},${i}l0,0`}),ut.setAttribute("d",y);const c=nt(G);window.debugPath=t=>{const i=F(c,t),e=new mt(i);e.go(5e3),e.dump(),console.log(e),O.setAttribute("d",e.pathShape.rawPath)},console.log("Try debugPath(2);");const f=rt({addTime:4800,pauseTime:200,maxGroupsToDisplay:o.maxGroupsToDisplay,terms:c,skipCountAtEnd:0});j=f.at(-1).endTime;const R=t=>Math.max(...c.slice(0,t).map(e=>Math.abs(e.frequency))),$=t=>8*R(t)+7,X=f.map(t=>{if(t.addingCircles==0){const i=F(c,t.usingCircles),e=$(t.usingCircles),r=A.glitchFreeParametric(i,e);return()=>r.rawPath}else if(t.usingCircles==0&&t.addingCircles==1&&c[0].frequency==0){let i=function(l){return`${m.x*l},${m.y*l}`};const{startTime:e,endTime:r}=t,p=r-e,u=W(e,e+p/2),g=W(e,r),m=v(c[0]);return l=>{const h=g(l),T=i(h),P=u(l),b=i(P);return`M ${T} L ${b}`}}else{const e=.2/R(t.usingCircles+t.addingCircles),r=S.makeBoundedLinear(t.startTime,-e,t.endTime,1+e),p=F(c,t.usingCircles),u=F(c,t.addingCircles,t.usingCircles);let g=$(t.usingCircles+t.addingCircles);if(t.usingCircles==0||t.usingCircles==1&&v(c[0])){const m=v(c[0])??{x:0,y:0};return l=>{const h=r(l),T=h-e,P=h+e,b=W(T,P),x=Math.min(1,P);if(x<=0)return`M${m.x},${m.y} L${m.x},${m.y}`;{let C=function(k){k=k*x;const E=p(k),L=1-b(k);if(L==0)return E;{const J=u(k);return{x:E.x+L*J.x,y:E.y+L*J.y}}};const D=Math.ceil(Math.max(g,150)*x);return A.glitchFreeParametric(C,D).rawPath}}}else return m=>{const l=r(m),h=W(l-e,l+e);function T(b){const x=p(b),C=1-h(b);if(C==0)return x;{const D=u(b);return{x:x.x+C*D.x,y:x.y+C*D.y}}}return A.glitchFreeParametric(T,g).rawPath}}}),Y=new Intl.NumberFormat("en-US",{minimumSignificantDigits:5,maximumSignificantDigits:5,useGrouping:!1}).format,M=t=>{t<0&&(t=0);let i=Y(t);const[,e,r]=/^([0-9]+)\.([0-9]+)$/.exec(i);switch(e.length){case 3:break;case 2:{i=S.FIGURE_SPACE+i;break}case 1:{i=S.FIGURE_SPACE+S.FIGURE_SPACE+i;break}default:throw console.warn({beforeDecimalPoint:e,afterDecimalPoint:r,result:i}),new Error("wtf")}return i+"%"},tt=f.map(t=>({usingAmplitude:M(t.usingAmplitude),addingAmplitude:M(t.addingAmplitude),availableAmplitude:M(t.availableAmplitude)})),q=d.selectorQuery("[data-using] [data-circles]",HTMLTableCellElement),N=d.selectorQuery("[data-using] [data-amplitude]",HTMLTableCellElement),Q=d.selectorQuery("[data-adding] [data-circles]",HTMLTableCellElement),U=d.selectorQuery("[data-adding] [data-amplitude]",HTMLTableCellElement),V=d.selectorQuery("[data-available] [data-circles]",HTMLTableCellElement),z=d.selectorQuery("[data-available] [data-amplitude]",HTMLTableCellElement);function K(t,i){const e=new ct(t),r=new pt(.5);r.leftMargin=0,r.rightMargin=16,r.CRLF(),r.addText(i).forEach(g=>{e.add({baseline:g.baseline,x:g.x,shape:g.description.shape})});const u=r.font.get("0").fontMetrics.strokeWidth;return t.style.strokeWidth=u.toString(),e.setProgress(0),e}const et=K(d.getById("topText",SVGGElement),o.topText??""),at=K(d.getById("bottomText",SVGGElement),o.bottomText??"");I=t=>{et.setProgressLength((t-750)/1e3*3),at.setProgressLength((t-5e3)/1e3*3);function i(){const m=f.findIndex(({endTime:l})=>t<l);return m==-1?f.length-1:m}const e=i(),r=m=>`${m.toString().padStart(4,S.FIGURE_SPACE)}`,p=f[e];q.innerText=r(p.usingCircles),Q.innerText=r(p.addingCircles),V.innerText=r(p.availableCircles),[{value:p.usingCircles,element1:q,element2:N},{value:p.addingCircles,element1:Q,element2:U},{value:p.availableCircles,element1:V,element2:z}].forEach(({value:m,element1:l,element2:h})=>{const T=m==0?"0.5":"";l.style.opacity=T,h.style.opacity=T});const u=tt[e];N.innerText=u.usingAmplitude,U.innerText=u.addingAmplitude,z.innerText=u.availableAmplitude;const g=A.cssifyPath(X[e](t));H.style.setProperty("--d",g)}}const _=new Map([["likeShareAndSubscribe",{maxGroupsToDisplay:30,pathString:a.likeShareAndSubscribe,topText:"Cursive Writing",bottomText:"Hershey Fonts"}],["hilbert0",{maxGroupsToDisplay:9,pathString:a.hilbert[0],topText:"Hilbert, First Order",bottomText:"Wikipedia"}],["hilbert1",{maxGroupsToDisplay:20,pathString:n(a.hilbert[1]).rawPath,topText:"Hilbert, Second Order",bottomText:"Wikipedia"}],["hilbert4",{maxGroupsToDisplay:30,pathString:n(a.hilbert[4]).rawPath,topText:"Hilbert, Fifth Order",bottomText:"Wikipedia"}],["p0",{maxGroupsToDisplay:7,pathString:n(a.peanocurve[0]).rawPath,topText:"Peano Curve #0",bottomText:"Wikipedia"}],["p1",{maxGroupsToDisplay:10,pathString:n(a.peanocurve[1]).rawPath,topText:"Peano Curve #1",bottomText:"Wikipedia"}],["p2",{maxGroupsToDisplay:20,pathString:n(a.peanocurve[2]).rawPath,topText:"Peano Curve #2",bottomText:"Wikipedia"}],["square",{maxGroupsToDisplay:7,pathString:"M-0.5,-0.667 h 1 v 1 h -1 z"}],["ellipse",{maxGroupsToDisplay:7,pathString:"M1,0 A1,1.25 0 1 1 -1,0 A1,1.25 0 1 1 1,0 z"}],["star7",{maxGroupsToDisplay:8,pathString:it(7,2,"My seed 2025a").rawPath,topText:"Random 7 Pointed Star",bottomText:'makePolygon(7,2, "My seed 2025a")'}],["Daphne_Oram_1",{maxGroupsToDisplay:17,pathString:n(a.daphneOram1).rawPath,topText:"Daphne Oram #1",bottomText:"Wikimedia Commons"}],["Daphne_Oram_2",{maxGroupsToDisplay:22,pathString:n(a.daphneOram2,.025,.71).rawPath,topText:"Daphne Oram #2",bottomText:"Wikimedia Commons"}],["water_opossum",{maxGroupsToDisplay:9,pathString:a.waterOpossum,topText:"Water Opossum",bottomText:"Wikimedia Commons"}],["cat",{maxGroupsToDisplay:9,pathString:n(a.cat).rawPath,topText:"Cat",bottomText:"Wikimedia Commons"}],["airplane",{maxGroupsToDisplay:15,pathString:n(a.airplane,.3,.7).rawPath,topText:"Airplane",bottomText:"Wikimedia Commons"}],["head_facing_right",{maxGroupsToDisplay:12,pathString:n(a.headFacingRight).rawPath,topText:"Head Facing Right",bottomText:"Wikimedia Commons"}],["Lavater",{maxGroupsToDisplay:8,pathString:n(a.lavater).rawPath,topText:"Johann Kaspar Lavaters",bottomText:"Wikimedia Commons"}],["man_walking",{maxGroupsToDisplay:16,pathString:n(a.manWalking).rawPath,bottomText:"Wikimedia Commons",topText:"Man Walking"}],["bear",{maxGroupsToDisplay:16,pathString:n(a.bear).rawPath,topText:"Bear",bottomText:"Wikimedia Commons"}],["head_facing_left",{maxGroupsToDisplay:13,pathString:n(a.headFacingLeft).rawPath,topText:"Head Facing Left",bottomText:"Wikimedia Commons"}],["kiwi",{maxGroupsToDisplay:17,pathString:n(a.kiwi,1,.85).rawPath,topText:"Kiwi",bottomText:"Wikimedia Commons"}],["hand",{maxGroupsToDisplay:15,pathString:n(a.hand,.8,.2).rawPath,topText:"Hand",bottomText:"Wikimedia Commons"}],["carpe",{maxGroupsToDisplay:16,pathString:n(a.carpe).rawPath,topText:"Carpe",bottomText:"Wikimedia Commons"}],["pigeon",{maxGroupsToDisplay:19,pathString:a.pigeon,topText:"Pigeon",bottomText:"Wikimedia Commons"}],["smallAirplane",{maxGroupsToDisplay:16,pathString:n(a.smallAirplane,.8,.7).rawPath,topText:"Robin DR400",bottomText:"Wikimedia Commons"}],["hawk",{maxGroupsToDisplay:8,pathString:n(a.hawk).rawPath,topText:"Hawk",bottomText:"Wikimedia Commons"}],["songBird",{maxGroupsToDisplay:7,pathString:n(a.songBird).rawPath,topText:"Song Bird",bottomText:"Wikimedia Commons"}],["etchASketch",{maxGroupsToDisplay:21,pathString:n(a.etchASketch,.9,0).rawPath,topText:"Skyline",bottomText:"MacGameStore"}]]);{const o=new URLSearchParams(window.location.search).get("script_name");if(o){const s=_.get(o);if(!s)throw console.log(`invalid script name: ${o}`,_),new Error("wtf");Z(s)}else Z(_.get("hand"))}let B;setTimeout(()=>{let o=NaN;B=new d.AnimationLoop(s=>{isNaN(o)&&(o=s);const w=s-o;I(w)}),window.animationLoop=B},1);function gt(o){return document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(s=>{if(!(s instanceof SVGElement||s instanceof HTMLElement))throw new Error("wtf");s.style.display="none"}),B.cancel(),{source:"path-to-fourier.ts",script:o,firstFrame:0,lastFrame:Math.floor(j/1e3*60)}}window.initScreenCapture=gt;
