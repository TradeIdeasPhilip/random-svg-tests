import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as W,g as ht,i as rt,m as pt,s as nt}from"./client-misc-DyzYuCZn.js";/* empty css              */import{b as O,l as N}from"./utility-BJJSsp0G.js";import{a as lt}from"./rough.esm-C_8OcXYf.js";class q{constructor(p,e,f){this.x0=p,this.y0=e,this.x=f,O(p,e,f),this.y=e,this.asString=`H ${f}`}y;incomingAngle=NaN;outgoingAngle=NaN;command="H";asString;translate(p,e){return new q(this.x0+p,this.y0+e,this.x+p)}toCubic(){return new Y(this.x0,this.y0,N(this.x0,this.x,1/3),this.y0,N(this.x0,this.x,2/3),this.y0,this.x,this.y0)}}class Z{constructor(p,e,f){this.x0=p,this.y0=e,this.y=f,O(p,e,f),this.x=p,this.asString=`V ${f}`}x;incomingAngle=NaN;outgoingAngle=NaN;command="V";asString;translate(p,e){return new Z(this.x0+p,this.y0+e,this.y+e)}toCubic(){return new Y(this.x0,this.y0,this.x0,N(this.y0,this.y,1/3),this.x0,N(this.y0,this.y,2/3),this.x0,this.y)}}class J{constructor(p,e,f,h){this.x0=p,this.y0=e,this.x=f,this.y=h,O(p,e,f,h),this.asString=`L ${f},${h}`}incomingAngle=NaN;outgoingAngle=NaN;command="L";asString;translate(p,e){return new J(this.x0+p,this.y0+e,this.x+p,this.y+e)}toCubic(){return new Y(this.x0,this.y0,N(this.x0,this.x,1/3),N(this.y0,this.y,1/3),N(this.x0,this.x,2/3),N(this.y0,this.y,2/3),this.x,this.y)}}class tt{constructor(p,e,f,h,o,M){this.x0=p,this.y0=e,this.x1=f,this.y1=h,this.x=o,this.y=M,O(p,e,f,h,o,M),this.asString=`Q ${f},${h} ${o},${M}`}incomingAngle=NaN;outgoingAngle=NaN;command="Q";asString;translate(p,e){return new tt(this.x0+p,this.y0+e,this.x1+p,this.y1+e,this.x+p,this.y+e)}toCubic(){return new Y(this.x0,this.y0,N(this.x0,this.x1,2/3),N(this.y0,this.y1,2/3),N(this.x,this.x1,2/3),N(this.y,this.y1,2/3),this.x,this.y)}}class Y{constructor(p,e,f,h,o,M,i,g){this.x0=p,this.y0=e,this.x1=f,this.y1=h,this.x2=o,this.y2=M,this.x=i,this.y=g,O(p,e,f,h,o,M,i,g),this.asString=`C ${f},${h} ${o},${M} ${i},${g}`}incomingAngle=NaN;outgoingAngle=NaN;command="C";asString;translate(p,e){return new Y(this.x0+p,this.y0+e,this.x1+p,this.y1+e,this.x2+p,this.y2+e,this.x+p,this.y+e)}toCubic(){return this}}class u{get commands(){return this.#t}addCommands(p){this.#t.push(...p)}static fromStrings(p){let e=p.join(" ");const f=[];let h;for(;e=e.replace(/^ */,""),e!="";){let o=dt.exec(e);if(o){const M=W(o[1]),i=W(o[2]);if(M===void 0||i===void 0)throw console.error(o,M,i,this),new Error("wtf");h&&f.push(h),h=this.M(M,i),e=o[3];continue}if(h){if(o=ut.exec(e),o){const M=W(o[1]),i=W(o[2]),g=W(o[3]),a=W(o[4]);if(M===void 0||i===void 0||g===void 0||a===void 0)throw console.error(o,M,i,g,a,this),new Error("wtf");h=h.Q(M,i,g,a),e=o[5];continue}if(o=mt.exec(e),o){const M=W(o[1]),i=W(o[2]),g=W(o[3]),a=W(o[4]),y=W(o[5]),_=W(o[6]);if(M===void 0||i===void 0||g===void 0||a===void 0||y===void 0||_===void 0)throw console.error(o,M,i,g,a,y,_,this),new Error("wtf");h=h.C(M,i,g,a,y,_),e=o[7];continue}}throw console.error(e),new Error("wtf")}return h&&f.push(h),f}static M(p,e){const f=new u;return f.M(p,e),f}#t=[];get pathShape(){return new P(this.#t)}#e;M(p,e){return O(p,e),this.#e={x:p,y:e,outgoingAngle:NaN},this}peekPrevious(){return this.#e??this.#t.at(-1)}consumePrevious(){const p=this.peekPrevious();return this.#e=void 0,p}H(p){const e=this.consumePrevious();return this.#t.push(new q(e.x,e.y,p)),this}V(p){const e=this.consumePrevious();return this.#t.push(new Z(e.x,e.y,p)),this}L(p,e){const f=this.consumePrevious();return this.#t.push(new J(f.x,f.y,p,e)),this}Q(p,e,f,h){const o=this.consumePrevious();return this.#t.push(new tt(o.x,o.y,p,e,f,h)),this}Q_HV(p,e){const f=this.peekPrevious();return this.Q(p,f.y,p,e)}Q_VH(p,e){const f=this.peekPrevious();return this.Q(f.x,e,p,e)}C(p,e,f,h,o,M){const i=this.consumePrevious();return this.#t.push(new Y(i.x,i.y,p,e,f,h,o,M)),this}}const et=" *",D="(-?[0-9]+.?[0-9]*)",B=" *[, ] *",dt=new RegExp(`^M${et}${D}${B}${D}(.*)$`),ut=new RegExp(`^Q${et}${D}${B}${D}${B}${D}${B}${D}(.*)$`),mt=new RegExp(`^C${et}${D}${B}${D}${B}${D}${B}${D}${B}${D}${B}${D}(.*)$`);class P{matchForMorph(p){const e=this.commands.map(i=>i.toCubic()),f=p.commands.map(i=>i.toCubic());if(e.length!=f.length){const{shorter:i,longer:g}=e.length<f.length?{shorter:e,longer:f}:{shorter:f,longer:e};if(i.length==0)throw new Error("can't morph something into nothing");const a=g.length/i.length,y=[];i.forEach((_,c)=>{const X=Math.round((c+1)*a);for(;y.length<X;)y.push(_)}),i.length=0,i.push(...y)}if(e.length!=f.length)throw new Error("wtf");function h(i){return P.cssifyPath(i.map(g=>new P([g]).rawPath).join())}const o=h(e),M=h(f);return{pathForThis:o,pathForOther:M}}commands;get endX(){return this.commands.at(-1)?.x}get endY(){return this.commands.at(-1)?.y}get startX(){return this.commands.at(0)?.x0}get startY(){return this.commands.at(0)?.y0}static fromStrings(p){const f=u.fromStrings(p).flatMap(o=>o.commands);return new this(f)}constructor(p){this.commands=[...p]}static cssifyPath(p){return`path('${p}')`}get cssPath(){return P.cssifyPath(this.rawPath)}makeElement(){const p=document.createElementNS("http://www.w3.org/2000/svg","path"),e=this.cssPath;if(p.style.d=e,p.style.d=="")throw console.error(e,p),new Error("wtf");return p}static needAnM(p,e){return!p||p.x!=e.x0||p.y!=e.y0}get rawPath(){return this.commands.flatMap((p,e)=>{const f=[],h=this.commands[e-1];return P.needAnM(h,p)&&f.push(`M ${p.x0},${p.y0}`),f.push(p.asString),f}).join(" ")}get cssPaths(){return this.splitOnMove().map(p=>p.cssPath)}get rawPaths(){return this.splitOnMove().map(p=>p.rawPath)}splitOnMove(){const p=[];let e=[];return this.commands.forEach(f=>{P.needAnM(e.at(-1),f)&&(e=[],p.push(e)),e.push(f)}),p.map(f=>new P(f))}static join(p){return new P(p.flatMap(({Δx:e,Δy:f,shape:h})=>h.translate(e,f).commands))}convertToCubics(){return new P(this.commands.map(p=>p.toCubic()))}translate(p,e){return new P(this.commands.map(f=>f.translate(p,e)))}}class ot{constructor(p,e=p/10){if(this.fontSize=p,this.strokeWidth=e,p<=0||!isFinite(p))throw new Error("wtf")}get mHeight(){return this.fontSize}get xHeight(){return this.fontSize*.5}get aWidth(){return this.fontSize*.75}get digitWidth(){return this.fontSize*.5}get defaultKerning(){return this.strokeWidth*2.5}get spaceWidth(){return this.strokeWidth+this.digitWidth/2}get top(){return this.capitalTop-this.mHeight/4}get capitalTop(){return this.baseline-this.mHeight}get capitalTopMiddle(){return(this.capitalTop+this.capitalMiddle)/2}get capitalMiddle(){return this.baseline-this.xHeight}get capitalBottomMiddle(){return(this.baseline+this.capitalMiddle)/2}get baseline(){return 0}get descender(){return this.mHeight/4}get bottom(){return this.descender+this.mHeight/4}}class st{constructor(p,e,f){this.advance=e,this.fontMetrics=f,p instanceof P?this.#t=()=>p:this.#t=p}#t;get shape(){return this.#t()}get cssPath(){return this.shape.cssPath}get d(){return this.shape.rawPath}makeElement(){return this.shape.makeElement()}makeElements(){return this.shape.splitOnMove().map(p=>({innerShape:p,element:p.makeElement()}))}}function K(x){const p=new Map;typeof x=="number"&&(x=new ot(x));const e=(t,n,s)=>{const r=new st(n,s,x);if(p.has(t))throw new Error(`duplicate letter: "${t}", previous letter: "${[...p].at(-1)[0]}"`);p.set(t,r)},{aWidth:f,digitWidth:h,capitalTop:o,capitalTopMiddle:M,capitalMiddle:i,capitalBottomMiddle:g,baseline:a,descender:y,strokeWidth:_}=x,c=0;{const t=h,s=t/2,r=t;{const l=(y-a)*2,w=y,S=w-l,b=o-l/4,V=b+l;if(l<=0||w<=S||S<=V||V<=b)throw new Error("wtf");const d=h*.5;{const m=u.M(d,b).Q_HV(0,V).V(S).Q_VH(d,w).pathShape;e("(",m,d)}{const m=h*.5,Q=u.M(0,b).Q_HV(m,V).V(S).Q_VH(0,w).pathShape;e(")",Q,m)}{const m=u.M(d,b).H(0).V(w).H(d).pathShape;e("[",m,d)}{const m=u.M(0,b).H(d).V(w).H(0).pathShape;e("]",m,d)}}{const l=h*.75,w=l/2,S=u.M(w,i-w).V(i+w).M(c,i).H(l).pathShape;e("+",S,l)}{const l=h*.75,w=u.M(c,i).H(l).pathShape;e("-",w,l)}{const l=h*.75,w=u.M(c,i-_*1.25).H(l).M(c,i+_*1.25).H(l).pathShape;e("=",w,l)}{const l=h*1.25,w=a+_,S=u.M(0,w).H(l).pathShape;e("_",S,l)}{const l=h/2,w=3*l,S=l/3,b=o,V=b+l,d=V+l,m=d+l,Q=u.M(l+S,b).L(l-S,m).M(2*l+S,b).L(2*l-S,m).M(0,V).H(w).M(0,d).H(w).pathShape;e("#",Q,w)}{const l=h/2,w=3*l,S=0,b=l,V=w/2,d=2*l,m=w,Q=o+(x.mHeight-w)/2,H=Q+b,v=Q+V,L=Q+d,C=Q+m,$=u.M(d,v).Q_VH(V,H).Q_HV(b,v).Q_VH(V,L).Q_HV(d,v).Q_VH((d+m)/2,L).Q_HV(m,v).V((H+v)/2).Q_VH(V,Q).Q_HV(S,v).Q_VH(V,C).H((d+m)/2).pathShape;e("@",$,w)}{const l=u.M(s,o).Q(r,o,r,M).L(r,g).Q(r,a,s,a).Q(c,a,c,g).L(c,M).Q(c,o,s,o).M(r,M).L(c,g).pathShape;e("0",l,t)}{const l=u.M(c,M).Q(s,M,s,o).L(s,a).M(c,a).L(r,a).pathShape;e("1",l,t)}{const l=u.M(c,M).Q_VH(s,o).Q_HV(r,M).Q_VH(s,i).Q_HV(c,a).L(r,a).pathShape;e("2",l,t)}{const l=u.M(c,M).Q_VH(s,o).Q_HV(r,M).Q_VH(s,i).Q_HV(r,g).Q_VH(s,a).Q_HV(c,g).pathShape;e("3",l,t)}{const l=(s+r)/2,w=(s+c)/2,S=u.M(r,i).L(c,i).L(w,o).M(l,o).L(l,a).pathShape;e("4",S,t)}{const l=c+h/5,w=r-h/5,S=(i+g)/2,b=u.M(w,o).L(l,o).L(c,i).Q_VH(s,M).Q_HV(r,S).Q_VH(s,a).Q_HV(c,g).pathShape;e("5",b,t)}{const l=u.M(r,o).Q_HV(c,g).Q_VH(s,a).Q_HV(r,g).Q_VH(s,i).Q_HV(c,g).pathShape;e("6",l,t)}{const l=u.M(c,o).L(r,o).L(c,a).pathShape;e("7",l,t)}{const l=u.M(s,o).Q(r,o,r,M).Q(r,i,s,i).Q(c,i,c,g).Q(c,a,s,a).Q(r,a,r,g).Q(r,i,s,i).Q(c,i,c,M).Q(c,o,s,o).pathShape;e("8",l,t)}{const l=u.M(r,M).Q(r,o,s,o).Q(c,o,c,M).Q(c,i,s,i).Q(r,i,r,M).Q(r,a,c,a).pathShape;e("9",l,t)}}{const t=u.M(c,a).L(f/2,o).L(x.aWidth,a).M(x.aWidth/4,i).L(x.aWidth*.75,i).pathShape;e("A",t,f)}{const t=h,n=M-o;if(n<=0)throw new Error("wtf");const s=(t-n)*(2/3),r=a-g;if(r<=0)throw new Error("wtf");const l=t-r,w=u.M(c,o).L(c,a).L(l,a).M(Math.max(l,s),i).L(c,i).M(c,o).L(s,o).Q(s+n,o,s+n,o+n).Q(s+n,i,s,i).M(l,i).Q(l+r,i,l+r,a-r).Q(l+r,a,l,a).pathShape;e("B",w,t)}{const t=h,s=t/2,r=t,l=u.M(r,M).Q(r,o,s,o).Q(c,o,c,M).L(c,g).Q(c,a,s,a).Q(r,a,r,g).pathShape;e("C",l,t)}{const t=h,s=t/2,r=t,l=u.M(c,o).L(c,a).L(s,a).Q(r,a,r,g).L(r,M).Q(r,o,s,o).L(c,o).pathShape;e("D",l,t)}{const t=h,n=t*(2/3),s=t,r=u.M(s,o).L(c,o).L(c,a).L(s,a).M(n,i).L(c,i).pathShape;e("E",r,t)}{const t=h,n=t*(2/3),s=t,r=u.M(s,o).L(c,o).L(c,a).M(n,i).L(c,i).pathShape;e("F",r,t)}{const t=h,s=t/2,r=t,l=u.M(r,M).Q(r,o,s,o).Q(c,o,c,M).L(c,g).Q(c,a,s,a).Q(r,a,r,g).L(r,i).L(s,i).pathShape;e("G",l,t)}{const t=h,n=t,s=u.M(c,o).L(c,a).M(n,o).L(n,a).M(c,i).L(n,i).pathShape;e("H",s,t)}{const t=x.mHeight/3,n=t/2,s=t,r=u.M(c,o).L(s,o).M(c,a).L(s,a).M(n,o).L(n,a).pathShape;e("I",r,t)}{const t=h*.85,s=t/2,r=t,l=u.M(r,o).L(r,g).Q(r,a,s,a).Q(c,a,c,g).pathShape;e("J",l,t)}{const t=h+_,n=(o+a)/2,s=u.M(c,o).L(c,a).M(t,o).L(c+.5,n).L(t,a).pathShape;e("K",s,t)}{const t=h,n=u.M(c,o).L(c,a).L(t,a).pathShape;e("L",n,t)}{const t=h*1.5,n=t/2,s=u.M(c,a).L(c,o).L(n,i).L(t,o).L(t,a).pathShape;e("M",s,t)}{const t=h*1.2,n=u.M(c,a).L(c,o).L(t,a).L(t,o).pathShape;e("N",n,t)}{const t=h*1.5,n=t/2,s=(o+a)/2,r=u.M(n,o).Q_HV(t,s).Q_VH(n,a).Q_HV(c,s).Q_VH(n,o).pathShape;e("O",r,t)}{const t=h,n=i-M;if(n<=0)throw new Error("wtf");const s=t-n,r=u.M(c,o).L(c,a).M(c,o).L(s,o).Q_HV(t,M).Q_VH(s,i).L(c,i).pathShape;e("P",r,t)}{const t=h*1.5,n=t/2,s=(o+a)/2,r=u.M(n,o).Q_HV(t,s).Q_VH(n,a).Q_HV(c,s).Q_VH(n,o).M(t-n*.75,a-n*.75).L(t+n/6,a+n/6).pathShape;e("Q",r,t)}{const t=h,n=i-M;if(n<=0)throw new Error("wtf");const s=t-n,r=u.M(c,o).L(c,a).M(c,o).L(s,o).Q_HV(t,M).Q_VH(s,i).L(c,i).M(s,i).L(t,a).pathShape;e("R",r,t)}{const t=h,n=h/2,s=h,r=u.M(s,M).Q_VH(n,o).Q_HV(c,M).Q_VH(n,i).Q_HV(s,g).Q_VH(n,a).Q_HV(c,g).pathShape;e("S",r,t)}{const n=h+_,s=n/2,r=n,l=x.mHeight/8,w=u.M(r,M).Q_VH(s,o).Q_HV(c,M).Q_VH(s,i).Q_HV(r,g).Q_VH(s,a).Q_HV(c,g).M(s,o-l).V(a+l).pathShape;e("$",w,n)}{const t=h,n=t/2,s=u.M(n,o).L(n,a).M(t,o).L(c,o).pathShape;e("T",s,t)}{const t=(g+i)/2,n=Math.abs(t-a)*.85,s=n*2,r=u.M(c,o).V(t).Q_VH(n,a).Q_HV(s,t).V(o).pathShape;e("U",r,s)}{const t=f,n=t/2,s=u.M(c,o).L(n,a).L(t,o).pathShape;e("V",s,t)}{const t=f*1.5,n=t/3,s=t/2,r=n*2,l=u.M(c,o).L(n,a).L(s,i).L(r,a).L(t,o).pathShape;e("W",l,t)}{const t=h,n=u.M(t,o).L(c,a).M(c,o).L(t,a).pathShape;e("X",n,t)}{const t=_,n=h+t,s=u.M(n,o).L(t,a).M(c,o).L(n/2,i).pathShape;e("Y",s,n)}{const t=h,n=u.M(c,o).H(t).L(c,a).H(t).pathShape;e("Z",n,t)}{const t=h/4,n=h*1.2,s=u.M(t*2,o+t).Q_VH(t,o).Q_HV(0,o+t).Q_VH(t,o+t*2).Q_HV(t*2,o+t),l=s.pathShape.translate(n-t*2,x.mHeight-t*2);s.addCommands(l.commands),s.M(n,o).L(c,a);const w=s.pathShape;e("%",w,n)}{const t=h,n=u.M(t,o).L(c,a).pathShape;e("/",n,t)}{const t=h,n=u.M(c,o).L(t,a).pathShape;e("\\",n,t)}{const t=h,n=_/2,s=t+n,r=t/2,l=u.M(r,i).Q_HV(c,g).Q_VH(r,a).Q_HV(t,g).Q_VH(r,i).M(s,i).L(s,a).pathShape;e("a",l,s)}{const t=h,n=_/2,s=t+n,r=n,l=n+t/2,w=s,S=u.M(c,o).V(a).M(r,g).Q_VH(l,a).Q_HV(w,g).Q_VH(l,i).Q_HV(r,g).pathShape;e("b",S,s)}{const t=h*.875,n=0,s=h/2,r=t,l=(i+g)/2,w=(g+a)/2,S=u.M(r,l).Q_VH(s,i).Q_HV(n,g).Q_VH(s,a).Q_HV(r,w).pathShape;e("c",S,t)}{const t=h,n=_/2,s=t+n,r=t/2,l=u.M(r,i).Q_HV(c,g).Q_VH(r,a).Q_HV(t,g).Q_VH(r,i).M(s,o).L(s,a).pathShape;e("d",l,s)}const X=h/8;{const t=h,n=h/2,s=t,r=s-X,l=u.M(c,g).H(s).Q_VH(n,i).Q_HV(c,g).Q_VH(n,a).H(r).pathShape;e("e",l,t)}{const t=h*.75,n=t/2,s=t,r=u.M(s,o).Q_HV(n,M).V(a).M(s,i).H(c).pathShape;e("f",r,t)}{const t=h,n=_/2,s=t+n,r=t/2,l=u.M(r,i).Q_HV(c,g).Q_VH(r,a).Q_HV(t,g).Q_VH(r,i).M(s,i).V(a).Q_VH(r,y).H(c+X).pathShape;e("g",l,s)}{const t=h*.85,n=t/2,s=u.M(c,o).V(a).Q_VH(n,i).Q_HV(t,g).V(a).pathShape;e("h",s,t)}const A=_/4;{const n=u.M(c,i).V(a).M(c,M).V(M-A).pathShape;e("i",n,0)}{const t=Math.abs(a-y),n=t/2,s=u.M(t,i).V(a).Q_VH(n,y).Q_HV(c,a).M(t,M).V(M-A).pathShape;e("j",s,t)}{const n=u.M(c,a).V(a-A).pathShape;e(".",n,0)}{const n=u.M(c,o).V(g).M(c,a).V(a-A).pathShape;e("!",n,0)}{const n=(y-a)/2,s=n/2,r=u.M(c,a-A).V(a).Q_VH(-s,a+n).pathShape;e(",",r,0)}{const n=i,s=u.M(c,a).V(a-A).M(c,n-A).V(n).pathShape;e(":",s,0)}{const n=i,s=(y-a)/2,r=s/2,l=u.M(c,a-A).V(a).Q_VH(-r,a+s).M(c,n-A).V(n).pathShape;e(";",l,0)}{const t=x.xHeight*2/3,n=h/10,s=t+n,r=u.M(c,o).V(a).M(t,i).L(c,i+t).M(t/2,a-t).L(s,a).pathShape;e("k",r,s)}{const n=u.M(c,o).V(a).pathShape;e("l",n,0)}{const t=h*1.5,n=t/4,s=t/2,r=t*3/4,l=t,w=u.M(c,i).V(a).Q_VH(n,i).Q_HV(s,g).V(a).M(s,g).Q_VH(r,i).Q_HV(l,g).V(a).pathShape;e("m",w,t)}{const t=h*.85,n=t/2,s=u.M(c,i).V(a).Q_VH(n,i).Q_HV(t,g).V(a).pathShape;e("n",s,t)}{const t=h,n=0,s=t/2,r=t,l=u.M(s,i).Q_HV(r,g).Q_VH(s,a).Q_HV(n,g).Q_VH(s,i).pathShape;e("o",l,t)}{const t=h,n=_/2,s=t+n,r=n,l=n+t/2,w=s,S=u.M(c,i).V(y).M(r,g).Q_VH(l,i).Q_HV(w,g).Q_VH(l,a).Q_HV(r,g).pathShape;e("p",S,s)}{const t=h,n=t/2,s=t+_/2,r=Math.abs(a-y),l=s+r/2,w=s+r,S=u.M(n,i).Q_HV(c,g).Q_VH(n,a).Q_HV(t,g).Q_VH(n,i).M(s,i).V(a).Q_VH(l,y).Q_HV(w,a).pathShape;e("q",S,w)}{const t=h,n=t/2,s=u.M(c,i).V(a).Q_VH(n,i).Q_HV(t,g).pathShape;e("r",s,t)}{const t=x.xHeight*2/3,n=t/2,s=a,r=g,l=i,w=(s+r)/2,S=(r+l)/2,b=(S+l)/2,V=(s+w)/2,d=u.M(t,b).Q_VH(n,l).Q_HV(c,S).Q_VH(n,r).Q_HV(t,w).Q_VH(n,s).Q_HV(c,V).pathShape;e("s",d,t)}{const t=h*.75,n=t/2,s=t,r=u.M(n,M).V(g).Q_VH(s,a).M(s,i).H(c).pathShape;e("t",r,t)}{const t=h*.85,n=t/2,s=u.M(c,i).V(g).Q_VH(n,a).Q_HV(t,i).L(t,a).pathShape;e("u",s,t)}{const t=h,n=t/2,s=u.M(c,i).L(n,a).L(t,i).pathShape;e("v",s,t)}{const t=x.xHeight*1.5,n=t/3,s=t/2,r=n*2,l=u.M(c,i).L(n,a).L(s,g).L(r,a).L(t,i).pathShape;e("w",l,t)}{const t=h,n=u.M(t,i).L(c,a).M(c,i).L(t,a).pathShape;e("x",n,t)}{const t=h,n=t/2,s=(i+y)/2,r=u.M(t,i).L(c,y).M(c,i).L(n,s).pathShape;e("y",r,t)}{const t=h,n=u.M(c,i).H(t).L(c,a).H(t).pathShape;e("z",n,t)}return new Map([...p.entries()].sort(([t],[n])=>t<n?-1:t==n?1:0))}const j=ht("main",SVGSVGElement);function gt(x){const p=new Map;return x.forEach((e,f)=>{const{advance:h,fontMetrics:o}=e,M=e.shape.convertToCubics(),i=new st(M,h,o);p.set(f,i)}),p}function ft(x,p=x*.75){const e=K(x);return K(p).forEach((h,o)=>{const M=o.toLowerCase();M!=o&&e.set(M,h)}),e}function U(x,p){const e={roughness:.5,bowing:3,disableMultiStroke:!0,preserveVertices:!0},f=lt.generator({options:{...e,...p}}),h=new Map;return x.forEach((o,M)=>{const i=()=>{const a=f.path(o.d),_=f.toPaths(a).map(c=>c.d);return P.fromStrings(_)},g=new st(i,o.advance,o.fontMetrics);h.set(M,g)}),h}{let x=function(V){return V.length==1},p=function(V){let m=1/0,Q=-1/0;V.forEach(C=>{const{description:$,baseline:k}=C,{fontMetrics:F}=$;m=Math.min(m,F.top+k),Q=Math.max(Q,F.bottom+k)});const H=m-1,v=Q+1,L=document.createElementNS("http://www.w3.org/2000/svg","rect");return L.x.baseVal.value=0,L.y.baseVal.value=H,L.width.baseVal.value=100,L.height.baseVal.value=v-H,j.insertBefore(L,V[0].element),L};class e{leftMargin=0;rightMargin=95;x=this.leftMargin;baseline=0;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(d=1){this.baseline+=this.lineHeight*d}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=K(5);getDescription(d){return this.font.get(d)}static join(d){return new P(d.flatMap(m=>m.description.shape.translate(m.x,m.baseline).commands))}displayText(d){return d.map(m=>{const Q=m.description.shape,H=Q.makeElement();return j.appendChild(H),H.style.transform=`translate(${this.x}px,${this.baseline}px)`,{...m,shape:Q,element:H}})}static wordBreak=/^( +|[^ ]+)(.*)/;addText(d){const m=new Set,Q=[];for(;;){const H=e.wordBreak.exec(d);if(!H)break;const v=H[1];if(d=H[2],v[0]==" ")this.addSpace(v.length);else{let L=0;const C=0,$=[...v].flatMap(k=>{const F=this.getDescription(k);if(F){const E=F.advance+F.fontMetrics.defaultKerning,T={x:L,width:E,baseline:C,description:F,char:k};return L+=E,T}else return m.add(k),[]});this.x+L>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),$.forEach(k=>{k.x+=this.x,k.baseline=this.baseline,Q.push(k)}),this.x+=L}}return m.size>0&&console.warn(m),Q}addSpace(d=1){this.x+=this.font.get("0").fontMetrics.spaceWidth*d}}class f{leftMargin=5;rightMargin=95;x=this.leftMargin;baseline=10;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(d=1){this.baseline+=this.lineHeight*d}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=K(5);getDescription(d){return this.font.get(d)}makeRoom(d){this.x+d.advance>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed())}advance(d){this.x+=d.advance+d.fontMetrics.defaultKerning}moveToCursor(d){d.style.transform=`translate(${this.x}px,${this.baseline}px)`}showAndAdvance(d,m){this.x+m>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),j.appendChild(d),d.style.transform=`translate(${this.x}px,${this.baseline}px)`,this.x+=m}show1(d){this.makeRoom(d);const m=d.makeElement();j.appendChild(m);const{x:Q,baseline:H}=this;return this.moveToCursor(m),this.advance(d),{element:m,x:Q,baseline:H}}splitAndShow1(d){this.makeRoom(d);const m=d.makeElements();return m.forEach(({element:Q})=>{j.appendChild(Q),this.moveToCursor(Q)}),this.advance(d),m}show(d){const m=new Set,Q=[...d].flatMap(H=>{const v=this.getDescription(H);return v?{...this.show1(v),description:v,char:H}:H==" "?(this.showSpace(),[]):(m.add(H),[])});return m.size>0&&console.warn(m),Q}splitAndShow(d){const m=new Set,Q=[...d].flatMap(H=>{const v=this.getDescription(H);return v?this.splitAndShow1(v):H==" "?(this.showSpace(),[]):(m.add(H),[])});return m.size>0&&console.warn(m),Q}showSpace(){this.x+=this.font.get("0").fontMetrics.spaceWidth}}const h=new f;let o="";h.font.forEach((V,d)=>{x(d)&&(o+=d)}),h.show(o),h.CRLF();{const V=h.show(o);V.forEach(({element:d})=>{d.classList.add("lights")}),p(V).style.fill="black"}h.CRLF();const M=h.splitAndShow(o),i=V=>{if(V==0)return 0;const d=M[V].innerShape,m=M[V-1].innerShape,Q=Math.hypot(m.endX-d.startX,m.endY-d.startY);return O(Q),Q},{totalLength:g,maxLength:a}=M.reduce(({totalLength:V,maxLength:d},{element:m},Q)=>{const H=m.getTotalLength();return O(H),V+=i(Q)+H,d=Math.max(d,H),{totalLength:V,maxLength:d}},{totalLength:0,maxLength:0}),y=Math.ceil(a)+1,_=`0 ${y} ${y} 0`;async function c(){for(;;){let m=0,Q;M.forEach(({element:H},v)=>{const L=H.getTotalLength();m+=i(v);const C=1e3+m/g*3e4;m+=L;const $=L/g*3e4;Q=H.animate([{strokeDasharray:_,strokeDashoffset:1e-5},{strokeDasharray:_,strokeDashoffset:-L}],{delay:C,duration:$,fill:"backwards"})}),await Q.finished,await nt(3e3)}}c(),h.CRLF(),h.font=ft(5,3),h.show("Small  Caps"),h.lineHeight*=1.125;const X=K(new ot(6,.5)),A=gt(X),t=[{roughness:.4,title:"Heartbeat"},{roughness:.44,title:"Toggle (snap)"},{roughness:.5,title:"Skywriting"},{roughness:.54,title:"Do the Wave"},{roughness:.59,title:"Wavy Lights."},{roughness:.64,title:"Blustery day.i"}].map(V=>{const{roughness:d,title:m}=V;return h.font=U(A,{roughness:d}),h.CRLF(),h.show(`${Math.round(d*100)} ${m??"Rough Font"} [4XxYyZ]`)}),n=t[0],s=t[1],r=t[2],l=t[3],w=t[4],S=t[5],b=U(A,{roughness:0});p(w).style.fill="black",w.forEach(({element:V})=>{V.classList.add("lights")}),[w,S].forEach(V=>{V.forEach(d=>{function m(){return Math.random()+.5|0}const Q=3+m()+m()+m(),H=rt(Q,()=>({d:d.description.cssPath}));H.push(H[0]);const v=Q*1e4/3,L=v/8,C=Math.exp(N(Math.log(L),Math.log(v),Math.random()));d.element.animate(H,{duration:C,iterations:1/0})})}),s.forEach(V=>{const d=b.get(V.char).cssPath,m=V.element.style.d,Q=.03,H=[{offset:0,d:m},{offset:Q,d},{offset:.5,d},{offset:Q+.5,d:m},{offset:1,d:m}];V.element.animate(H,{duration:2e3,iterations:1/0})});{const H=l.length,v=H*3,L=5e3;l.forEach((C,$)=>{const k=b.get(C.char).cssPath,F=C.element.style.d,E=C.element.style.transform,T=E+" scale(1.32)",R={d:k,transform:E},I={d:F,transform:T},z=[{offset:0,...R},{offset:4/v,...I},{offset:6/v,...I},{offset:14/v,...R},{offset:1,...R}];C.element.animate(z,{duration:L,iterationStart:1-$/H,iterations:1/0})})}{const V=r;p(V).style.fill="hwb(190 10% 0% / 1)",V.forEach(d=>{const m=b.get(d.char).cssPath,Q=d.element.style.d,H=1/16,v=15/16,L=14e3,C=[{offset:0,strokeWidth:.5},{offset:H,strokeWidth:.5},{offset:v,strokeWidth:2.25},{offset:1,strokeWidth:2.25}],$=[{offset:0,d:m},{offset:H,d:m,easing:"cubic-bezier(0.275, 0.760, 0.495, 1.005)"},{offset:v,d:Q},{offset:1,d:Q}],k=[{offset:0,opacity:1},{offset:H,opacity:1,easing:"cubic-bezier(0.280, 0.650, 0.630, 1.000)"},{offset:v,opacity:0},{offset:1,opacity:0}];d.element.animate(k,{duration:L,iterations:1/0}),d.element.animate($,{duration:L,iterations:1/0}),d.element.animate(C,{duration:L,iterations:1/0}),d.element.style.stroke="white"})}n.forEach(V=>{const d=b.get(V.char).cssPath,m=V.element.style.d,Q=750,H="cubic-bezier(.55,0,1,.55)";V.element.animate([{offset:0,d,easing:H},{offset:.5,d:m,easing:H},{offset:1,d}],{duration:Q,iterations:1/0})});{h.CRLF();const V=.25,d=1.5,m="The more I drink the more I want to tell you what I really think about you.",Q=pt(0,V,m.length-1,d),H=[...m].flatMap((E,T)=>(h.font=U(A,{roughness:Q(T)}),h.splitAndShow(E))),v=E=>{if(E==0)return 0;const T=H[E].innerShape,R=H[E-1].innerShape,I=Math.hypot(R.endX-T.startX,R.endY-T.startY);return O(I),I},{totalLength:L,maxLength:C}=H.reduce(({totalLength:E,maxLength:T},{element:R},I)=>{const z=R.getTotalLength();return E+=v(I)+z,T=Math.max(T,z),{totalLength:E,maxLength:T}},{totalLength:0,maxLength:0}),$=Math.ceil(C)+1,k=`0 ${$} ${$} 0`;async function F(){for(;;){let R=0,I;H.forEach(({element:z},at)=>{const G=z.getTotalLength();R+=v(at);const ct=1e3+R/L*3e4;R+=G;const it=G/L*3e4;I=z.animate([{strokeDasharray:k,strokeDashoffset:1e-5},{strokeDasharray:k,strokeDashoffset:-G}],{delay:ct,duration:it,fill:"backwards"})}),await I.finished,await nt(3e3)}}F()}{let V=function(k){const F=new e;F.font=X;const E=F.addText(k),T=e.join(E),R=F.x;return{shape:T,advance:R}};h.font=X,h.CRLF();const d=V("Stop"),m=V("Go");h.CRLF();const Q=d.shape.makeElement();h.showAndAdvance(Q,d.advance),h.showSpace();const H=m.shape.makeElement();h.showAndAdvance(H,m.advance);const v=m.shape.matchForMorph(d.shape);console.log({goCommands:m.shape.commands,stopCommands:d.shape.commands,goString:v.pathForThis,stopString:v.pathForOther});const L=v.pathForThis,C=v.pathForOther,$=d.shape.makeElement();h.showSpace(),h.showAndAdvance($,d.advance),h.showAndAdvance($,d.advance),$.animate([{d:L},{d:L,easing:"ease"},{d:C},{d:C,easing:"ease"},{d:L}],{duration:5e3,iterations:1/0})}h.x>h.rightMargin&&h.CRLF(),j.viewBox.baseVal.height=h.baseline+h.font.get("0").fontMetrics.bottom}
