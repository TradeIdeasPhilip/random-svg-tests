import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as R}from"./client-misc-ZHNZ3-cL.js";import{b as E}from"./utility-D9E8BDCl.js";import{P as g}from"./path-shape-fljILaqi.js";import{m as y}from"./misc-wGF4FraP.js";const P=1e-4;class M{compute(t,n,e){let r=0;for(let s=0;s<e;s++){const i=this.constant(n,s);r+=i*(t-n)**s}return r}invalid(t){return this.badPoints.some(({real:n,imaginary:e})=>t==n&&e==0)}validRanges(){const t=this.badPoints.flatMap(({real:e,imaginary:r})=>r==0?[e]:[]).sort((e,r)=>e-r);return t.push(1/0),t.map((e,r,s)=>({from:(s[r-1]??-1/0)+P,to:e-P}))}radiusOfConvergence(t){return Math.min(...this.badPoints.map(n=>Math.hypot(t-n.real,n.imaginary)))}partialSum(t,n){const e=y.initializedArray(n,s=>this.constant(t,s));function r(s){const i=s-t;let a=0;return e.forEach((o,l)=>a+=o*i**l),a}return r}}class v extends M{numberOfTerms=1/0;constant(t,n){if(t===0)throw new Error("Reciprocal is undefined at x0 = 0");return(-1)**n/t**(n+1)}f(t){if(t===0)throw new Error("Reciprocal is undefined at x = 0");return 1/t}static instance=new this;badPoints=[{real:0,imaginary:0}]}class $ extends M{numberOfTerms=1/0;constant(t,n){const e=t+n*Math.PI/2;let r=1;for(let s=1;s<=n;s++)r*=s;return Math.sin(e)/r}f(t){return Math.sin(t)}static instance=new this;badPoints=[]}class b extends M{numberOfTerms=12;constant(t,n){const e=1+t*t;switch(n){case 0:return 1/e;case 1:return-2*t/e**2;case 2:return(3*t*t-1)/e**3;case 3:return 2*t*(3-5*t*t)/e**4;case 4:return(25*t**4-38*t*t+3)/(2*e**5);case 5:return t*(2842*t*t-1450*t**4-636)/(5*e**6);case 6:return(-7700*t**6+20316*t**4-9120*t*t+216)/(12*e**7);case 7:return t*(29718*t**4-46410*t*t+10869)/(3*e**8);case 8:return(159600*t**8-498960*t**6+424116*t**4-90456*t*t+2268)/(48*e**9);case 9:return t*(-672452*t**6+1660530*t**4-987318*t*t+117693)/(30*e**10);case 10:return(8044400*t**10-30524376*t**8+35128260*t**6-13524948*t**4+1475730*t*t-18360)/(720*e**11);case 11:return t*(29887350*t**8-96204090*t**6+87415950*t**4-22994430*t*t+1596795)/(180*e**12);default:throw new Error(`Term ${n} not implemented.`)}}f(t){return 1/(1+t*t)}static instance=new this;badPoints=[{real:0,imaginary:1},{real:0,imaginary:-1}]}const u=document.documentElement.style;class f{constructor(t){this.which=t,this.#t=E(`[data-center="${t}"]`,SVGCircleElement),this.#e=E(`[data-reconstruction="${t}"]`,SVGPathElement)}#t;#e;hide(){u.setProperty(`--example${this.which}-open-end-display`,"none"),this.#t.style.display="none",this.#e.style.d=""}draw2(t,n,e,r,s){function i(a){const o=t(a),l=n(a);return o*(1-e)+l*e}this.draw(i,r,s)}draw(t,n,e){if(e-=P,e<=0)throw new Error("wtf");const r=-9,s=9,i=n-e,a=n+e,o=Math.max(r,i),l=Math.min(s,a),p=h=>{const d=y.lerp(o,l,h),w=t(d);return{x:d,y:w}},m=g.parametric(p,50);this.#e.style.d=m.cssPath,this.#t.style.display="",this.#t.cx.baseVal.value=n,this.#t.cy.baseVal.value=t(n),isFinite(e)?(u.setProperty(`--example${this.which}-from-x`,i.toString()),u.setProperty(`--example${this.which}-from-y`,t(i).toString()),u.setProperty(`--example${this.which}-to-x`,a.toString()),u.setProperty(`--example${this.which}-to-y`,t(a).toString()),u.setProperty(`--example${this.which}-open-end-display`,"")):u.setProperty(`--example${this.which}-open-end-display`,"none")}precompute(t,n,e){const r=t.radiusOfConvergence(n),s=y.initializedArray(e,a=>t.partialSum(n,a));return a=>{if(a>s.length-1)throw new Error(`Requested: ${a}, Available [0 - ${s.length-1}]`);if(Number.isInteger(a))this.draw(s[a],n,r);else{let o=function(h){const d=l(h),w=p(h);return d*(1-m)+w*m};const l=s[Math.floor(a)],p=s[Math.ceil(a)],m=a%1;this.draw(o,n,r)}}}drawAll(t,n,e){const r=t.radiusOfConvergence(n);if(Number.isInteger(e))this.draw(t.partialSum(n,e),n,r);else{const s=t.partialSum(n,Math.floor(e)),i=t.partialSum(n,Math.ceil(e)),a=e%1;this.draw2(s,i,a,n,r)}}static instances=[new this("1"),new this("2"),new this("3")]}class O{#t=R.getById("original-function",SVGPathElement);hide(){this.#t.style.d=""}draw(t){const r=t.validRanges().flatMap(i=>{const a=Math.max(-9,i.from),o=Math.min(9,i.to);if(a>=o)return[];{const l=m=>{const h=y.lerp(a,o,m),d=t.f(h);return{x:h,y:d}};return g.parametric(l,Math.ceil((o-a)*5)).commands}}),s=new g(r);this.#t.style.d=s.cssPath}static instance=new this}console.log({HiddenPoles:b,Sine:$,Reciprocal:v,TaylorElements:f});{let c=function(e,r){const s=t.radiusOfConvergence(r);e.draw(t.f,r,s)};const t=b.instance;O.instance.draw(t),c(f.instances[0],-2),c(f.instances[1],1),c(f.instances[2],2.5);const n=f.instances[0].precompute(t,-2,Math.min(30,t.numberOfTerms));console.log(n),window.fff=n,n(4)}function A(c,t,...n){const e=[$.instance,v.instance,b.instance],r=e[c%e.length];O.instance.draw(r),f.instances.forEach((s,i)=>{const a=n[i];a===void 0||r.invalid(a)?s.hide():s.drawAll(r,a,t)})}window.debugDraw=A;
