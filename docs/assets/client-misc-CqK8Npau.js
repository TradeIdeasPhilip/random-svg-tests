var L={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.countMap=t.Random=t.phi=t.radiansPerDegree=t.degreesPerRadian=t.FULL_CIRCLE=t.FIGURE_SPACE=t.NON_BREAKING_SPACE=t.MIN_DATE=t.MAX_DATE=t.csvStringToArray=void 0,t.assertClass=a,t.sleep=s,t.testXml=l,t.parseXml=u,t.followPath=d,t.getAttribute=g,t.parseFloatX=E,t.parseIntX=w,t.parseTimeT=C,t.pickAny=S,t.pick=F,t.take=_,t.filterMap=k,t.makePromise=T,t.dateIsValid=R,t.angleBetween=b,t.positiveModulo=h,t.rotateArray=N,t.rectUnion=A,t.rectAddPoint=P,t.dateToFileName=B,t.lerp=U,t.assertFinite=D,t.shuffleArray=X,t.zip=$,t.count=O,t.initializedArray=M,t.sum=j,t.makeLinear=H,t.makeBoundedLinear=G,t.polarToRectangular=z,t.permutations=p;function a(e,n,i="Assertion Failed."){const r=o=>{throw new Error(`${i}  Expected type:  ${n.name}.  Found type:  ${o}.`)};if(e===null)r("null");else if(typeof e!="object")r(typeof e);else if(!(e instanceof n))r(e.constructor.name);else return e;throw new Error("wtf")}function s(e){return new Promise(n=>{setTimeout(n,e)})}function l(e){const i=new DOMParser().parseFromString(e,"application/xml");for(const r of Array.from(i.querySelectorAll("parsererror")))if(r instanceof HTMLElement)return{error:r};return{parsed:i}}function u(e){if(e!==void 0)return l(e)?.parsed?.documentElement}function d(e,...n){for(const i of n){if(e===void 0)return;if(typeof i=="number")e=e.children[i];else{const r=e.getElementsByTagName(i);if(r.length!=1)return;e=r[0]}}return e}function g(e,n,...i){if(n=d(n,...i),n!==void 0&&n.hasAttribute(e))return n.getAttribute(e)??void 0}function E(e){if(e==null)return;const n=+e;if(isFinite(n))return n}function w(e){const n=E(e);if(n!==void 0)return n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER||n!=Math.floor(n)?void 0:n}function C(e){if(typeof e=="string"&&(e=w(e)),e!=null&&!(e<=0))return new Date(e*1e3)}const I=e=>{const n=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,i=[[]];let r;for(;r=n.exec(e);)r[1].length&&r[1]!==","&&i.push([]),i[i.length-1].push(r[2]!==void 0?r[2].replace(/""/g,'"'):r[3]);return i};t.csvStringToArray=I;function S(e){const n=e.values().next();if(!n.done)return n.value}function F(e){if(e.length==0)throw new Error("wtf");return e[Math.random()*e.length|0]}function _(e){if(e.length<1)throw new Error("wtf");const n=Math.random()*e.length|0;return e.splice(n,1)[0]}function k(e,n){const i=[];return e.forEach((r,o)=>{const c=n(r,o);c!==void 0&&i.push(c)}),i}function T(){let e,n;return{promise:new Promise((r,o)=>{e=r,n=o}),resolve:e,reject:n}}t.MAX_DATE=new Date(864e13),t.MIN_DATE=new Date(-864e13);function R(e){return isFinite(e.getTime())}t.NON_BREAKING_SPACE=" ",t.FIGURE_SPACE=" ",t.FULL_CIRCLE=2*Math.PI,t.degreesPerRadian=360/t.FULL_CIRCLE,t.radiansPerDegree=t.FULL_CIRCLE/360,t.phi=(1+Math.sqrt(5))/2;function b(e,n){const i=h(e,t.FULL_CIRCLE);let o=h(n,t.FULL_CIRCLE)-i;const c=t.FULL_CIRCLE/2;if(o>c?o-=t.FULL_CIRCLE:o<-c&&(o+=t.FULL_CIRCLE),Math.abs(o)>c)throw new Error("wtf");return o}function h(e,n){const i=e%n;return i<0?i+Math.abs(n):i}function N(e,n){if((n|0)!=n)throw new Error(`invalid input: ${n}`);return n=h(n,e.length),n==0?e:[...e.slice(n),...e.slice(0,n)]}class y{static sfc32(n,i,r,o){return function(){n|=0,i|=0,r|=0,o|=0;let c=(n+i|0)+o|0;return o=o+1|0,n=i^i>>>9,i=r+(r<<3)|0,r=r<<21|r>>>11,r=r+c|0,(c>>>0)/4294967296}}static#e=42;static create(n=this.newSeed()){console.info(n);const i=JSON.parse(n);if(!(i instanceof Array))throw new Error("invalid seed");if(i.length!=4)throw new Error("invalid seed");const[r,o,c,m]=i;if(!(typeof r=="number"&&typeof o=="number"&&typeof c=="number"&&typeof m=="number"))throw new Error("invalid seed");return this.sfc32(r,o,c,m)}static newSeed(){const n=[];return n.push(Date.now()),n.push(this.#e++),n.push(Math.random()*2**31|0),n.push(Math.random()*2**31|0),JSON.stringify(n)}}t.Random=y;function A(e,n){const i=Math.min(e.x,n.x),r=Math.min(e.y,n.y),o=Math.max(e.x+e.width,n.x+n.width),c=Math.max(e.y+e.height,n.y+n.height),m=o-i,q=c-r;return{x:i,y:r,width:m,height:q}}function P(e,n,i){return A(e,{x:n,y:i,width:0,height:0})}function B(e){return isNaN(e.getTime())?"0000⸱00⸱00 00⦂00⦂00":`${e.getFullYear().toString().padStart(4,"0")}⸱${(e.getMonth()+1).toString().padStart(2,"0")}⸱${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}⦂${e.getMinutes().toString().padStart(2,"0")}⦂${e.getSeconds().toString().padStart(2,"0")}`}function U(e,n,i){return e+(n-e)*i}function D(...e){e.forEach(n=>{if(!isFinite(n))throw new Error("wtf")})}function X(e){for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}function*$(...e){const n=e.map(i=>i[Symbol.iterator]());for(;;){const i=n.map(r=>r.next());if(i.some(({done:r})=>r))break;yield i.map(({value:r})=>r)}}function*O(e=0,n=1/0,i=1){for(let r=e;r<n;r+=i)yield r}function M(e,n){const i=[];for(let r=0;r<e;r++)i.push(n(r));return i}t.countMap=M;function j(e){return e.reduce((n,i)=>n+i,0)}function H(e,n,i,r){const o=(r-n)/(i-e);return function(c){return(c-e)*o+n}}function G(e,n,i,r){i<e&&([e,n,i,r]=[i,r,e,n]);const o=(r-n)/(i-e);return function(c){return c<=e?n:c>=i?r:(c-e)*o+n}}function z(e,n){return{x:Math.cos(n)*e,y:Math.sin(n)*e}}function*p(e,n=[]){if(e.length==0)yield n;else for(let i=0;i<e.length;i++){const r=e[i],o=[...n,r],c=[...e.slice(0,i),...e.slice(i+1)];yield*p(c,o)}}})(L);var f={};Object.defineProperty(f,"__esModule",{value:!0});var W=f.AnimationLoop=void 0,ne=f.getById=J;f.loadDateTimeLocal=K;f.getBlobFromCanvas=V;f.getAudioBalanceControl=Y;f.getHashInfo=Q;f.createElementFromHTML=Z;f.download=x;const v=L;function J(t,a){const s=document.getElementById(t);if(!s)throw new Error("Could not find element with id "+t+".  Expected type:  "+a.name);if(s instanceof a)return s;throw new Error("Element with id "+t+" has type "+s.constructor.name+".  Expected type:  "+a.name)}function K(t,a,s="milliseconds"){let l;switch(s){case"minutes":{l=a.getSeconds()*1e3+a.getMilliseconds();break}case"seconds":{l=a.getMilliseconds();break}case"milliseconds":{l=0;break}default:throw new Error("wtf")}t.valueAsNumber=+a-a.getTimezoneOffset()*6e4-l}function V(t){const{reject:a,resolve:s,promise:l}=(0,v.makePromise)();return t.toBlob(u=>{u?s(u):a(new Error("blob is null!"))}),l}function Y(t){const a=new AudioContext,s=a.createMediaElementSource(t),l=new StereoPannerNode(a,{pan:0});return s.connect(l).connect(a.destination),u=>{l.pan.value=u}}function Q(){const t=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(l=>{const u=l.split("=",2);if(u.length==2){const d=decodeURIComponent(u[0]),g=decodeURIComponent(u[1]);t.set(d,g)}}),t}function Z(t,a){var s=document.createElement("div");return s.innerHTML=t.trim(),(0,v.assertClass)(s.firstChild,a,"createElementFromHTML:")}function x(t,a){var s=document.createElement("a");if(s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),s.setAttribute("download",t),document.createEvent){var l=document.createEvent("MouseEvents");l.initEvent("click",!0,!0),s.dispatchEvent(l)}else s.click()}class ee{onWake;constructor(a){this.onWake=a,this.callback=this.callback.bind(this),requestAnimationFrame(this.callback)}#e=!1;cancel(){this.#e=!0}callback(a){this.#e||(requestAnimationFrame(this.callback),this.onWake(a))}}W=f.AnimationLoop=ee;export{W as A,ne as g,L as m};
