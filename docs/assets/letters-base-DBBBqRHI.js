import{m}from"./misc-BHUyxQfl.js";import{P as d}from"./path-shape-DRm3ZWo5.js";class f{constructor(e,n,t){this.advance=n,this.fontMetrics=t,e instanceof d?this.#t=()=>e:this.#t=e}reshape(e){return new f(e,this.advance,this.fontMetrics)}#t;get shape(){return this.#t()}get cssPath(){return this.shape.cssPath}get d(){return this.shape.rawPath}makeElement(){return this.shape.makeElement()}makeElements(){return this.shape.splitOnMove().map(e=>({innerShape:e,element:e.makeElement()}))}}function g(r,e){const n=new Map,t=m.pickAny(r)?.fontMetrics;if(t){const s=e/t.mHeight,o={bottom:s*t.bottom,capitalTop:s*t.capitalTop,defaultKerning:s*t.defaultKerning,mHeight:s*t.mHeight,spaceWidth:s*t.spaceWidth,strokeWidth:s*t.strokeWidth,top:s*t.top},i=new DOMMatrix;i.scaleSelf(s),r.forEach((a,c)=>{if(a.fontMetrics!=t)throw new Error("wtf");const h=new f(a.shape.transform(i),a.advance*s,o);n.set(c,h)})}return n}function k(r){function e(s){return s.length==1}let n="",t=[];return r.forEach((s,o)=>{e(o)?n+=o:t.push(s)}),{normal:n,special:t}}function E(r){const e=(r.get("0")??m.pickAny(r))?.fontMetrics;if(!e)throw new Error("wtf");const{top:n,bottom:t,spaceWidth:s,strokeWidth:o,defaultKerning:i,mHeight:a}=e,c=Array.from(r,([h,p])=>{const{d:l,advance:u}=p;return{key:h,d:l,advance:u}});return{top:n,bottom:t,spaceWidth:s,strokeWidth:o,kerning:i,mHeight:a,letters:c}}export{f as D,k as d,E as f,g as r};
