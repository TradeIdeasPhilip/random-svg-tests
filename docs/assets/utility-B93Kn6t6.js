import{m as u}from"./misc-wGF4FraP.js";function w(n,t,e=1,r=1/0,s=document){const o=[];if(s.querySelectorAll(n).forEach(i=>{o.push(u.assertClass(i,t))}),o.length<e||o.length>r)throw new Error(`Expecting "${n}" to return [${e} - ${r}] instances of ${t.name}, found ${o.length}.`);return o}function p(n,t,e=document){return w(n,t,1,1,e)[0]}class m{constructor(){throw new Error("wtf")}static sfc32(t,e,r,s){function o(){t|=0,e|=0,r|=0,s|=0;let c=(t+e|0)+s|0;return s=s+1|0,t=e^e>>>9,e=r+(r<<3)|0,r=r<<21|r>>>11,r=r+c|0,(c>>>0)/4294967296}const i=o;return Object.defineProperty(i,"currentSeed",{get(){return JSON.stringify([t,e,r,s])}}),i}static#t=42;static seedIsValid(t){try{return this.create(t),!0}catch{return!1}}static create(t=this.newSeed()){console.info(t);const e=JSON.parse(t);if(!(e instanceof Array))throw new Error("invalid input");if(e.length!=4)throw new Error("invalid input");const[r,s,o,i]=e;if(!(typeof r=="number"&&typeof s=="number"&&typeof o=="number"&&typeof i=="number"))throw new Error("invalid input");return this.sfc32(r,s,o,i)}static newSeed(){const t=[];return t.push(Date.now()|0),t.push(this.#t++|0),t.push(Math.random()*2**31|0),t.push(performance.now()*1e4|0),JSON.stringify(t)}static test(){const r=[this.create()];for(;r.length<=10;){for(let o=0;o<20;o++){const i=r.map(c=>c());for(let c=1;c<i.length;c++)if(i[c]!==i[0]){debugger;throw new Error("wtf")}}const s=u.pick(r).currentSeed;r.forEach(o=>{if(o.currentSeed!=s){debugger;throw new Error("wtf")}}),r.push(this.create(s))}}}window.Random=m;function a(n){if(!(Number.isFinite(n)&&n>=0&&n<=1))throw new Error(`t should be between 0 and 1, inclusive. t == ${n}`)}function E(...n){n.forEach(r=>{if(!(r>=0&&r<Number.MAX_SAFE_INTEGER))throw new Error("wtf")});const t=u.sum(n);if(t==0)throw new Error("wtf");return r=>{a(r),r*=t;for(let s=0;s<n.length;s++){const o=n[s];if(r<=o)return r/=o,{t:r,index:s};r-=o}throw new Error("wtf")}}function g(n,t,e){const r=n+t+e,s=u.makeBoundedLinear(n/r,0,(n+t)/r,1);return i=>{a(i);const c=s(i)*t,f=Math.min(c|0,t-1),l=c-f;return a(l),{t:l,index:f}}}function S(n){const t=2/(n+1),e=1-t;return s=>e*s*s+t*s}function h(n,t){return t?h(t,n%t):n}function y(n,t){return n*t/h(n,t)}class b{#t;constructor(t=60){if(u.assertFinite(t),t<1||t!=(t|0))throw new Error("wtf");this.#t=t,this.fromMSF=this.fromMSF.bind(this),this.fromString=this.fromString.bind(this),Object.freeze(this)}get framesPerSecond(){return this.#t}fromMSF(t,e,r){return(t*60+e)*this.#t+r}fromString(t){const e=/^([0-9]+):([0-9]+):([0-9]+)$/.exec(t);if(!e)throw new Error("wtf");const r=u.parseIntX(e[1]),s=u.parseIntX(e[2]),o=u.parseIntX(e[3]);if(r===void 0||s===void 0||o===void 0)throw new Error("wtf");return this.fromMSF(r,s,o)}}export{b as G,m as R,a,p as b,S as c,g as d,y as l,E as m,w as s};
