import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as S,Q as i,a as D}from"./path-shape-Cey3Rpwf.js";import{c as v}from"./client-misc-B8CxQsfg.js";import{m as d}from"./misc-BHUyxQfl.js";import{c as H}from"./path-debugger-widget-DG5TQRtF.js";import{a as N}from"./utility-Dgy6CMn3.js";import{m as O}from"./rough-lib-CXvMA3yw.js";import"./math-to-path-DHD-XsCZ.js";const u=v.getById("pathInputElement",HTMLInputElement),L=v.getById("displaySinglePath",HTMLButtonElement),T=v.getById("singlePathErrorMessage",HTMLSpanElement),q=v.getById("randomSeed",HTMLInputElement),X=v.getById("roughness",HTMLInputElement),_=v.getById("displayRough",HTMLButtonElement),b=H();b.insertBefore("insertPathDebuggerHere");const p=H();p.insertBefore("insertProcessingPathDebuggerHere");{let o=function(){const c=b.pathShape;if(!c)p.pathShape=void 0;else{const e=b.selectedIndex,h=d.assertClass(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value,a=c.commands;switch(h){case"select":{p.pathShape=c,p.selectedIndex=e;break}case"mergeWithNext":{if(e<0||e>=a.length-1)p.pathShape=void 0;else{const n=a[e],r=a[e+1];if(!(n instanceof i&&r instanceof i))throw new Error("wtf");const t=i.angles(n.x0,n.y0,n.requestedIncomingAngle,r.x,r.y,r.requestedOutgoingAngle);p.pathShape=new S(a.toSpliced(e,2,t)),p.selectedIndex=e}break}case"deleteThenMerge":{if(e<1||e>=a.length-1)p.pathShape=void 0;else{const n=a[e-1],r=a[e],t=a[e+1];if(!(n instanceof i&&r instanceof i&&t instanceof i))throw new Error("wtf");const g=(n.x+t.x0)/2,l=(n.y+t.y0)/2,m=n.requestedOutgoingAngle,E=t.requestedIncomingAngle,s=N(m,E),w=i.angles(n.x0,n.y0,n.requestedIncomingAngle,g,l,s),x=i.angles(g,l,s,t.x,t.y,t.requestedOutgoingAngle),y=a.toSpliced(e-1,3,w,x);p.pathShape=new S(y),p.selectedIndex=e-1}break}case"recreate":{const n=a.map((r,t,g)=>{if(t!=e)return r;{const l=g[t-1],m=l?l instanceof i?l.requestedOutgoingAngle:l.outgoingAngle:r.incomingAngle,E=g[t+1],s=E?E instanceof i?E.requestedIncomingAngle:E.incomingAngle:r.outgoingAngle;return i.angles(r.x0,r.y0,m,r.x,r.y,s)}});p.pathShape=new S(n),p.selectedIndex=e;break}default:throw new Error("wtf")}}};b.listeners.push(o),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(c=>c.addEventListener("click",o))}L.addEventListener("click",()=>{b.pathShape=void 0;const o=u.value,c=S.fromString(o);b.pathShape=c,u.selectionStart=0,u.selectionEnd=Number.MAX_SAFE_INTEGER,u.focus()});u.addEventListener("keyup",o=>{o.code=="Enter"&&(L.click(),o.preventDefault())});{let o=()=>{};const c=()=>{const e=u.value;if(e.trim()==="")u.style.backgroundColor="",L.disabled=!0,T.innerText="";else try{S.fromString(e),L.disabled=!1,T.innerText=""}catch(h){if(!(h instanceof D))throw h;L.disabled=!0,T.innerText=h.message,o=()=>{u.focus(),u.setSelectionRange(e.length-h.where.length,e.length)}}};u.addEventListener("input",c),u.value="M 217.7,147.93 L 212.3274,201.107 Q 211.0302,213.94645 211.0302,228.9 Q 211.0302,255.57274 217.1449,261.14 Q 223.2502,266.6987 231.4119,266.6987 Q 249.1989,266.6987 252.5349,244.2787 L 259.3906,244.2787 Q 253.2759,295.7877 218.4426,295.7877 Q 181.9416,295.7877 181.9416,253.9137 Q 181.9416,233.01008 186.0165,201.2927 L 192.8722,147.9307 L 174.5292,147.9307 Q 159.39785,147.9307 150.8132,153.1189 Q 142.45157,158.17231 135.2492,173.4999 L 128.579,173.4999 Q 134.4619,153.27806 142.66,141.2599 Q 150.8129,129.308 158.224,125.1399 Q 165.80134,120.8783 180.273,120.8783 L 271.433,120.8783 L 271.433,147.9303 L 217.7,147.93",c(),T.parentElement.addEventListener("click",()=>o())}{let o=function(t,g){const l=document.createElement("th");t.appendChild(l),g!==void 0&&l.append((g*d.degreesPerRadian).toFixed(1)+"Â° "+g.toFixed(3))};const c=v.getById("byAngle",HTMLTableElement),e=0,h=5,a=d.initializedArray(h,t=>e+Math.PI*2*t/h),n=3,r=d.initializedArray(n,t=>e+Math.PI*2*t/n);{const t=c.insertRow();o(t),a.forEach(g=>{o(t,g)})}r.forEach((t,g)=>{const l=c.insertRow();o(l,t),a.forEach((m,E)=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("angles");const w=0,x=1,y=0,k=1;s.viewBox.baseVal.x=w,s.viewBox.baseVal.y=y,s.viewBox.baseVal.width=x-w,s.viewBox.baseVal.height=k-y,l.insertCell().appendChild(s);function P(I,A){const M=document.createElementNS("http://www.w3.org/2000/svg","line"),F=.2,[C,Q,V]=A?[w,y,I+Math.PI]:[x,k,I],R=d.polarToRectangular(F,V);M.x1.baseVal.value=C,M.x2.baseVal.value=C+R.x,M.y1.baseVal.value=Q,M.y2.baseVal.value=Q+R.y,s.appendChild(M)}P(m,!0),P(t,!1);const B=document.createElementNS("http://www.w3.org/2000/svg","path"),f=i.angles(w,y,m,x,k,t);if(f.creationInfo.success){const I=new S([f]).rawPath;B.setAttribute("d",I),s.appendChild(B);const A=Math.abs(d.angleBetween(m,f.incomingAngle))+Math.abs(d.angleBetween(t,f.outgoingAngle));A>d.radiansPerDegree?(console.error({error:A,degrees:A*d.degreesPerRadian,path:B,inExpected:m,inFound:f.incomingAngle,outExpected:t,outFound:f.outgoingAngle,qCommand:f}),s.style.backgroundColor="lightpink"):s.style.backgroundColor="rgb(26, 217, 255)"}else s.style.backgroundColor="hsl(190 100% 85% / 1)";s.addEventListener("click",()=>{console.log({inExpected:m,inFound:f?.incomingAngle,outExpected:t,outFound:f?.outgoingAngle,qCommand:f});const I=i.angles(w,y,m,x,k,t);console.log(I)})})})}L.click();_.addEventListener("click",()=>{let o=q.value;d.Random.seedIsValid(o)||(o=d.Random.newSeed(),q.value=o);const c=d.Random.create(o);let e=d.parseFloatX(X.value);if(e===void 0||e<0)alert("Invalid roughness");else{console.log(e);const h=u.value,a=S.fromString(h),n=O(a,e,c).after;console.log(e,a,n),b.pathShape=n}});
