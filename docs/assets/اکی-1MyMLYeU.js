import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as O}from"./client-misc-ZHNZ3-cL.js";import{b as f,s as g}from"./utility-D9E8BDCl.js";import{P as E}from"./path-shape-fljILaqi.js";import{m as y}from"./misc-wGF4FraP.js";const v=1e-4;class M{compute(t,n,e){let s=0;for(let r=0;r<e;r++){const i=this.constant(n,r);s+=i*(t-n)**r}return s}invalid(t){return this.badPoints.some(({real:n,imaginary:e})=>t==n&&e==0)}validRanges(){const t=this.badPoints.flatMap(({real:e,imaginary:s})=>s==0?[e]:[]).sort((e,s)=>e-s);return t.push(1/0),t.map((e,s,r)=>({from:(r[s-1]??-1/0)+v,to:e-v}))}radiusOfConvergence(t){return Math.min(...this.badPoints.map(n=>Math.hypot(t-n.real,n.imaginary)))}partialSum(t,n){const e=y.initializedArray(n,r=>this.constant(t,r));function s(r){const i=r-t;let a=0;return e.forEach((c,u)=>a+=c*i**u),a}return s}}class P extends M{numberOfTerms=1/0;constant(t,n){if(t===0)throw new Error("Reciprocal is undefined at x0 = 0");return(-1)**n/t**(n+1)}f(t){if(t===0)throw new Error("Reciprocal is undefined at x = 0");return 1/t}static instance=new this;badPoints=[{real:0,imaginary:0}]}class L extends M{numberOfTerms=1/0;constant(t,n){const e=t+n*Math.PI/2;let s=1;for(let r=1;r<=n;r++)s*=r;return Math.sin(e)/s}f(t){return Math.sin(t)}static instance=new this;badPoints=[]}class S extends M{numberOfTerms=12;constant(t,n){const e=1+t*t;switch(n){case 0:return 1/e;case 1:return-2*t/e**2;case 2:return(3*t*t-1)/e**3;case 3:return 2*t*(3-5*t*t)/e**4;case 4:return(25*t**4-38*t*t+3)/(2*e**5);case 5:return t*(2842*t*t-1450*t**4-636)/(5*e**6);case 6:return(-7700*t**6+20316*t**4-9120*t*t+216)/(12*e**7);case 7:return t*(29718*t**4-46410*t*t+10869)/(3*e**8);case 8:return(159600*t**8-498960*t**6+424116*t**4-90456*t*t+2268)/(48*e**9);case 9:return t*(-672452*t**6+1660530*t**4-987318*t*t+117693)/(30*e**10);case 10:return(8044400*t**10-30524376*t**8+35128260*t**6-13524948*t**4+1475730*t*t-18360)/(720*e**11);case 11:return t*(29887350*t**8-96204090*t**6+87415950*t**4-22994430*t*t+1596795)/(180*e**12);default:throw new Error(`Term ${n} not implemented.`)}}f(t){return 1/(1+t*t)}static instance=new this;badPoints=[{real:0,imaginary:1},{real:0,imaginary:-1}]}const p=document.documentElement.style;class ${constructor(t){this.which=t,this.#t=f(`[data-center="${t}"]`,SVGCircleElement),this.#e=f(`[data-reconstruction="${t}"]`,SVGPathElement)}#t;#e;hide(){p.setProperty(`--example${this.which}-open-end-display`,"none"),this.#t.style.display="none",this.#e.style.d=""}draw2(t,n,e,s,r,i){function a(c){const u=t(c),h=n(c);return u*(1-e)+h*e}this.draw(a,s,r,i)}draw(t,n,e,s){if(e-=v,e<=0)throw new Error("wtf");const r=-9,i=9,a=n-e,c=n+e,u=Math.max(r,a),h=Math.min(i,c),o=d=>{const w=y.lerp(u,h,d),b=t(w);return{x:w,y:b}},m=E.parametric(o,50);this.#e.style.d=m.cssPath,this.#t.style.display="",this.#t.cx.baseVal.value=n,this.#t.cy.baseVal.value=t(n),isFinite(e)?(p.setProperty(`--example${this.which}-from-x`,a.toString()),p.setProperty(`--example${this.which}-from-y`,t(a).toString()),p.setProperty(`--example${this.which}-from-y-ideal`,s(a).toString()),p.setProperty(`--example${this.which}-to-x`,c.toString()),p.setProperty(`--example${this.which}-to-y`,t(c).toString()),p.setProperty(`--example${this.which}-to-y-ideal`,s(c).toString()),p.setProperty(`--example${this.which}-open-end-display`,"")):p.setProperty(`--example${this.which}-open-end-display`,"none")}precompute(t,n,e){const s=t.radiusOfConvergence(n),r=y.initializedArray(e,a=>t.partialSum(n,a));return a=>{if(a>r.length-1)throw new Error(`Requested: ${a}, Available [0 - ${r.length-1}]`);if(Number.isInteger(a))this.draw(r[a],n,s,t.f);else{let c=function(m){const d=u(m),w=h(m);return d*(1-o)+w*o};const u=r[Math.floor(a)],h=r[Math.ceil(a)],o=a%1;this.draw(c,n,s,t.f)}}}drawAll(t,n,e){const s=t.radiusOfConvergence(n);if(Number.isInteger(e))this.draw(t.partialSum(n,e),n,s,t.f);else{const r=t.partialSum(n,Math.floor(e)),i=t.partialSum(n,Math.ceil(e)),a=e%1;this.draw2(r,i,a,n,s,t.f)}}static instances=[new this("1"),new this("2"),new this("3")]}class A{#t=O.getById("original-function",SVGPathElement);hide(){this.#t.style.d=""}draw(t){const s=t.validRanges().flatMap(i=>{const a=Math.max(-9,i.from),c=Math.min(9,i.to);if(a>=c)return[];{const u=o=>{const m=y.lerp(a,c,o),d=t.f(m);return{x:m,y:d}};return E.parametric(u,Math.ceil((c-a)*5)).commands}}),r=new E(s);this.#t.style.d=r.cssPath}static instance=new this}console.log({HiddenPoles:S,Sine:L,Reciprocal:P,TaylorElements:$});{let l=function(){t()},t=function(){const o=c.map(({use:m,value:d})=>{if(m.checked)return d.valueAsNumber});T(y.parseIntX(e.value),s.valueAsNumber,...o)},n=function(){const o=s.valueAsNumber;Number.isInteger(o)?(u=Math.max(0,o-1),h=Math.min(12,o+1)):(u=Math.floor(o),h=Math.ceil(o)),a.innerText=o.toFixed(3),r.innerText=u.toString(),i.innerText=h.toString()};const e=f("#manual-controls select",HTMLSelectElement),s=f("#manual-controls > input",HTMLInputElement),[r,i]=g("[data-term-stepper] button",HTMLButtonElement,2,2),a=f("[data-term-stepper] span",HTMLSpanElement),c=g("#manual-controls > div[data-x0]",HTMLDivElement,3,3).map(o=>{const[m,d]=g("input",HTMLInputElement,2,2,o);return m.addEventListener("input",l),d.addEventListener("input",()=>{m.checked=!0,l()}),{use:m,value:d}});e.addEventListener("input",t);let u=NaN,h=NaN;s.addEventListener("input",()=>{n(),l()}),r.addEventListener("click",()=>{s.value=u.toString(),n(),l()}),i.addEventListener("click",()=>{s.value=h.toString(),n(),l()}),n(),l()}function T(l,t,...n){const e=[L.instance,P.instance,S.instance],s=e[l%e.length];A.instance.draw(s),$.instances.forEach((r,i)=>{const a=n[i];a===void 0||s.invalid(a)?r.hide():r.drawAll(s,a,t)})}window.debugDraw=T;
