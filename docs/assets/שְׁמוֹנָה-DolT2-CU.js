import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as v,Q as d,b as _}from"./path-shape-T33T0rPM.js";import{g as k,i as D,a as N}from"./client-misc-DWuUZUgy.js";import{c as M,r as O,e as F,a as X}from"./utility-BHSQpXni.js";import{c as H}from"./path-debugger-widget-Rds6Yxwh.js";const r=k("pathInputElement",HTMLInputElement),E=k("displaySinglePath",HTMLButtonElement),P=k("singlePathErrorMessage",HTMLSpanElement),b=H();b.insertBefore("insertPathDebuggerHere");const i=H();i.insertBefore("insertProcessingPathDebuggerHere");{let s=function(){const a=b.pathShape;if(!a)i.pathShape=void 0;else{const n=b.selectedIndex,u=N(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value,c=a.commands;switch(u){case"select":{i.pathShape=a,i.selectedIndex=n;break}case"mergeWithNext":{if(n<0||n>=c.length-1)i.pathShape=void 0;else{const t=c[n],h=c[n+1];if(!(t instanceof d&&h instanceof d))throw new Error("wtf");const e=d.angles(t.x0,t.y0,t.requestedIncomingAngle,h.x,h.y,h.requestedOutgoingAngle);i.pathShape=new v(c.toSpliced(n,2,e)),i.selectedIndex=n}break}case"deleteThenMerge":{if(n<1||n>=c.length-1)i.pathShape=void 0;else{const t=c[n-1],h=c[n],e=c[n+1];if(!(t instanceof d&&h instanceof d&&e instanceof d))throw new Error("wtf");const g=(t.x+e.x0)/2,m=(t.y+e.y0)/2,p=t.requestedOutgoingAngle,L=e.requestedIncomingAngle,o=p+M(p,L)/2,x=d.angles(t.x0,t.y0,t.requestedIncomingAngle,g,m,o),f=d.angles(g,m,o,e.x,e.y,e.requestedOutgoingAngle),y=c.toSpliced(n-1,3,x,f);i.pathShape=new v(y),i.selectedIndex=n-1}break}default:throw new Error("wtf")}}};b.listeners.push(s),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(a=>a.addEventListener("click",s))}E.addEventListener("click",()=>{b.pathShape=void 0;const s=r.value,a=v.fromString(s);b.pathShape=a,r.selectionStart=0,r.selectionEnd=Number.MAX_SAFE_INTEGER,r.focus()});r.addEventListener("keyup",s=>{s.code=="Enter"&&(E.click(),s.preventDefault())});{let s=()=>{};const a=()=>{const n=r.value;if(n.trim()==="")r.style.backgroundColor="",E.disabled=!0,P.innerText="";else try{v.fromString(n),E.disabled=!1,P.innerText=""}catch(u){if(!(u instanceof _))throw u;E.disabled=!0,P.innerText=u.message,s=()=>{r.focus(),r.setSelectionRange(n.length-u.where.length,n.length)}}};r.addEventListener("input",a),r.value='{"commands":[{"command":"Q","x0":3.3834252375489586,"y0":-5.290583568160529,"x1":3.5124925159687312,"y1":-4.91521650454535,"x":3.923523838711351,"y":-6.390972673475774,"creationInfo":{"source":"controlPoints"}},{"command":"Q","x0":3.923523838711351,"y0":-6.390972673475774,"x1":4.1108100128212985,"y1":-6.466342202563827,"x":4.430439233779907,"y":-6.50340723991394,"creationInfo":{"source":"angles","success":true,"angle":-0.11544696419123954,"angle0":-0.38259923659851125}},{"command":"Q","x0":4.430439233779907,"y0":-6.50340723991394,"x1":5.972219790908077,"y1":-6.682196130880309,"x":6.510204512374078,"y":-6.479479922929334,"creationInfo":{"source":"angles","success":true,"angle":0.3603536203789759,"angle0":-0.11544696419123954}},{"command":"Q","x0":6.510204512374078,"y0":-6.479479922929334,"x1":6.939173247993209,"y1":-6.317841660829115,"x":6.641396180151358,"y":-5.547495854436972,"creationInfo":{"source":"angles","success":true,"angle":1.9396542595721606,"angle0":0.3603536203789759}},{"command":"Q","x0":6.641396180151358,"y0":-5.547495854436972,"x1":5.307663756316599,"y1":-2.0971456075334793,"x":3.5016620833773486,"y":0.057679089569650205,"creationInfo":{"source":"angles","success":true,"angle":2.268352878447364,"angle0":1.9396542595721606}},{"command":"Q","x0":3.5016620833773486,"y0":0.057679089569650205,"x1":-0.4130183359576575,"y1":-4.230915592648992,"x":0.06246967653920748,"y":-5.5573408593306795,"creationInfo":{"source":"angles","success":true,"angle":-1.2265929637532862,"angle0":-2.3106449227356665}},{"command":"Q","x0":0.06246967653920748,"y0":-5.5573408593306795,"x1":0.6935031269755637,"y1":-7.317676957784115,"x":1.049137233064081,"y":-6.282651391765099,"creationInfo":{"source":"angles","success":true,"angle":1.2398349909759245,"angle0":-1.2265929637532862}},{"command":"Q","x0":1.049137233064081,"y0":-6.282651391765099,"x1":1.8145243224046117,"y1":-7.238173150017317,"x":1.8376645615343687,"y":-7.062817477932964,"creationInfo":{"source":"angles","success":true,"angle":1.4395926739218026,"angle0":-0.8954368980448406}},{"command":"Q","x0":1.8376645615343687,"y0":-7.062817477932964,"x1":2.032378347714029,"y1":-5.587285325989216,"x":3.069203621414239,"y":-6.475104309626173,"creationInfo":{"source":"angles","success":true,"angle":-0.7081321196429998,"angle0":1.4395926739218026}},{"command":"Q","x0":3.069203621414239,"y0":-6.475104309626173,"x1":2.9496979297966393,"y1":-6.644423797302531,"x":3.1975236237820632,"y":-5.366784833732487,"creationInfo":{"source":"controlPoints"}}]}',a(),P.parentElement.addEventListener("click",()=>s())}{let s=function(e,g){const m=document.createElement("th");e.appendChild(m),g!==void 0&&m.append((g*F).toFixed(1)+"Â° "+g.toFixed(3))};const a=k("byAngle",HTMLTableElement),n=0,u=5,c=D(u,e=>n+Math.PI*2*e/u),t=3,h=D(t,e=>n+Math.PI*2*e/t);{const e=a.insertRow();s(e),c.forEach(g=>{s(e,g)})}h.forEach((e,g)=>{const m=a.insertRow();s(m,e),c.forEach((p,L)=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("angles");const x=0,f=1,y=0,C=1;o.viewBox.baseVal.x=x,o.viewBox.baseVal.y=y,o.viewBox.baseVal.width=f-x,o.viewBox.baseVal.height=C-y,m.insertCell().appendChild(o);function A(w,I){const S=document.createElementNS("http://www.w3.org/2000/svg","line"),V=.2,[Q,B,R]=I?[x,y,w+Math.PI]:[f,C,w],q=X(V,R);S.x1.baseVal.value=Q,S.x2.baseVal.value=Q+q.x,S.y1.baseVal.value=B,S.y2.baseVal.value=B+q.y,o.appendChild(S)}A(p,!0),A(e,!1);const T=document.createElementNS("http://www.w3.org/2000/svg","path"),l=d.angles(x,y,p,f,C,e);if(l.creationInfo.success){const w=new v([l]).rawPath;T.setAttribute("d",w),o.appendChild(T);const I=Math.abs(M(p,l.incomingAngle))+Math.abs(M(e,l.outgoingAngle));I>O?(console.error({error:I,degrees:I*F,path:T,inExpected:p,inFound:l.incomingAngle,outExpected:e,outFound:l.outgoingAngle,qCommand:l}),o.style.backgroundColor="lightpink"):o.style.backgroundColor="rgb(26, 217, 255)"}else o.style.backgroundColor="hsl(190 100% 85% / 1)";o.addEventListener("click",()=>{console.log({inExpected:p,inFound:l?.incomingAngle,outExpected:e,outFound:l?.outgoingAngle,qCommand:l});const w=d.angles(x,y,p,f,C,e);console.log(w)})})})}E.click();
