import{c as A,m as U,i as q,b as tt}from"./client-misc-leadhGo2.js";import{b as I,l as k,e as dt,c as Z,r as lt,f as nt,a as B}from"./utility-B4gEaDDG.js";class P{constructor(o,n,l,r){this.x0=o,this.y0=n,this.x=l,this.y=r,I(o,n,l,r),this.asString=`L ${l},${r}`,this.outgoingAngle=this.incomingAngle=Math.atan2(r-n,l-o)}toJSON(){return{command:"L",x0:this.x0,y0:this.y0,x:this.x,y:this.y}}incomingAngle;outgoingAngle;command="L";asString;translate(o,n){return new P(this.x0+o,this.y0+n,this.x+o,this.y+n)}toCubic(){return new N(this.x0,this.y0,k(this.x0,this.x,1/3),k(this.y0,this.y,1/3),k(this.x0,this.x,2/3),k(this.y0,this.y,2/3),this.x,this.y)}}class D{constructor(o,n,l,r,s,u){this.x0=o,this.y0=n,this.x1=l,this.y1=r,this.x=s,this.y=u,I(o,n,l,r,s,u),this.asString=`Q ${l},${r} ${s},${u}`}static line4(o,n,l,r){return new this(o,n,(o+l)/2,(n+r)/2,l,r)}static line(o,n){return this.line4(o.x,o.y,n.x,n.y)}static angles(o,n,l,r,s,u){I(o,n,l,r,s,u);const p=st({x0:o,y0:n,angle:l},{x0:r,y0:s,angle:u+Math.PI});return p?new this(o,n,p.x,p.y,r,s):this.line4(o,n,r,s)}static tryAngles(o,n,l,r,s,u){I(o,n,l,r,s,u);const p=st({x0:o,y0:n,angle:l},{x0:r,y0:s,angle:u+Math.PI});if(p)return new this(o,n,p.x,p.y,r,s)}toJSON(){return{command:"Q",x0:this.x0,y0:this.y0,x1:this.x1,y1:this.y1,x:this.x,y:this.y}}get incomingAngle(){return Math.atan2(this.y1-this.y0,this.x1-this.x0)}get outgoingAngle(){return Math.atan2(this.y-this.y1,this.x-this.x1)}command="Q";asString;translate(o,n){return new D(this.x0+o,this.y0+n,this.x1+o,this.y1+n,this.x+o,this.y+n)}toCubic(){return new N(this.x0,this.y0,k(this.x0,this.x1,2/3),k(this.y0,this.y1,2/3),k(this.x,this.x1,2/3),k(this.y,this.y1,2/3),this.x,this.y)}}class N{constructor(o,n,l,r,s,u,p,g){this.x0=o,this.y0=n,this.x1=l,this.y1=r,this.x2=s,this.y2=u,this.x=p,this.y=g,I(o,n,l,r,s,u,p,g),this.asString=`C ${l},${r} ${s},${u} ${p},${g}`}reverse(){return new N(this.x,this.y,this.x2,this.y2,this.x1,this.y1,this.x0,this.y0)}get incomingAngle(){return Math.atan2(this.y1-this.y0,this.x1-this.x0)}get outgoingAngle(){return Math.atan2(this.y-this.y2,this.x-this.x2)}command="C";asString;translate(o,n){return new N(this.x0+o,this.y0+n,this.x1+o,this.y1+n,this.x2+o,this.y2+n,this.x+o,this.y+n)}toCubic(){return this}}class m{get commands(){return this.#t}addCommand(o){this.#t.push(o),this.#n=void 0}addCommands(o){return o.forEach(n=>this.addCommand(n)),this}static fromStrings(o){let n=o.join(" ");const l=[];let r;for(;n=n.replace(/^ */,""),n!="";){let s=ot.exec(n);if(s){const u=A(s[1]),p=A(s[2]);if(u===void 0||p===void 0)throw console.error(s,u,p,this),new Error("wtf");r&&l.push(r),r=this.M(u,p),n=s[3];continue}if(r){if(s=ct.exec(n),s){const u=A(s[1]),p=A(s[2]);if(u===void 0||p===void 0)throw console.error(s,u,p,this),new Error("wtf");r=r.L(u,p),n=s[3];continue}if(s=it.exec(n),s){const u=A(s[1]),p=A(s[2]),g=A(s[3]),c=A(s[4]);if(u===void 0||p===void 0||g===void 0||c===void 0)throw console.error(s,u,p,g,c,this),new Error("wtf");r=r.Q(u,p,g,c),n=s[5];continue}if(s=ht.exec(n),s){const u=A(s[1]),p=A(s[2]),g=A(s[3]),c=A(s[4]),v=A(s[5]),H=A(s[6]);if(u===void 0||p===void 0||g===void 0||c===void 0||v===void 0||H===void 0)throw console.error(s,u,p,g,c,v,H,this),new Error("wtf");r=r.C(u,p,g,c,v,H),n=s[7];continue}}throw console.error(n),new Error("wtf")}return r&&l.push(r),l}static M(o,n){const l=new m;return l.M(o,n),l}#t=[];get pathShape(){return new _(this.#t)}#n;M(o,n,l=NaN){return I(o,n),this.#n={x:o,y:n,outgoingAngle:l},this}previous(){return this.#n??this.#t.at(-1)}H(o){const n=this.previous();return this.addCommand(new P(n.x,n.y,o,n.y)),this}V(o){const n=this.previous();return this.addCommand(new P(n.x,n.y,n.x,o)),this}L(o,n){const l=this.previous();return this.addCommand(new P(l.x,l.y,o,n)),this}Q(o,n,l,r){const s=this.previous();return this.addCommand(new D(s.x,s.y,o,n,l,r)),this}Q_HV(o,n){const l=this.previous();return this.Q(o,l.y,o,n)}Q_VH(o,n){const l=this.previous();return this.Q(l.x,n,o,n)}Q_angles(o,n,l,r){const s=this.previous();if(r??=s.outgoingAngle,r===void 0)throw new Error("wtf");return this.addCommand(D.angles(s.x,s.y,r,o,n,l)),this}C(o,n,l,r,s,u){const p=this.previous();return this.addCommand(new N(p.x,p.y,o,n,l,r,s,u)),this}circle(o,n,l="cw"){const r=this.previous(),s=r.x,u=r.y,p=Math.atan2(u-n,s-o),g=Math.hypot(u-n,s-o),c=l=="cw"?1:-1,v=p+Math.PI*2*c,H=U(0,p,1,v);function i(t){switch(t){case 0:case 1:return r;default:{const e=H(t),a=B(g,e);return{x:o+a.x,y:n+a.y}}}}function L(t){return i(t)}return this.addParametricPath(L,8),this}arc(o,n,l,r,s){const u=this.previous(),p=u.x,g=u.y;let c=nt(Math.atan2(g-n,p-o),Math.PI*2);const v=Math.hypot(g-n,p-o);let H=nt(Math.atan2(r-n,l-o),Math.PI*2);const i=Math.hypot(r-n,l-o);s=="cw"?c>H&&(H+=Math.PI*2):c<H&&(c+=Math.PI*2);const L=Math.abs(c-H),F=Math.ceil(L*1.17+1e-4),t=U(0,v,1,i),e=U(0,c,1,H);function a(h){switch(h){case 0:return u;case 1:return{x:l,y:r};default:{const d=B(t(h),e(h));return{x:o+d.x,y:n+d.y}}}}return this.addParametricPath(a,F)}addParametricPath(o,n){if(n<=0)throw new Error("wtf");const l=.01/n,r=q(n+1,u=>{const p=u/n,g=o(p),c=ut(o,p,l);return{t:p,point:g,direction:c}});return q(n,u=>({from:r[u],to:r[u+1]})).forEach(u=>{this.Q_angles(u.to.point.x,u.to.point.y,u.to.direction,u.from.direction)}),this}}function ut(x,o,n){if(!(o>=0&&o<=1))throw new Error("Expected 0 ≤ t ≤ 1");const l=Math.max(0,o-n),r=x(l),s=Math.min(1,o+n),u=x(s),p=u.x-r.x,g=u.y-r.y;return p==0&&g==0?NaN:Math.atan2(g,p)}const G=" *",R="(-?[0-9]+.?[0-9]*)",T=" *[, ] *",ot=new RegExp(`^M${G}${R}${T}${R}(.*)$`),ct=new RegExp(`^L${G}${R}${T}${R}(.*)$`),it=new RegExp(`^Q${G}${R}${T}${R}${T}${R}${T}${R}(.*)$`),ht=new RegExp(`^C${G}${R}${T}${R}${T}${R}${T}${R}${T}${R}${T}${R}(.*)$`);class gt extends Error{constructor(o,n){super(o),this.where=n}}class _{static fromString(o){let n=o,l=null;const r=H=>new gt(H,n),s=H=>{const i=A(H);if(i===void 0)throw r(`Invalid number: "${H}"`);return i};let u=NaN,p=NaN;const g=[],c=H=>{g.push(H),u=H.x,p=H.y};let v=!1;for(;n=n.replace(/^ */,""),n!="";){if(l=ot.exec(n),l){u=s(l[1]),p=s(l[2]),v=!0,n=l[3];continue}if(!v)throw r("Must start with an M command.");if(l=ct.exec(n),l){const H=s(l[1]),i=s(l[2]),L=new P(u,p,H,i);c(L),n=l[3];continue}if(l=it.exec(n),l){const H=s(l[1]),i=s(l[2]),L=s(l[3]),F=s(l[4]),t=new D(u,p,H,i,L,F);c(t),n=l[5];continue}if(l=ht.exec(n),l){const H=s(l[1]),i=s(l[2]),L=s(l[3]),F=s(l[4]),t=s(l[5]),e=s(l[6]),a=new N(u,p,H,i,L,F,t,e);c(a),n=l[7];continue}throw r("Confused.")}return new this(g)}matchForMorph(o){const n=this.commands.map(p=>p.toCubic()),l=o.commands.map(p=>p.toCubic());if(n.length!=l.length){const{shorter:p,longer:g}=n.length<l.length?{shorter:n,longer:l}:{shorter:l,longer:n};if(p.length==0)throw new Error("can't morph something into nothing");const c=g.length/p.length,v=[];p.forEach((H,i)=>{const L=Math.round((i+1)*c);for(;v.length<L;)v.push(H)}),p.length=0,p.push(...v)}if(n.length!=l.length)throw new Error("wtf");function r(p){return _.cssifyPath(p.map(g=>new _([g]).rawPath).join())}const s=r(n),u=r(l);return[s,u]}commands;get endX(){return this.commands.at(-1)?.x}get endY(){return this.commands.at(-1)?.y}get startX(){return this.commands.at(0)?.x0}get startY(){return this.commands.at(0)?.y0}static fromStrings(o){const l=m.fromStrings(o).flatMap(s=>s.commands);return new this(l)}constructor(o){this.commands=[...o]}static cssifyPath(o){return`path('${o}')`}get cssPath(){return _.cssifyPath(this.rawPath)}makeElement(){const o=document.createElementNS("http://www.w3.org/2000/svg","path"),n=this.cssPath;if(o.style.d=n,o.style.d=="")throw console.error(n,o),new Error("wtf");return o}static needAnM(o,n){return!o||o.x!=n.x0||o.y!=n.y0}get rawPath(){return this.commands.flatMap((o,n)=>{const l=[],r=this.commands[n-1];return _.needAnM(r,o)&&l.push(`M ${o.x0},${o.y0}`),l.push(o.asString),l}).join(" ")}get cssPaths(){return this.splitOnMove().map(o=>o.cssPath)}get rawPaths(){return this.splitOnMove().map(o=>o.rawPath)}splitOnMove(){const o=[];let n=[];return this.commands.forEach(l=>{_.needAnM(n.at(-1),l)&&(n=[],o.push(n)),n.push(l)}),o.map(l=>new _(l))}static join(o){return new _(o.flatMap(({Δx:n,Δy:l,shape:r})=>r.translate(n,l).commands))}convertToCubics(){return new _(this.commands.map(o=>o.toCubic()))}translate(o,n){return new _(this.commands.map(l=>l.translate(o,n)))}static fixAngleRounding(o){return o+400-400}static toDegrees(o){return Math.round(o*dt*100)/100}dump(){const o=this.commands.map((n,l)=>{const{x0:r,y0:s,x:u,y:p,incomingAngle:g,outgoingAngle:c,command:v}=n,H=document.createElementNS("http://www.w3.org/2000/svg","path");H.setAttribute("d",new _([n]).rawPath);const i=H.getTotalLength(),L=this.commands[l-1],t=_.needAnM(L,n)?{}:{difference:_.toDegrees(Z(L.outgoingAngle,g))};return{x0:r,y0:s,x:u,y:p,incomingAngle:_.toDegrees(g),outgoingAngle:_.toDegrees(c),length:i,c:v,...t}});console.table(o),console.log(this.rawPath)}}function st(x,o){if(I(x.x0,x.y0,x.angle,o.x0,o.y0,o.angle),isNaN(x.angle)||isNaN(o.angle)||x.angle==o.angle)return;const n=Math.tan(x.angle),l=Math.tan(o.angle),r=Math.abs(n)*100>Number.MAX_SAFE_INTEGER,s=Math.abs(l)*100>Number.MAX_SAFE_INTEGER;if(r&&s)return;const u=Math.atan2(o.y0-x.y0,o.x0-x.x0),p=Z(x.angle,u),g=Z(o.angle,u);if(p==0||Math.abs(g)==Math.PI){if(Math.abs(p)==Math.PI||g==0)return;const H=(x.x0+o.x0)/2,i=(x.y0+o.y0)/2;return{x:H,y:i}}const c=Math.sign(p),v=Math.sign(g);if(!(c!=v||c==0)&&!(Math.abs(g)<=Math.abs(p)+lt))if(r||s){const H=r?x.x0:o.x0,i=r?{...o,slope:l}:{...x,slope:n},L=i.slope*(H-i.x0)+i.y0;return{x:H,y:L}}else{const H=(o.y0-l*o.x0-x.y0+n*x.x0)/(n-l),i=n*(H-x.x0)+x.y0;return{x:H,y:i}}}class mt{constructor(o,n=o/10){if(this.fontSize=o,this.strokeWidth=n,o<=0||!isFinite(o))throw new Error("wtf")}get mHeight(){return this.fontSize}get xHeight(){return this.fontSize*.5}get aWidth(){return this.fontSize*.75}get digitWidth(){return this.fontSize*.5}get defaultKerning(){return this.strokeWidth*2.5}get spaceWidth(){return this.strokeWidth+this.digitWidth/2}get top(){return this.capitalTop-this.mHeight/4}get capitalTop(){return this.baseline-this.mHeight}get capitalTopMiddle(){return(this.capitalTop+this.capitalMiddle)/2}get capitalMiddle(){return this.baseline-this.xHeight}get capitalBottomMiddle(){return(this.baseline+this.capitalMiddle)/2}get baseline(){return 0}get descender(){return this.mHeight/4}get bottom(){return this.descender+this.mHeight/4}}class Mt{constructor(o,n,l){this.advance=n,this.fontMetrics=l,o instanceof _?this.#t=()=>o:this.#t=o}#t;get shape(){return this.#t()}get cssPath(){return this.shape.cssPath}get d(){return this.shape.rawPath}makeElement(){return this.shape.makeElement()}makeElements(){return this.shape.splitOnMove().map(o=>({innerShape:o,element:o.makeElement()}))}}function xt(x){function o(r){return r.length==1}let n="",l=[];return x.forEach((r,s)=>{o(s)?n+=s:l.push(r)}),{normal:n,special:l}}const z=0,O=Math.PI/4,X=2*O,ft=3*O,et=4*O,Ht=5*O,j=6*O,at=7*O;function rt(x){const o=new Map;typeof x=="number"&&(x=new mt(x));const n=(t,e,a)=>{const h=new Mt(e,a,x);if(o.has(t))throw new Error(`duplicate letter: "${t}", previous letter: "${[...o].at(-1)[0]}"`);o.set(t,h)},{aWidth:l,digitWidth:r,capitalTop:s,capitalTopMiddle:u,capitalMiddle:p,capitalBottomMiddle:g,baseline:c,descender:v,strokeWidth:H}=x,i=0,L=H/3;{const t=r*.9,e=t/2,a=t/2,h=a*Math.SQRT1_2,d=m.M(i,s+a);d.arc(e,s+a,e+h,s+a+h,"cw"),d.Q_angles(e,g,X),d.M(e,c-L),d.L(e,c),n("?",d.pathShape,t)}{const t=r*7/8,e=t/2,a=t,h=t/2,d=x.mHeight/8,M=s-d,f=c+d;if(f-M<h*4)throw new Error("wtf");const w=(M+f)/2,S=m.M(a,M).arc(a,M+h,e,M+h,"ccw").L(e,w-h).arc(i,w-h,i,w,"cw").arc(i,w+h,e,w+h,"cw").L(e,f-h).arc(a,f-h,a,f,"ccw").pathShape;n("{",S,t);const Q=m.M(i,M).arc(i,M+h,e,M+h,"cw").L(e,w-h).arc(a,w-h,a,w,"ccw").arc(a,w+h,e,w+h,"ccw").L(e,f-h).arc(i,f-h,i,f,"cw").pathShape;n("}",Q,t)}{const t=r,a=t/2,h=t;{const d=(v-c)*2,M=v,f=M-d,w=s-d/4,S=w+d;if(d<=0||M<=f||f<=S||S<=w)throw new Error("wtf");const Q=r*.5;{const V=m.M(Q,w).Q_HV(0,S).V(f).Q_VH(Q,M).pathShape;n("(",V,Q)}{const V=r*.5,b=m.M(0,w).Q_HV(V,S).V(f).Q_VH(0,M).pathShape;n(")",b,V)}{const V=m.M(Q,w).H(0).V(M).H(Q).pathShape;n("[",V,Q)}{const V=m.M(0,w).H(Q).V(M).H(0).pathShape;n("]",V,Q)}}{const d=r*.4,M=r*.3,f=i,w=f+d,S=w+M,Q=S+M,V=Q+d,b=V,C=r*.25,E=p,$=E-C,y=E+C,W=m.M(f,E).Q_angles(w,$,z,at).Q_angles(S,E,(X+O)/2).Q_angles(Q,y,z).Q_angles(V,E,at).pathShape;n("~",W,b)}{const d=r*.75,M=d/2,f=m.M(M,p-M).V(p+M).M(i,p).H(d).pathShape;n("+",f,d)}{const d=r*.75,M=m.M(i,p).H(d).pathShape;n("-",M,d)}{const d=r/2*.9,M=5,f=-Math.PI/2,w=(s+c)/2,S=0,Q=q(M,y=>{const W=y*(Math.PI*2)/M+f,Y=B(S,W),J=B(d,W);return[Y,J]}),V=Q.flat(),b=Math.min(...V.map(({x:y})=>y));V.forEach(y=>{y.x-=b,y.y+=w});const C=Q.map(([y,W])=>new P(y.x,y.y,W.x,W.y)),E=new _(C),$=Math.max(...V.map(({x:y})=>y));n("*",E,$)}{const d=r*.75,M=m.M(i,p-H*1.25).H(d).M(i,p+H*1.25).H(d).pathShape;n("=",M,d)}{const d=r*1.25,M=c+H,f=m.M(0,M).H(d).pathShape;n("_",f,d)}{const d=r/2,M=3*d,f=d/3,w=s,S=w+d,Q=S+d,V=Q+d,b=m.M(d+f,w).L(d-f,V).M(2*d+f,w).L(2*d-f,V).M(0,S).H(M).M(0,Q).H(M).pathShape;n("#",b,M)}{const d=r/2,M=3*d,f=0,w=d,S=M/2,Q=2*d,V=M,b=s+(x.mHeight-M)/2,C=b+w,E=b+S,$=b+Q,y=b+V,W=m.M(Q,E).Q_VH(S,C).Q_HV(w,E).Q_VH(S,$).Q_HV(Q,E).Q_VH((Q+V)/2,$).Q_HV(V,E).V((C+E)/2).Q_VH(S,b).Q_HV(f,E).Q_VH(S,y).H((Q+V)/2).pathShape;n("@",W,M)}{const d=m.M(a,s).Q(h,s,h,u).L(h,g).Q(h,c,a,c).Q(i,c,i,g).L(i,u).Q(i,s,a,s).M(h,u).L(i,g).pathShape;n("0",d,t)}{const d=m.M(i,u).Q(a,u,a,s).L(a,c).M(i,c).L(h,c).pathShape;n("1",d,t)}{const d=m.M(i,u).Q_VH(a,s).Q_HV(h,u).Q_VH(a,p).Q_HV(i,c).L(h,c).pathShape;n("2",d,t)}{const d=m.M(i,u).Q_VH(a,s).Q_HV(h,u).Q_VH(a,p).Q_HV(h,g).Q_VH(a,c).Q_HV(i,g).pathShape;n("3",d,t)}{const d=(a+h)/2,M=(a+i)/2,f=m.M(h,p).L(i,p).L(M,s).M(d,s).L(d,c).pathShape;n("4",f,t)}{const d=i+r/5,M=h-r/5,f=(p+g)/2,w=m.M(M,s).L(d,s).L(i,p).Q_VH(a,u).Q_HV(h,f).Q_VH(a,c).Q_HV(i,g).pathShape;n("5",w,t)}{const d=m.M(h,s).Q_HV(i,g).Q_VH(a,c).Q_HV(h,g).Q_VH(a,p).Q_HV(i,g).pathShape;n("6",d,t)}{const d=m.M(i,s).L(h,s).L(i,c).pathShape;n("7",d,t)}{const d=m.M(a,s).Q(h,s,h,u).Q(h,p,a,p).Q(i,p,i,g).Q(i,c,a,c).Q(h,c,h,g).Q(h,p,a,p).Q(i,p,i,u).Q(i,s,a,s).pathShape;n("8",d,t)}{const d=m.M(h,u).Q(h,s,a,s).Q(i,s,i,u).Q(i,p,a,p).Q(h,p,h,u).Q(h,c,i,c).pathShape;n("9",d,t)}}{const t=m.M(i,c).L(l/2,s).L(x.aWidth,c).M(x.aWidth/4,p).L(x.aWidth*.75,p).pathShape;n("A",t,l)}{const t=r,e=u-s;if(e<=0)throw new Error("wtf");const a=(t-e)*(2/3),h=c-g;if(h<=0)throw new Error("wtf");const d=t-h,M=m.M(i,c).L(i,s).L(a,s).Q_HV(a+e,s+e).Q(a+e,p,a,p).L(i,p).M(Math.max(d,a),p).Q_HV(d+h,c-h).Q_VH(d,c).L(i,c).pathShape;n("B",M,t)}{const t=r,a=t/2,h=t,d=m.M(h,u).Q(h,s,a,s).Q(i,s,i,u).L(i,g).Q(i,c,a,c).Q(h,c,h,g).pathShape;n("C",d,t)}{const t=r,a=t/2,h=t,d=m.M(i,s).L(i,c).L(a,c).Q(h,c,h,g).L(h,u).Q(h,s,a,s).L(i,s).pathShape;n("D",d,t)}{const t=r,e=t*(2/3),a=t,h=m.M(a,s).L(i,s).L(i,c).L(a,c).M(e,p).L(i,p).pathShape;n("E",h,t)}{const t=r,e=t*(2/3),a=t,h=m.M(a,s).L(i,s).L(i,c).M(e,p).L(i,p).pathShape;n("F",h,t)}{const t=r,a=t/2,h=t,d=m.M(h,u).Q(h,s,a,s).Q(i,s,i,u).L(i,g).Q(i,c,a,c).Q(h,c,h,g).L(h,p).L(a,p).pathShape;n("G",d,t)}{const t=r,e=t,a=m.M(i,s).L(i,c).M(e,s).L(e,c).M(i,p).L(e,p).pathShape;n("H",a,t)}{const t=x.mHeight/3,e=t/2,a=t,h=m.M(i,s).L(a,s).M(i,c).L(a,c).M(e,s).L(e,c).pathShape;n("I",h,t)}{const t=r*.85,a=t/2,h=t,d=m.M(h,s).L(h,g).Q(h,c,a,c).Q(i,c,i,g).pathShape;n("J",d,t)}{const t=r+H,e=(s+c)/2,a=m.M(i,s).L(i,c).M(t,s).L(i+.5,e).L(t,c).pathShape;n("K",a,t)}{const t=r,e=m.M(i,s).L(i,c).L(t,c).pathShape;n("L",e,t)}{const t=r*1.5,e=t/2,a=m.M(i,c).L(i,s).L(e,p).L(t,s).L(t,c).pathShape;n("M",a,t)}{const t=r*1.2,e=m.M(i,c).L(i,s).L(t,c).L(t,s).pathShape;n("N",e,t)}{const t=r*1.5,e=t/2,a=(s+c)/2,h=m.M(e,s).Q_HV(t,a).Q_VH(e,c).Q_HV(i,a).Q_VH(e,s).pathShape;n("O",h,t)}{const t=r,e=p-u;if(e<=0)throw new Error("wtf");const a=t-e,h=m.M(i,s).L(i,c).M(i,s).L(a,s).Q_HV(t,u).Q_VH(a,p).L(i,p).pathShape;n("P",h,t)}{const t=r*1.5,e=t/2,a=(s+c)/2,h=m.M(e,s).Q_HV(t,a).Q_VH(e,c).Q_HV(i,a).Q_VH(e,s).M(t-e*.75,c-e*.75).L(t+e/6,c+e/6).pathShape;n("Q",h,t)}{const t=r,e=p-u;if(e<=0)throw new Error("wtf");const a=t-e,h=m.M(i,s).L(i,c).M(i,s).L(a,s).Q_HV(t,u).Q_VH(a,p).L(i,p).M(a,p).L(t,c).pathShape;n("R",h,t)}{const t=r,e=r/2,a=r,h=m.M(a,u).Q_VH(e,s).Q_HV(i,u).Q_VH(e,p).Q_HV(a,g).Q_VH(e,c).Q_HV(i,g).pathShape;n("S",h,t)}{const e=r+H,a=e/2,h=e,d=x.mHeight/8,M=m.M(h,u).Q_VH(a,s).Q_HV(i,u).Q_VH(a,p).Q_HV(h,g).Q_VH(a,c).Q_HV(i,g).M(a,s-d).V(c+d).pathShape;n("$",M,e)}{const t=r,e=t/2,a=m.M(e,s).L(e,c).M(t,s).L(i,s).pathShape;n("T",a,t)}{const t=(g+p)/2,e=Math.abs(t-c)*.85,a=e*2,h=m.M(i,s).V(t).Q_VH(e,c).Q_HV(a,t).V(s).pathShape;n("U",h,a)}{const t=l,e=t/2,a=m.M(i,s).L(e,c).L(t,s).pathShape;n("V",a,t)}{const t=l*1.5,e=t/3,a=t/2,h=e*2,d=m.M(i,s).L(e,c).L(a,p).L(h,c).L(t,s).pathShape;n("W",d,t)}{const t=r,e=m.M(t,s).L(i,c).M(i,s).L(t,c).pathShape;n("X",e,t)}{const t=H,e=r+t,a=m.M(e,s).L(t,c).M(i,s).L(e/2,p).pathShape;n("Y",a,e)}{const t=r,e=m.M(i,s).H(t).L(i,c).H(t).pathShape;n("Z",e,t)}{const t=r/4,e=r*1.2,a=m.M(t*2,s+t).Q_VH(t,s).Q_HV(0,s+t).Q_VH(t,s+t*2).Q_HV(t*2,s+t),d=a.pathShape.translate(e-t*2,x.mHeight-t*2);a.addCommands(d.commands),a.M(e,s).L(i,c);const M=a.pathShape;n("%",M,e)}{const t=r,e=m.M(t,s).L(i,c).pathShape;n("/",e,t)}{const t=r,e=m.M(i,s).L(t,c).pathShape;n("\\",e,t)}{const t=r,e=H/2,a=t+e,h=t/2,d=m.M(h,p).Q_HV(i,g).Q_VH(h,c).Q_HV(t,g).Q_VH(h,p).M(a,p).L(a,c).pathShape;n("a",d,a)}{const t=r,e=H/2,a=t+e,h=e,d=e+t/2,M=a,f=m.M(i,s).V(c).M(h,g).Q_VH(d,c).Q_HV(M,g).Q_VH(d,p).Q_HV(h,g).pathShape;n("b",f,a)}{const t=r*.875,e=0,a=r/2,h=t,d=(p+g)/2,M=(g+c)/2,f=m.M(h,d).Q_VH(a,p).Q_HV(e,g).Q_VH(a,c).Q_HV(h,M).pathShape;n("c",f,t)}{const t=r,e=H/2,a=t+e,h=t/2,d=m.M(h,p).Q_HV(i,g).Q_VH(h,c).Q_HV(t,g).Q_VH(h,p).M(a,s).L(a,c).pathShape;n("d",d,a)}const F=r/8;{const t=r,e=r/2,a=t,h=a-F,d=m.M(i,g).H(a).Q_VH(e,p).Q_HV(i,g).Q_VH(e,c).H(h).pathShape;n("e",d,t)}{const t=r*.75,e=t/2,a=t,h=m.M(a,s).Q_HV(e,u).V(c).M(a,p).H(i).pathShape;n("f",h,t)}{const t=r,e=H/2,a=t+e,h=t/2,d=m.M(h,p).Q_HV(i,g).Q_VH(h,c).Q_HV(t,g).Q_VH(h,p).M(a,p).V(c).Q_VH(h,v).H(i+F).pathShape;n("g",d,a)}{const t=r*.85,e=t/2,a=m.M(i,s).V(c).Q_VH(e,p).Q_HV(t,g).V(c).pathShape;n("h",a,t)}{const e=m.M(i,p).V(c).M(i,u).V(u-L).pathShape;n("i",e,0)}{const t=Math.abs(c-v),e=t/2,a=m.M(t,p).V(c).Q_VH(e,v).Q_HV(i,c).M(t,u).V(u-L).pathShape;n("j",a,t)}{const e=m.M(i,c).V(c-L).pathShape;n(".",e,0)}{const e=m.M(i,s).V(g).M(i,c).V(c-L).pathShape;n("!",e,0)}{const e=(v-c)/2,a=e/2,h=m.M(i,c-L).V(c).Q_VH(-a,c+e).pathShape;n(",",h,0)}{const a=(v-c)/2+L,h=new _([new P(i,s,i,s+a)]);n("'",h,0)}{const e=(v-c)/2+L,a=e,h=e,d=new _([new P(i,s,h,s+e)]);n("`",d,a)}{const e=(v-c)/2+L,a=e,h=e*2,d=h,M=s,f=s+e,w=m.M(i,f).L(a,M).L(d,f).pathShape;n("^",w,h)}{const t=H*2,a=(v-c)/2+L,h=new _([new P(i,s,i,s+a),new P(t,s,t,s+a)]);n('"',h,t)}{const e=p,a=m.M(i,c).V(c-L).M(i,e-L).V(e).pathShape;n(":",a,0)}{const e=new _([new P(i,s,i,c)]);n("|",e,0)}{const e=p,a=(v-c)/2,h=a/2,d=m.M(i,c-L).V(c).Q_VH(-h,c+a).M(i,e-L).V(e).pathShape;n(";",d,0)}{const t=x.xHeight*2/3,e=r/10,a=t+e,h=m.M(i,s).V(c).M(t,p).L(i,p+t).M(t/2,c-t).L(a,c).pathShape;n("k",h,a)}{const e=m.M(i,s).V(c).pathShape;n("l",e,0)}{const t=r*1.5,e=t/4,a=t/2,h=t*3/4,d=t,M=m.M(i,p).V(c).Q_VH(e,p).Q_HV(a,g).V(c).M(a,g).Q_VH(h,p).Q_HV(d,g).V(c).pathShape;n("m",M,t)}{const t=r*.85,e=t/2,a=m.M(i,p).V(c).Q_VH(e,p).Q_HV(t,g).V(c).pathShape;n("n",a,t)}{const t=r,e=0,a=t/2,h=t,d=m.M(a,p).Q_HV(h,g).Q_VH(a,c).Q_HV(e,g).Q_VH(a,p).pathShape;n("o",d,t)}{const t=r,e=H/2,a=t+e,h=e,d=e+t/2,M=a,f=m.M(i,p).V(v).M(h,g).Q_VH(d,p).Q_HV(M,g).Q_VH(d,c).Q_HV(h,g).pathShape;n("p",f,a)}{const t=r,e=t/2,a=t+H/2,h=Math.abs(c-v),d=a+h/2,M=a+h,f=m.M(e,p).Q_HV(i,g).Q_VH(e,c).Q_HV(t,g).Q_VH(e,p).M(a,p).V(c).Q_VH(d,v).Q_HV(M,c).pathShape;n("q",f,M)}{const t=r,e=t/2,a=m.M(i,p).V(c).Q_VH(e,p).Q_HV(t,g).pathShape;n("r",a,t)}{const t=x.xHeight*2/3,e=t/2,a=c,h=g,d=p,M=(a+h)/2,f=(h+d)/2,w=(f+d)/2,S=(a+M)/2,Q=m.M(t,w).Q_VH(e,d).Q_HV(i,f).Q_VH(e,h).Q_HV(t,M).Q_VH(e,a).Q_HV(i,S).pathShape;n("s",Q,t)}{const t=r*.75,e=t/2,a=t,h=m.M(e,u).V(g).Q_VH(a,c).M(a,p).H(i).pathShape;n("t",h,t)}{const t=r*.85,e=t/2,a=m.M(i,p).V(g).Q_VH(e,c).Q_HV(t,p).L(t,c).pathShape;n("u",a,t)}{const t=r,e=t/2,a=m.M(i,p).L(e,c).L(t,p).pathShape;n("v",a,t)}{const t=x.xHeight*1.5,e=t/3,a=t/2,h=e*2,d=m.M(i,p).L(e,c).L(a,g).L(h,c).L(t,p).pathShape;n("w",d,t)}{const t=r,e=m.M(t,p).L(i,c).M(i,p).L(t,c).pathShape;n("x",e,t)}{const t=r,e=t/2,a=(p+v)/2,h=m.M(t,p).L(i,v).M(i,p).L(e,a).pathShape;n("y",h,t)}{const t=r,e=m.M(i,p).H(t).L(i,c).H(t).pathShape;n("z",e,t)}{const t=r/2,e=t/2,a=m.M(e,s).circle(e,s+e,"cw").pathShape;n("°",a,t)}{const t=-s,e=t/2,a=m.M(e,s).circle(e,s+e,"cw").pathShape;n("◯",a,t)}{const t=-s,e=t/2,a=s/2,h=m.M(0,a).arc(e,a,t,a,"cw").pathShape;n("◠",h,t)}{const t=-s,e=t/2,a=s/2,h=m.M(0,a).arc(e,a,t,a,"ccw").pathShape;n("◡",h,t)}{const t=-s,e=t/4,a=s+e,h=m.M(e*2,a).arc(e*3,a,t,a,"cw").Q_angles(e*2,c,ft,X).Q_angles(0,a,j,Ht).arc(e,a,e*2,a,"cw").pathShape;n("♡",h,t)}{const t=x.mHeight,e=t/4,a=e;{const h=t,d=(s+c)/2,M=m.M(a,d-e).L(0,d).L(a,d+e).M(0,d).L(h,d).M(h-a,d-e).L(h,d).L(h-a,d+e);n("↔",M.pathShape,h);const f=new _(M.commands.slice(0,3));n("←",f,h);const w=new _(M.commands.slice(2,5));n("→",w,h)}{const d=e,M=e*2,f=M,w=m.M(0,s+a).L(d,s).L(f,s+a).M(d,s).L(d,c).M(0,c-a).L(d,c).L(f,c-a);n("↕",w.pathShape,M);const S=new _(w.commands.slice(0,3));n("↑",S,M);const Q=new _(w.commands.slice(2,5));n("↓",Q,M)}}{const t=x.mHeight,e=0,a=t/2,h=t,d=s,M=c,f=(d+M)/2,w=Math.PI/16,S=m.M(a,d).Q_angles(h,f,z+w,X-w).Q_angles(a,M,X+w,et-w).Q_angles(e,f,et+w,j-w).Q_angles(a,d,j+w,z-w).pathShape;n("✧",S,t)}{let t=function(Q,V){const b=Q.maxY-Q.minY,E=(V.bottom-V.top)/b,y=(Q.maxX-Q.minX)*E,W=0,Y=y,J=tt(Q.minX,W,Q.maxX,Y),pt=tt(Q.minY,V.top,Q.maxY,V.bottom);return{x:J,y:pt,advance:Y}},e=function(){const Q={x:1/0,y:1/0},V={x:-1/0,y:-1/0};M.forEach($=>{["x","y"].forEach(y=>{Q[y]=Math.min(Q[y],$[y]),V[y]=Math.max(V[y],$[y])})});const b={minX:Q.x,maxX:V.x,minY:Q.y,maxY:V.y},E=t(b,{top:s,bottom:c});return M.forEach($=>{$.x=E.x($.x),$.y=E.y($.y)}),E};const d=j,M=q(5,Q=>{const V=d+Q*(2*Math.PI)*2/5;return B(1,V)}),f=e(),w=M.map((Q,V,b)=>{const C=b.at(V+1-b.length);return new P(Q.x,Q.y,C.x,C.y)});n("☆",new _(w),f.advance);const S=M.map((Q,V,b)=>{const C=b.at(V+1-b.length),E=Math.atan2(C.y-Q.y,C.x-Q.x),$=.175;return D.angles(Q.x,Q.y,E+$,C.x,C.y,E-$)});n("⭒",new _(S),f.advance)}return new Map([...o.entries()].sort(([t],[e])=>t<e?-1:t==e?1:0))}class K{restart(o=5,n=this.lineHeight){this.leftMargin=o,this.x=o,this.baseline=n}leftMargin=0;rightMargin=95;x=this.leftMargin;baseline=0;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(o=1){this.baseline+=this.lineHeight*o}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=rt(5);getDescription(o){return this.font.get(o)}static join(o){return new _(o.flatMap(n=>n.description.shape.translate(n.x,n.baseline).commands))}displayText(o,n){return o.map(l=>{const r=l.description.shape,s=r.makeElement();return n.appendChild(s),s.style.transform=`translate(${l.x}px,${l.baseline}px)`,{...l,shape:r,element:s}})}static WORD_BREAK=/^(\n+| +|[^ \n]+)(.*)/ms;addText(o){const n=new Set,l=[];for(;;){const r=K.WORD_BREAK.exec(o);if(!r)break;const s=r[1];if(o=r[2],s[0]==`
`)this.carriageReturn(),this.lineFeed(s.length*4/3);else if(s[0]==" ")this.addSpace(s.length);else{let u=0;const p=0,g=[...s].flatMap(c=>{const v=this.getDescription(c);if(v){const H=v.advance+v.fontMetrics.defaultKerning,i={char:c,x:u,width:H,baseline:p,description:v};return u+=H,i}else return n.add(c),[]});this.x+u>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),g.forEach(c=>{c.x+=this.x,c.baseline=this.baseline,l.push(c)}),this.x+=u}}return n.size>0&&console.warn(n),l}addSpace(o=1){this.x+=this.font.get("0").fontMetrics.spaceWidth*o}static textToShape(o,n){const l=new K;l.font=n;const r=l.addText(o),s=K.join(r),u=l.x;return{shape:s,advance:u}}}class vt{constructor(o){this.element=o}leftMargin=5;rightMargin=95;x=this.leftMargin;baseline=10;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(o=1){this.baseline+=this.lineHeight*o}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=rt(5);getDescription(o){return this.font.get(o)}makeRoom(o){this.x+o.advance>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed())}advance(o){this.x+=o.advance+o.fontMetrics.defaultKerning}moveToCursor(o){o.style.transform=`translate(${this.x}px,${this.baseline}px)`}showAndAdvance(o,n){return this.x+n>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),this.element.appendChild(o),o.style.transform=`translate(${this.x}px,${this.baseline}px)`,this.x+=n,this}show1(o){this.makeRoom(o);const n=o.makeElement();this.element.appendChild(n);const{x:l,baseline:r}=this;return this.moveToCursor(n),this.advance(o),{element:n,x:l,baseline:r}}splitAndShow1(o){this.makeRoom(o);const n=o.makeElements();return n.forEach(({element:l})=>{this.element.appendChild(l),this.moveToCursor(l)}),this.advance(o),n}show(o){const n=new Set,l=[...o].flatMap(r=>{const s=this.getDescription(r);return s?{...this.show1(s),description:s,char:r}:r==" "?(this.showSpace(),[]):(n.add(r),[])});return n.size>0&&console.warn(n),l}splitAndShow(o){const n=new Set,l=[...o].flatMap(r=>{const s=this.getDescription(r);return s?this.splitAndShow1(s):r==" "?(this.showSpace(),[]):(n.add(r),[])});return n.size>0&&console.warn(n),l}showSpace(o=1){return this.x+=this.font.get("0").fontMetrics.spaceWidth*o,this}}export{Mt as D,mt as F,_ as P,D as Q,K as T,vt as W,xt as d,rt as m};
