import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as M}from"./client-misc-ZHNZ3-cL.js";import{b as c,m as X,c as Y,s as ee,g as te,t as k,h as L}from"./fourier-shared-DuW6XbeN.js";import{p as ae,P as F}from"./path-shape-n6EbRjvk.js";import{m as b}from"./misc-wGF4FraP.js";import{d as C,g as ne}from"./utility-D2jUDy1w.js";const ie=1024,$=M.getById("scaled",SVGGElement),V=M.getById("reference",SVGPathElement),se=M.getById("samples",SVGPathElement);function A(i,r){if(i>=r)throw new Error("wtf");const S=b.makeLinear(i,0,r,1);function G(f){if(f<=i)return 0;if(f>=r)return 1;const l=S(f);return ne(l)}return G}function Q(i){V.setAttribute("d",i.pathString);const r=ae(V.getBBox(),{x:1,y:1,width:14,height:7},"srcRect fits completely into destRect",1),S=r.a;$.style.transform=r.toString(),$.style.setProperty("--path-scale",S.toString());const G=Y(i.pathString,ie);let f="";G.forEach(([e,a])=>{f+=`M${e},${a}l0,0`}),se.setAttribute("d",f);const l=ee(G),x=te({addTime:4800,pauseTime:200,maxGroupsToDisplay:i.maxGroupsToDisplay,terms:l}),_=e=>Math.max(...l.slice(0,e).map(t=>Math.abs(t.frequency))),I=e=>8*_(e)+7,Z=x.map(e=>{if(e.addingCircles==0){const a=k(l,e.usingCircles),t=I(e.usingCircles),o=F.parametric(a,t);return()=>o.rawPath}else if(e.usingCircles==0&&e.addingCircles==1&&l[0].frequency==0){let a=function(s){return`${n.x*s},${n.y*s}`};const{startTime:t,endTime:o}=e,m=o-t,u=A(t,t+m/2),T=A(t,o),n=L(l[0]);return s=>{const p=T(s),d=a(p),y=u(s),h=a(y);return`M ${d} L ${h}`}}else{const t=.2/_(e.usingCircles+e.addingCircles),o=b.makeBoundedLinear(e.startTime,-t,e.endTime,1+t),m=k(l,e.usingCircles),u=k(l,e.addingCircles,e.usingCircles);let T=I(e.usingCircles+e.addingCircles);if(e.usingCircles==0||e.usingCircles==1&&L(l[0])){const n=L(l[0])??{x:0,y:0};return s=>{const p=o(s),d=p-t,y=p+t,h=A(d,y),g=Math.min(1,y);if(g<=0)return`$M${n.x},${n.y} L${n.x},${n.y}`;{let P=function(w){w=w*g;const E=m(w),v=1-h(w);if(v==0)return E;{const z=u(w);return{x:E.x+v*z.x,y:E.y+v*z.y}}};const D=Math.ceil(Math.max(T,150)*g);return F.parametric(P,D).rawPath}}}else return n=>{const s=o(n),p=A(s-t,s+t);function d(h){const g=m(h),P=1-p(h);if(P==0)return g;{const D=u(h);return{x:g.x+P*D.x,y:g.y+P*D.y}}}return F.parametric(d,T).rawPath}}}),j=new Intl.NumberFormat("en-US",{minimumSignificantDigits:5,maximumSignificantDigits:5,useGrouping:!1}).format,O=e=>{e<0&&(e=0);let a=j(e);const[,t,o]=/^([0-9]+)\.([0-9]+)$/.exec(a);switch(t.length){case 3:break;case 2:{a=b.FIGURE_SPACE+a;break}case 1:{a=b.FIGURE_SPACE+b.FIGURE_SPACE+a;break}default:throw console.warn({beforeDecimalPoint:t,afterDecimalPoint:o,result:a}),new Error("wtf")}return a+"%"},J=x.map(e=>({usingAmplitude:O(e.usingAmplitude),addingAmplitude:O(e.addingAmplitude),availableAmplitude:O(e.availableAmplitude)})),R=C("[data-using] [data-circles]",HTMLTableCellElement),H=C("[data-using] [data-amplitude]",HTMLTableCellElement),B=C("[data-adding] [data-circles]",HTMLTableCellElement),N=C("[data-adding] [data-amplitude]",HTMLTableCellElement),U=C("[data-available] [data-circles]",HTMLTableCellElement),W=C("[data-available] [data-amplitude]",HTMLTableCellElement);function K(e){function a(){const n=x.findIndex(({endTime:s})=>e<s);return n==-1?x.length-1:n}const t=a(),o=n=>`${n.toString().padStart(4,b.FIGURE_SPACE)}`,m=x[t];R.innerText=o(m.usingCircles),B.innerText=o(m.addingCircles),U.innerText=o(m.availableCircles),[{value:m.usingCircles,element1:R,element2:H},{value:m.addingCircles,element1:B,element2:N},{value:m.availableCircles,element1:U,element2:W}].forEach(({value:n,element1:s,element2:p})=>{const d=n==0?"0.5":"";s.style.opacity=d,p.style.opacity=d});const u=J[t];H.innerText=u.usingAmplitude,N.innerText=u.addingAmplitude,W.innerText=u.availableAmplitude;const T=F.cssifyPath(Z[t](e));$.style.setProperty("--d",T)}window.showFrame=K}const q=new Map([["likeShareAndSubscribe",{maxGroupsToDisplay:30,pathString:c.likeShareAndSubscribe,minGoodCircles:10}],["hilbert0",{maxGroupsToDisplay:20,pathString:c.hilbert[0]}],["hilbert1",{maxGroupsToDisplay:20,pathString:c.hilbert[1],minGoodCircles:13}],["hilbert4",{maxGroupsToDisplay:20,pathString:c.hilbert[4]}],["p0",{maxGroupsToDisplay:20,pathString:c.peanocurve[0]}],["p1",{maxGroupsToDisplay:20,pathString:c.peanocurve[1]}],["p2",{maxGroupsToDisplay:20,pathString:c.peanocurve[2]}],["square",{maxGroupsToDisplay:7,pathString:"M-0.5,-0.667 h 1 v 1 h -1 z"}],["ellipse",{maxGroupsToDisplay:7,pathString:"M1,0 A1,1.25 0 1 1 -1,0 A1,1.25 0 1 1 1,0 z"}],["star7",{maxGroupsToDisplay:8,pathString:X(7,2,"My seed 2025a").rawPath,topText:"Random 7 Pointed Star",bottomText:'makePolygon(7,2, "My seed 2025a")'}],["Daphne_Oram_1",{maxGroupsToDisplay:18,pathString:c.daphneOram1,topText:"Daphne Oram #1",bottomText:"Wikimedia Commons"}],["Daphne_Oram_2",{maxGroupsToDisplay:22,pathString:c.daphneOram2,topText:"Daphne Oram #2",bottomText:"Wikimedia Commons"}],["water_opossum",{maxGroupsToDisplay:22,pathString:c.waterOpossum,topText:"Chironectes (Water Opossum)",bottomText:"Wikimedia Commons",minGoodCircles:10}],["cat",{maxGroupsToDisplay:10,pathString:c.cat,topText:"Cat",bottomText:"Wikimedia Commons"}]]);{const i=new URLSearchParams(window.location.search).get("script_name");if(i){const r=q.get(i);if(!r)throw console.log(`invalid script name: ${i}`,q),new Error("wtf");Q(r)}else Q(q.get("star7"))}setTimeout(()=>{let i=NaN;window.animationLoop=new M.AnimationLoop(r=>{isNaN(i)&&(i=r);const S=r-i;window.showFrame(S)})},1);
