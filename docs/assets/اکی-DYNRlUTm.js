import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as P}from"./client-misc-ZHNZ3-cL.js";import{s as v,b as E}from"./utility-D9E8BDCl.js";import{P as w}from"./path-shape-fljILaqi.js";import{m as p}from"./misc-wGF4FraP.js";const b=1e-4;class g{compute(t,s,n){let a=0;for(let e=0;e<n;e++){const r=this.constant(s,e);a+=r*(t-s)**e}return a}validRanges(){const t=this.badPoints.flatMap(({real:n,imaginary:a})=>a==0?[n]:[]).sort((n,a)=>n-a);return t.push(1/0),t.map((n,a,e)=>({from:(e[a-1]??-1/0)+b,to:n-b}))}radiusOfConvergence(t){return Math.min(...this.badPoints.map(s=>Math.hypot(t-s.real,s.imaginary)))}partialSum(t,s){const n=p.initializedArray(s,e=>this.constant(t,e));function a(e){const r=e-t;let i=0;return n.forEach((o,l)=>i+=o*r**l),i}return a}}class O extends g{numberOfTerms=1/0;constant(t,s){if(t===0)throw new Error("Reciprocal is undefined at x0 = 0");return(-1)**s/t**(s+1)}f(t){if(t===0)throw new Error("Reciprocal is undefined at x = 0");return 1/t}static instance=new this;badPoints=[{real:0,imaginary:0}]}class V extends g{numberOfTerms=1/0;constant(t,s){const n=t+s*Math.PI/2;let a=1;for(let e=1;e<=s;e++)a*=e;return Math.sin(n)/a}f(t){return Math.sin(t)}static instance=new this;badPoints=[]}class M extends g{numberOfTerms=6;constant(t,s){const n=1+t*t;switch(s){case 0:return 1/n;case 1:return-2*t/n**2;case 2:return(3*t*t-1)/n**3;case 3:return 2*t*(3-5*t*t)/n**4;case 4:return(25*t**4-38*t*t+3)/(2*n**5);case 5:return t*(2842*t*t-1450*t**4-636)/(5*n**6);default:throw new Error(`Term ${s} not implemented.`)}}f(t){return 1/(1+t*t)}static instance=new this;badPoints=[{real:0,imaginary:1},{real:0,imaginary:-1}]}class d{#t;#s;#n;#e;constructor(t){[this.#t,this.#s]=v(`[data-open-end="${t}"]`,SVGCircleElement,2,2),this.#n=E(`[data-center="${t}"]`,SVGCircleElement),this.#e=E(`[data-reconstruction="${t}"]`,SVGPathElement)}hide(){this.#t.style.display="none",this.#s.style.display="none",this.#n.style.display="none",this.#e.style.d=""}draw2(t,s,n,a,e){function r(i){const o=t(i),l=s(i);return o*(1-n)+l*n}this.draw(r,a,e)}draw(t,s,n){if(n-=b,n<=0)throw new Error("wtf");const a=-9,e=9,r=s-n,i=s+n,o=Math.max(a,r),l=Math.min(e,i),f=u=>{const m=p.lerp(o,l,u),y=t(m);return{x:m,y}},h=w.parametric(f,50);this.#e.style.d=h.cssPath,this.#n.style.display="",this.#n.cx.baseVal.value=s,this.#n.cy.baseVal.value=t(s),isFinite(n)?(this.#t.style.display="",this.#s.style.display="",this.#t.cx.baseVal.value=r,this.#t.cy.baseVal.value=t(r),this.#s.cx.baseVal.value=i,this.#s.cy.baseVal.value=t(i)):(this.#t.style.display="none",this.#s.style.display="none")}precompute(t,s,n){const a=t.radiusOfConvergence(s),e=p.initializedArray(n,i=>t.partialSum(s,i));return i=>{if(Number.isInteger(i))this.draw(e[i],s,a);else{let o=function(u){const m=l(u),y=f(u);return m*(1-h)+y*h};const l=e[Math.floor(i)],f=e[Math.ceil(i)],h=i%1;this.draw(o,s,a)}}}drawAll(t,s,n){}static instances=[new this("1"),new this("2"),new this("3")]}class R{#t=P.getById("original-function",SVGPathElement);hide(){this.#t.style.d=""}draw(t){const a=t.validRanges().flatMap(r=>{const i=Math.max(-9,r.from),o=Math.min(9,r.to);if(i>=o)return[];{const l=h=>{const u=p.lerp(i,o,h),m=t.f(u);return{x:u,y:m}};return w.parametric(l,Math.ceil((o-i)*5)).commands}}),e=new w(a);this.#t.style.d=e.cssPath}static instance=new this}console.log({HiddenPoles:M,Sine:V,Reciprocal:O,TaylorElements:d});{let c=function(n,a){const e=t.radiusOfConvergence(a);n.draw(t.f,a,e)};const t=M.instance;R.instance.draw(t),c(d.instances[0],-2),c(d.instances[1],1),c(d.instances[2],2.5);const s=d.instances[0].precompute(t,-2,Math.min(30,t.numberOfTerms));console.log(s),window.fff=s,s(M.instance.numberOfTerms-1)}
