import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as v,Q as i,a as V}from"./path-shape-BH5rY0ov.js";import{g as M,m}from"./client-misc-CqK8Npau.js";import{c as F}from"./path-debugger-widget-vShwgk5A.js";const p=M("pathInputElement",HTMLInputElement),S=M("displaySinglePath",HTMLButtonElement),T=M("singlePathErrorMessage",HTMLSpanElement),A=F();A.insertBefore("insertPathDebuggerHere");const g=F();g.insertBefore("insertProcessingPathDebuggerHere");{let a=function(){const c=A.pathShape;if(!c)g.pathShape=void 0;else{const t=A.selectedIndex,f=m.assertClass(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value,r=c.commands;switch(f){case"select":{g.pathShape=c,g.selectedIndex=t;break}case"mergeWithNext":{if(t<0||t>=r.length-1)g.pathShape=void 0;else{const n=r[t],o=r[t+1];if(!(n instanceof i&&o instanceof i))throw new Error("wtf");const e=i.angles(n.x0,n.y0,n.requestedIncomingAngle,o.x,o.y,o.requestedOutgoingAngle);g.pathShape=new v(r.toSpliced(t,2,e)),g.selectedIndex=t}break}case"deleteThenMerge":{if(t<1||t>=r.length-1)g.pathShape=void 0;else{const n=r[t-1],o=r[t],e=r[t+1];if(!(n instanceof i&&o instanceof i&&e instanceof i))throw new Error("wtf");const d=(n.x+e.x0)/2,l=(n.y+e.y0)/2,h=n.requestedOutgoingAngle,E=e.requestedIncomingAngle,s=h+m.angleBetween(h,E)/2,w=i.angles(n.x0,n.y0,n.requestedIncomingAngle,d,l,s),x=i.angles(d,l,s,e.x,e.y,e.requestedOutgoingAngle),b=r.toSpliced(t-1,3,w,x);g.pathShape=new v(b),g.selectedIndex=t-1}break}case"recreate":{const n=r.map((o,e,d)=>{if(e!=t)return o;{const l=d[e-1],h=l?l instanceof i?l.requestedOutgoingAngle:l.outgoingAngle:o.incomingAngle,E=d[e+1],s=E?E instanceof i?E.requestedIncomingAngle:E.incomingAngle:o.outgoingAngle;return i.angles(o.x0,o.y0,h,o.x,o.y,s)}});g.pathShape=new v(n),g.selectedIndex=t;break}default:throw new Error("wtf")}}};A.listeners.push(a),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(c=>c.addEventListener("click",a))}S.addEventListener("click",()=>{A.pathShape=void 0;const a=p.value,c=v.fromString(a);A.pathShape=c,p.selectionStart=0,p.selectionEnd=Number.MAX_SAFE_INTEGER,p.focus()});p.addEventListener("keyup",a=>{a.code=="Enter"&&(S.click(),a.preventDefault())});{let a=()=>{};const c=()=>{const t=p.value;if(t.trim()==="")p.style.backgroundColor="",S.disabled=!0,T.innerText="";else try{v.fromString(t),S.disabled=!1,T.innerText=""}catch(f){if(!(f instanceof V))throw f;S.disabled=!0,T.innerText=f.message,a=()=>{p.focus(),p.setSelectionRange(t.length-f.where.length,t.length)}}};p.addEventListener("input",c),p.value="m217.7 147.93-5.3726 53.177q-1.2972 13.896-1.2972 27.793 0 26.496 6.1147 32.24 6.2997 5.5587 14.267 5.5587 17.787 0 21.123-22.42h6.8557q-6.1147 51.509-40.948 51.509-36.501 0-36.501-41.874 0-21.122 4.0749-52.621l6.8557-53.362h-18.343q-15.193 0-23.716 5.1882-8.3378 5.0027-15.564 20.381h-6.6702q5.9292-20.381 14.081-32.24 8.1528-12.044 15.564-16.12 7.4117-4.2616 22.049-4.2616h91.16v27.052z",c(),T.parentElement.addEventListener("click",()=>a())}{let a=function(e,d){const l=document.createElement("th");e.appendChild(l),d!==void 0&&l.append((d*m.degreesPerRadian).toFixed(1)+"Â° "+d.toFixed(3))};const c=M("byAngle",HTMLTableElement),t=0,f=5,r=m.initializedArray(f,e=>t+Math.PI*2*e/f),n=3,o=m.initializedArray(n,e=>t+Math.PI*2*e/n);{const e=c.insertRow();a(e),r.forEach(d=>{a(e,d)})}o.forEach((e,d)=>{const l=c.insertRow();a(l,e),r.forEach((h,E)=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("angles");const w=0,x=1,b=0,P=1;s.viewBox.baseVal.x=w,s.viewBox.baseVal.y=b,s.viewBox.baseVal.width=x-w,s.viewBox.baseVal.height=P-b,l.insertCell().appendChild(s);function C(y,I){const k=document.createElementNS("http://www.w3.org/2000/svg","line"),H=.2,[L,B,R]=I?[w,b,y+Math.PI]:[x,P,y],D=m.polarToRectangular(H,R);k.x1.baseVal.value=L,k.x2.baseVal.value=L+D.x,k.y1.baseVal.value=B,k.y2.baseVal.value=B+D.y,s.appendChild(k)}C(h,!0),C(e,!1);const q=document.createElementNS("http://www.w3.org/2000/svg","path"),u=i.angles(w,b,h,x,P,e);if(u.creationInfo.success){const y=new v([u]).rawPath;q.setAttribute("d",y),s.appendChild(q);const I=Math.abs(m.angleBetween(h,u.incomingAngle))+Math.abs(m.angleBetween(e,u.outgoingAngle));I>m.radiansPerDegree?(console.error({error:I,degrees:I*m.degreesPerRadian,path:q,inExpected:h,inFound:u.incomingAngle,outExpected:e,outFound:u.outgoingAngle,qCommand:u}),s.style.backgroundColor="lightpink"):s.style.backgroundColor="rgb(26, 217, 255)"}else s.style.backgroundColor="hsl(190 100% 85% / 1)";s.addEventListener("click",()=>{console.log({inExpected:h,inFound:u?.incomingAngle,outExpected:e,outFound:u?.outgoingAngle,qCommand:u});const y=i.angles(w,b,h,x,P,e);console.log(y)})})})}S.click();
