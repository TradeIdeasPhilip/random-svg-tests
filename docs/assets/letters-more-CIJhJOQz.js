import{m as U,i as K,b as tt}from"./client-misc-DWuUZUgy.js";import{b as O,l as T,e as dt,c as Z,r as ut,f as I,g as nt,a as Y}from"./utility-BTo8yCd1.js";class F{constructor(a,n,d,c){this.x0=a,this.y0=n,this.x=d,this.y=c,O(a,n,d,c),this.asString=`L ${d},${c}`,this.outgoingAngle=this.incomingAngle=Math.atan2(c-n,d-a)}toJSON(){return{command:"L",x0:this.x0,y0:this.y0,x:this.x,y:this.y}}incomingAngle;outgoingAngle;command="L";asString;translate(a,n){return new F(this.x0+a,this.y0+n,this.x+a,this.y+n)}toCubic(){return new N(this.x0,this.y0,T(this.x0,this.x,1/3),T(this.y0,this.y,1/3),T(this.x0,this.x,2/3),T(this.y0,this.y,2/3),this.x,this.y)}}class C{constructor(a,n,d,c,s,u,p){this.x0=a,this.y0=n,this.x1=d,this.y1=c,this.x=s,this.y=u,this.creationInfo=p,O(a,n,d,c,s,u),this.asString=`Q ${d},${c} ${s},${u}`}static line(a,n,d,c,s){return new this(a,n,(a+d)/2,(n+c)/2,d,c,s)}static line4(a,n,d,c){return this.line(a,n,d,c,{source:"line"})}static line2(a,n){return this.line4(a.x,a.y,n.x,n.y)}static angles(a,n,d,c,s,u){O(a,n,d,c,s,u);const p=et({x0:a,y0:n,angle:d},{x0:c,y0:s,angle:u+Math.PI});return p?new this(a,n,p.x,p.y,c,s,{source:"angles",success:!0,angle:u,angle0:d}):this.line(a,n,c,s,{source:"angles",success:!1,angle:u,angle0:d})}newAngles(a,n){return a??=this.requestedIncomingAngle,n??=this.requestedOutgoingAngle,C.angles(this.x0,this.y0,a,this.x,this.y,n)}static tryAngles(a,n,d,c,s,u){O(a,n,d,c,s,u);const p=et({x0:a,y0:n,angle:d},{x0:c,y0:s,angle:u+Math.PI});if(p)return new this(a,n,p.x,p.y,c,s,{source:"angles",success:!0,angle:u,angle0:d})}toJSON(){return{command:"Q",x0:this.x0,y0:this.y0,x1:this.x1,y1:this.y1,x:this.x,y:this.y,creationInfo:this.creationInfo}}static controlPoints(a,n,d,c,s,u){return new this(a,n,d,c,s,u,{source:"controlPoints"})}get incomingAngle(){return Math.atan2(this.y1-this.y0,this.x1-this.x0)}get outgoingAngle(){return Math.atan2(this.y-this.y1,this.x-this.x1)}get requestedIncomingAngle(){return this.creationInfo.source=="angles"?this.creationInfo.angle0:this.incomingAngle}get requestedOutgoingAngle(){return this.creationInfo.source=="angles"?this.creationInfo.angle:this.outgoingAngle}command="Q";asString;translate(a,n){return C.controlPoints(this.x0+a,this.y0+n,this.x1+a,this.y1+n,this.x+a,this.y+n)}toCubic(){return new N(this.x0,this.y0,T(this.x0,this.x1,2/3),T(this.y0,this.y1,2/3),T(this.x,this.x1,2/3),T(this.y,this.y1,2/3),this.x,this.y)}}class N{constructor(a,n,d,c,s,u,p,g){this.x0=a,this.y0=n,this.x1=d,this.y1=c,this.x2=s,this.y2=u,this.x=p,this.y=g,O(a,n,d,c,s,u,p,g),this.asString=`C ${d},${c} ${s},${u} ${p},${g}`}reverse(){return new N(this.x,this.y,this.x2,this.y2,this.x1,this.y1,this.x0,this.y0)}static relative(a,n,d,c,s,u,p,g){return new this(a,n,d+a,c+n,s+a,u+n,p+a,g+n)}get incomingAngle(){return Math.atan2(this.y1-this.y0,this.x1-this.x0)}get outgoingAngle(){return Math.atan2(this.y-this.y2,this.x-this.x2)}command="C";asString;translate(a,n){return new N(this.x0+a,this.y0+n,this.x1+a,this.y1+n,this.x2+a,this.y2+n,this.x+a,this.y+n)}toCubic(){return this}}class m{get commands(){return this.#t}addCommand(a){this.#t.push(a),this.#n=void 0}addCommands(a){return a.forEach(n=>this.addCommand(n)),this}static fromStrings(a){let n=a.join(" ");const d=[];let c;for(;n=n.replace(/^ */,""),n!="";){let s=ct.exec(n);if(s){const u=I(s[1]),p=I(s[2]);if(u===void 0||p===void 0)throw console.error(s,u,p,this),new Error("wtf");c&&d.push(c),c=this.M(u,p),n=s[3];continue}if(c){if(s=it.exec(n),s){const u=I(s[1]),p=I(s[2]);if(u===void 0||p===void 0)throw console.error(s,u,p,this),new Error("wtf");c=c.L(u,p),n=s[3];continue}if(s=rt.exec(n),s){const u=I(s[1]),p=I(s[2]),g=I(s[3]),i=I(s[4]);if(u===void 0||p===void 0||g===void 0||i===void 0)throw console.error(s,u,p,g,i,this),new Error("wtf");c=c.Q(u,p,g,i),n=s[5];continue}if(s=ht.exec(n),s){const u=I(s[1]),p=I(s[2]),g=I(s[3]),i=I(s[4]),v=I(s[5]),H=I(s[6]);if(u===void 0||p===void 0||g===void 0||i===void 0||v===void 0||H===void 0)throw console.error(s,u,p,g,i,v,H,this),new Error("wtf");c=c.C(u,p,g,i,v,H),n=s[7];continue}}throw console.error(n),new Error("wtf")}return c&&d.push(c),d}static M(a,n){const d=new m;return d.M(a,n),d}#t=[];get pathShape(){return new y(this.#t)}#n;M(a,n,d=NaN){return O(a,n),this.#n={x:a,y:n,outgoingAngle:d},this}previous(){return this.#n??this.#t.at(-1)}H(a){const n=this.previous();return this.addCommand(new F(n.x,n.y,a,n.y)),this}V(a){const n=this.previous();return this.addCommand(new F(n.x,n.y,n.x,a)),this}L(a,n){const d=this.previous();return this.addCommand(new F(d.x,d.y,a,n)),this}Q(a,n,d,c){const s=this.previous();return this.addCommand(C.controlPoints(s.x,s.y,a,n,d,c)),this}Q_HV(a,n){const d=this.previous();return this.Q(a,d.y,a,n)}Q_VH(a,n){const d=this.previous();return this.Q(d.x,n,a,n)}Q_angles(a,n,d,c){const s=this.previous();if(c??=s.outgoingAngle,c===void 0)throw new Error("wtf");return this.addCommand(C.angles(s.x,s.y,c,a,n,d)),this}C(a,n,d,c,s,u){const p=this.previous();return this.addCommand(new N(p.x,p.y,a,n,d,c,s,u)),this}circle(a,n,d="cw"){const c=this.previous(),s=c.x,u=c.y,p=Math.atan2(u-n,s-a),g=Math.hypot(u-n,s-a),i=d=="cw"?1:-1,v=p+Math.PI*2*i,H=U(0,p,1,v);function r(t){switch(t){case 0:case 1:return c;default:{const o=H(t),e=Y(g,o);return{x:a+e.x,y:n+e.y}}}}function L(t){return r(t)}return this.addParametricPath(L,8),this}arc(a,n,d,c,s){const u=this.previous(),p=u.x,g=u.y;let i=nt(Math.atan2(g-n,p-a),Math.PI*2);const v=Math.hypot(g-n,p-a);let H=nt(Math.atan2(c-n,d-a),Math.PI*2);const r=Math.hypot(c-n,d-a);s=="cw"?i>H&&(H+=Math.PI*2):i<H&&(i+=Math.PI*2);const L=Math.abs(i-H),W=Math.ceil(L*1.17+1e-4),t=U(0,v,1,r),o=U(0,i,1,H);function e(h){switch(h){case 0:return u;case 1:return{x:d,y:c};default:{const l=Y(t(h),o(h));return{x:a+l.x,y:n+l.y}}}}return this.addParametricPath(e,W)}addParametricPath(a,n){if(n<=0)throw new Error("wtf");const d=.01/n,c=K(n+1,u=>{const p=u/n,g=a(p),i=gt(a,p,d);return{t:p,point:g,direction:i}});return K(n,u=>({from:c[u],to:c[u+1]})).forEach(u=>{this.Q_angles(u.to.point.x,u.to.point.y,u.to.direction,u.from.direction)}),this}}function gt(Q,a,n){if(!(a>=0&&a<=1))throw new Error("Expected 0 ≤ t ≤ 1");const d=Math.max(0,a-n),c=Q(d),s=Math.min(1,a+n),u=Q(s),p=u.x-c.x,g=u.y-c.y;return p==0&&g==0?NaN:Math.atan2(g,p)}const X=" *",S="(-?[0-9]+\\.?[0-9]*)",P=" *[, ] *",ct=new RegExp(`^M${X}${S}${P}${S}(.*)$`),it=new RegExp(`^L${X}${S}${P}${S}(.*)$`),rt=new RegExp(`^Q${X}${S}${P}${S}${P}${S}${P}${S}(.*)$`),ht=new RegExp(`^C${X}${S}${P}${S}${P}${S}${P}${S}${P}${S}${P}${S}(.*)$`),st=new RegExp(`^${X}${S}${P}${S}${P}${S}${P}${S}${P}${S}${P}${S}(.*)$`),mt=new RegExp(`^c${X}${S}${P}${S}${P}${S}${P}${S}${P}${S}${P}${S}(.*)$`);class Mt extends Error{constructor(a,n){super(a),this.where=n}}class y{static fromString(a){const n=this.fromJson(a);if(n)return n;let d=a,c=null;const s=r=>new Mt(r,d),u=r=>{const L=I(r);if(L===void 0)throw s(`Invalid number: "${r}"`);return L};let p=NaN,g=NaN;const i=[],v=r=>{i.push(r),p=r.x,g=r.y};let H=!1;for(;d=d.replace(/^ */,""),d!="";){if(c=ct.exec(d),c){p=u(c[1]),g=u(c[2]),H=!0,d=c[3];continue}if(!H)throw s("Must start with an M command.");if(c=it.exec(d),c){const r=u(c[1]),L=u(c[2]),W=new F(p,g,r,L);v(W),d=c[3];continue}if(c=rt.exec(d),c){const r=u(c[1]),L=u(c[2]),W=u(c[3]),t=u(c[4]),o=C.controlPoints(p,g,r,L,W,t);v(o),d=c[5];continue}if(c=ht.exec(d),c){for(;c;){const r=u(c[1]),L=u(c[2]),W=u(c[3]),t=u(c[4]),o=u(c[5]),e=u(c[6]),h=new N(p,g,r,L,W,t,o,e);v(h),d=c[7],c=st.exec(d)}continue}if(c=mt.exec(d),c){for(;c;){const r=u(c[1]),L=u(c[2]),W=u(c[3]),t=u(c[4]),o=u(c[5]),e=u(c[6]),h=N.relative(p,g,r,L,W,t,o,e);v(h),d=c[7],c=st.exec(d)}continue}throw s("Confused.")}return new this(i)}static fromJson(a){try{const d=JSON.parse(a).commands.map(c=>{switch(c.command){case"C":{const{x0:s,y0:u,x1:p,y1:g,x2:i,y2:v,x:H,y:r}=c;return new N(s,u,p,g,i,v,H,r)}case"L":{const{x0:s,y0:u,x:p,y:g}=c;return new F(s,u,p,g)}case"Q":{const{x0:s,y0:u,x:p,y:g,creationInfo:i}=c;switch(i.source){case"angles":{const{angle0:v,angle:H}=i,r=C.angles(s,u,v,p,g,H);return(r.creationInfo.source!="angles"||r.creationInfo.success!=i.success)&&console.warn("different",c,r),r}case"controlPoints":{const{x1:v,y1:H}=c;return C.controlPoints(s,u,v,H,p,g)}case"line":return C.line4(s,u,p,g);default:throw new Error(`Unknown source: "${i.source}"`)}}default:throw new Error(`Unknown command: "${c.command}"`)}});return new y(d)}catch{return}}matchForMorph(a){const n=this.commands.map(p=>p.toCubic()),d=a.commands.map(p=>p.toCubic());if(n.length!=d.length){const{shorter:p,longer:g}=n.length<d.length?{shorter:n,longer:d}:{shorter:d,longer:n};if(p.length==0)throw new Error("can't morph something into nothing");const i=g.length/p.length,v=[];p.forEach((H,r)=>{const L=Math.round((r+1)*i);for(;v.length<L;)v.push(H)}),p.length=0,p.push(...v)}if(n.length!=d.length)throw new Error("wtf");function c(p){return y.cssifyPath(p.map(g=>new y([g]).rawPath).join())}const s=c(n),u=c(d);return[s,u]}commands;get endX(){return this.commands.at(-1)?.x}get endY(){return this.commands.at(-1)?.y}get startX(){return this.commands.at(0)?.x0}get startY(){return this.commands.at(0)?.y0}constructor(a){this.commands=[...a]}static cssifyPath(a){return`path('${a}')`}get cssPath(){return y.cssifyPath(this.rawPath)}makeElement(){const a=document.createElementNS("http://www.w3.org/2000/svg","path"),n=this.cssPath;if(a.style.d=n,a.style.d=="")throw console.error(n,a),new Error("wtf");return a}static needAnM(a,n){return n?!a||a.x!=n.x0||a.y!=n.y0:!1}get rawPath(){return this.commands.flatMap((a,n)=>{const d=[],c=this.commands[n-1];return y.needAnM(c,a)&&d.push(`M ${a.x0},${a.y0}`),d.push(a.asString),d}).join(" ")}get cssPaths(){return this.splitOnMove().map(a=>a.cssPath)}get rawPaths(){return this.splitOnMove().map(a=>a.rawPath)}splitOnMove(){const a=[];let n=[];return this.commands.forEach(d=>{y.needAnM(n.at(-1),d)&&(n=[],a.push(n)),n.push(d)}),a.map(d=>new y(d))}static join(a){return new y(a.flatMap(({Δx:n,Δy:d,shape:c})=>c.translate(n,d).commands))}convertToCubics(){return new y(this.commands.map(a=>a.toCubic()))}translate(a,n){return new y(this.commands.map(d=>d.translate(a,n)))}static fixAngleRounding(a){return a+400-400}static toDegrees(a){return Math.round(a*dt*100)/100}dump(){const a=this.commands.map((n,d)=>{const{x0:c,y0:s,x:u,y:p,incomingAngle:g,outgoingAngle:i,command:v}=n,H=document.createElementNS("http://www.w3.org/2000/svg","path");H.setAttribute("d",new y([n]).rawPath);const r=H.getTotalLength(),L=this.commands[d-1],t=y.needAnM(L,n)?{}:{difference:y.toDegrees(Z(L.outgoingAngle,g))};return{x0:c,y0:s,x:u,y:p,incomingAngle:y.toDegrees(g),outgoingAngle:y.toDegrees(i),length:r,c:v,...t}});console.table(a),console.log(this.rawPath),console.log(JSON.stringify(this))}}function et(Q,a){if(O(Q.x0,Q.y0,Q.angle,a.x0,a.y0,a.angle),isNaN(Q.angle)||isNaN(a.angle)||Q.angle==a.angle)return;const n=Math.tan(Q.angle),d=Math.tan(a.angle),c=Math.abs(n)*100>Number.MAX_SAFE_INTEGER,s=Math.abs(d)*100>Number.MAX_SAFE_INTEGER;if(c&&s)return;const u=Math.atan2(a.y0-Q.y0,a.x0-Q.x0),p=Z(Q.angle,u),g=Z(a.angle,u);if(p==0||Math.abs(g)==Math.PI){if(Math.abs(p)==Math.PI||g==0)return;const H=(Q.x0+a.x0)/2,r=(Q.y0+a.y0)/2;return{x:H,y:r}}const i=Math.sign(p),v=Math.sign(g);if(!(i!=v||i==0)&&!(Math.abs(g)<=Math.abs(p)+ut))if(c||s){const H=c?Q.x0:a.x0,r=c?{...a,slope:d}:{...Q,slope:n},L=r.slope*(H-r.x0)+r.y0;return{x:H,y:L}}else{const H=(a.y0-d*a.x0-Q.y0+n*Q.x0)/(n-d),r=n*(H-Q.x0)+Q.y0;return{x:H,y:r}}}class ft{constructor(a,n=a/10){if(this.fontSize=a,this.strokeWidth=n,a<=0||!isFinite(a))throw new Error("wtf")}get mHeight(){return this.fontSize}get xHeight(){return this.fontSize*.5}get aWidth(){return this.fontSize*.75}get digitWidth(){return this.fontSize*.5}get defaultKerning(){return this.strokeWidth*2.5}get spaceWidth(){return this.strokeWidth+this.digitWidth/2}get top(){return this.capitalTop-this.mHeight/4}get capitalTop(){return this.baseline-this.mHeight}get capitalTopMiddle(){return(this.capitalTop+this.capitalMiddle)/2}get capitalMiddle(){return this.baseline-this.xHeight}get capitalBottomMiddle(){return(this.baseline+this.capitalMiddle)/2}get baseline(){return 0}get descender(){return this.mHeight/4}get bottom(){return this.descender+this.mHeight/4}}class wt{constructor(a,n,d){this.advance=n,this.fontMetrics=d,a instanceof y?this.#t=()=>a:this.#t=a}#t;get shape(){return this.#t()}get cssPath(){return this.shape.cssPath}get d(){return this.shape.rawPath}makeElement(){return this.shape.makeElement()}makeElements(){return this.shape.splitOnMove().map(a=>({innerShape:a,element:a.makeElement()}))}}function Vt(Q){function a(c){return c.length==1}let n="",d=[];return Q.forEach((c,s)=>{a(s)?n+=s:d.push(c)}),{normal:n,special:d}}const z=0,D=Math.PI/4,B=2*D,xt=3*D,ot=4*D,Ht=5*D,J=6*D,at=7*D;function pt(Q){const a=new Map;typeof Q=="number"&&(Q=new ft(Q));const n=(t,o,e)=>{const h=new wt(o,e,Q);if(a.has(t))throw new Error(`duplicate letter: "${t}", previous letter: "${[...a].at(-1)[0]}"`);a.set(t,h)},{aWidth:d,digitWidth:c,capitalTop:s,capitalTopMiddle:u,capitalMiddle:p,capitalBottomMiddle:g,baseline:i,descender:v,strokeWidth:H}=Q,r=0,L=H/3;{const t=Q.mHeight,o=.5803571598560251*t,e=[];e.push(C.controlPoints(.5803571598560251*t,-.011904772996231272*t,.1993461912459357*t,-.4845653833822309*t,.15178572549774305*t,-.5833333559985097*t)),e.push(C.controlPoints(.15178572549774305*t,-.5833333559985097*t,.07142858010885174*t,-.7502096094253163*t,.07142858010885174*t,-.8809523915616125*t)),e.push(C.controlPoints(.07142858010885174*t,-.8809523915616125*t,.07142858010885174*t,-1*t,.18154763484090689*t,-1*t)),e.push(C.controlPoints(.18154763484090689*t,-1*t,.3125000278492327*t,-1*t,.3125000278492327*t,-.8809523857747589*t)),e.push(C.controlPoints(.3125000278492327*t,-.8809523857747589*t,.3125000278492327*t,-.795672021064033*t,.14880952935525849*t,-.5863095347804337*t)),e.push(C.controlPoints(.14880952935525849*t,-.5863095347804337*t,0*t,-.39598002063544424*t,0*t,-.23511904966855834*t)),e.push(C.controlPoints(0*t,-.23511904966855834*t,0*t,0*t,.16369048113341364*t,0*t)),e.push(C.controlPoints(.16369048113341364*t,0*t,.31699631330709954*t,0*t,.45535713019840074*t,-.4583333263408854*t)),n("&",new y(e),o)}{const t=c,o=t/2*Math.sqrt(3),e=(i+s)/2,h=e-t/2,l=h+t,M=0,f=o;n("<",new y([C.line4(f,h,M,e),C.line4(M,e,f,l)]),o),n(">",new y([C.line4(M,h,f,e),C.line4(f,e,M,l)]),o)}{const t=c*.9,o=t/2,e=t/2,h=e*Math.SQRT1_2,l=m.M(r,s+e);l.arc(o,s+e,o+h,s+e+h,"cw"),l.Q_angles(o,g,B),l.M(o,i-L),l.L(o,i),n("?",l.pathShape,t)}{const t=c*7/8,o=t/2,e=t,h=t/2,l=Q.mHeight/8,M=s-l,f=i+l;if(f-M<h*4)throw new Error("wtf");const x=(M+f)/2,_=m.M(e,M).arc(e,M+h,o,M+h,"ccw").L(o,x-h).arc(r,x-h,r,x,"cw").arc(r,x+h,o,x+h,"cw").L(o,f-h).arc(e,f-h,e,f,"ccw").pathShape;n("{",_,t);const w=m.M(r,M).arc(r,M+h,o,M+h,"cw").L(o,x-h).arc(e,x-h,e,x,"ccw").arc(e,x+h,o,x+h,"ccw").L(o,f-h).arc(r,f-h,r,f,"cw").pathShape;n("}",w,t)}{const t=c,e=t/2,h=t;{const l=(v-i)*2,M=v,f=M-l,x=s-l/4,_=x+l;if(l<=0||M<=f||f<=_||_<=x)throw new Error("wtf");const w=c*.5;{const V=m.M(w,x).Q_HV(0,_).V(f).Q_VH(w,M).pathShape;n("(",V,w)}{const V=c*.5,b=m.M(0,x).Q_HV(V,_).V(f).Q_VH(0,M).pathShape;n(")",b,V)}{const V=m.M(w,x).H(0).V(M).H(w).pathShape;n("[",V,w)}{const V=m.M(0,x).H(w).V(M).H(0).pathShape;n("]",V,w)}}{const l=c*.4,M=c*.3,f=r,x=f+l,_=x+M,w=_+M,V=w+l,b=V,R=c*.25,E=p,A=E-R,$=E+R,k=m.M(f,E).Q_angles(x,A,z,at).Q_angles(_,E,(B+D)/2).Q_angles(w,$,z).Q_angles(V,E,at).pathShape;n("~",k,b)}{const l=c*.75,M=l/2,f=m.M(M,p-M).V(p+M).M(r,p).H(l).pathShape;n("+",f,l)}{const l=c*.75,M=m.M(r,p).H(l).pathShape;n("-",M,l)}{const l=c/2*.9,M=5,f=-Math.PI/2,x=(s+i)/2,_=0,w=K(M,$=>{const k=$*(Math.PI*2)/M+f,q=Y(_,k),G=Y(l,k);return[q,G]}),V=w.flat(),b=Math.min(...V.map(({x:$})=>$));V.forEach($=>{$.x-=b,$.y+=x});const R=w.map(([$,k])=>new F($.x,$.y,k.x,k.y)),E=new y(R),A=Math.max(...V.map(({x:$})=>$));n("*",E,A)}{const l=c*.75,M=m.M(r,p-H*1.25).H(l).M(r,p+H*1.25).H(l).pathShape;n("=",M,l)}{const l=c*1.25,M=i+H,f=m.M(0,M).H(l).pathShape;n("_",f,l)}{const l=c/2,M=3*l,f=l/3,x=s,_=x+l,w=_+l,V=w+l,b=m.M(l+f,x).L(l-f,V).M(2*l+f,x).L(2*l-f,V).M(0,_).H(M).M(0,w).H(M).pathShape;n("#",b,M)}{const l=c/2,M=3*l,f=0,x=l,_=M/2,w=2*l,V=M,b=s+(Q.mHeight-M)/2,R=b+x,E=b+_,A=b+w,$=b+V,k=m.M(w,E).Q_VH(_,R).Q_HV(x,E).Q_VH(_,A).Q_HV(w,E).Q_VH((w+V)/2,A).Q_HV(V,E).V((R+E)/2).Q_VH(_,b).Q_HV(f,E).Q_VH(_,$).H((w+V)/2).pathShape;n("@",k,M)}{const l=m.M(e,s).Q(h,s,h,u).L(h,g).Q(h,i,e,i).Q(r,i,r,g).L(r,u).Q(r,s,e,s).M(h,u).L(r,g).pathShape;n("0",l,t)}{const l=m.M(r,u).Q(e,u,e,s).L(e,i).M(r,i).L(h,i).pathShape;n("1",l,t)}{const l=m.M(r,u).Q_VH(e,s).Q_HV(h,u).Q_VH(e,p).Q_HV(r,i).L(h,i).pathShape;n("2",l,t)}{const l=m.M(r,u).Q_VH(e,s).Q_HV(h,u).Q_VH(e,p).Q_HV(h,g).Q_VH(e,i).Q_HV(r,g).pathShape;n("3",l,t)}{const l=(e+h)/2,M=(e+r)/2,f=m.M(h,p).L(r,p).L(M,s).M(l,s).L(l,i).pathShape;n("4",f,t)}{const l=r+c/5,M=h-c/5,f=(p+g)/2,x=m.M(M,s).L(l,s).L(r,p).Q_VH(e,u).Q_HV(h,f).Q_VH(e,i).Q_HV(r,g).pathShape;n("5",x,t)}{const l=m.M(h,s).Q_HV(r,g).Q_VH(e,i).Q_HV(h,g).Q_VH(e,p).Q_HV(r,g).pathShape;n("6",l,t)}{const l=m.M(r,s).L(h,s).L(r,i).pathShape;n("7",l,t)}{const l=m.M(e,s).Q(h,s,h,u).Q(h,p,e,p).Q(r,p,r,g).Q(r,i,e,i).Q(h,i,h,g).Q(h,p,e,p).Q(r,p,r,u).Q(r,s,e,s).pathShape;n("8",l,t)}{const l=m.M(h,u).Q(h,s,e,s).Q(r,s,r,u).Q(r,p,e,p).Q(h,p,h,u).Q(h,i,r,i).pathShape;n("9",l,t)}}{const t=m.M(r,i).L(d/2,s).L(Q.aWidth,i).M(Q.aWidth/4,p).L(Q.aWidth*.75,p).pathShape;n("A",t,d)}{const t=c,o=u-s;if(o<=0)throw new Error("wtf");const e=(t-o)*(2/3),h=i-g;if(h<=0)throw new Error("wtf");const l=t-h,M=m.M(r,i).L(r,s).L(e,s).Q_HV(e+o,s+o).Q(e+o,p,e,p).L(r,p).M(Math.max(l,e),p).Q_HV(l+h,i-h).Q_VH(l,i).L(r,i).pathShape;n("B",M,t)}{const t=c,e=t/2,h=t,l=m.M(h,u).Q(h,s,e,s).Q(r,s,r,u).L(r,g).Q(r,i,e,i).Q(h,i,h,g).pathShape;n("C",l,t)}{const t=c,e=t/2,h=t,l=m.M(r,s).L(r,i).L(e,i).Q(h,i,h,g).L(h,u).Q(h,s,e,s).L(r,s).pathShape;n("D",l,t)}{const t=c,o=t*(2/3),e=t,h=m.M(e,s).L(r,s).L(r,i).L(e,i).M(o,p).L(r,p).pathShape;n("E",h,t)}{const t=c,o=t*(2/3),e=t,h=m.M(e,s).L(r,s).L(r,i).M(o,p).L(r,p).pathShape;n("F",h,t)}{const t=c,e=t/2,h=t,l=m.M(h,u).Q(h,s,e,s).Q(r,s,r,u).L(r,g).Q(r,i,e,i).Q(h,i,h,g).L(h,p).L(e,p).pathShape;n("G",l,t)}{const t=c,o=t,e=m.M(r,s).L(r,i).M(o,s).L(o,i).M(r,p).L(o,p).pathShape;n("H",e,t)}{const t=Q.mHeight/3,o=t/2,e=t,h=m.M(r,s).L(e,s).M(r,i).L(e,i).M(o,s).L(o,i).pathShape;n("I",h,t)}{const t=c*.85,e=t/2,h=t,l=m.M(h,s).L(h,g).Q(h,i,e,i).Q(r,i,r,g).pathShape;n("J",l,t)}{const t=c+H,o=(s+i)/2,e=m.M(r,s).L(r,i).M(t,s).L(r+.5,o).L(t,i).pathShape;n("K",e,t)}{const t=c,o=m.M(r,s).L(r,i).L(t,i).pathShape;n("L",o,t)}{const t=c*1.5,o=t/2,e=m.M(r,i).L(r,s).L(o,p).L(t,s).L(t,i).pathShape;n("M",e,t)}{const t=c*1.2,o=m.M(r,i).L(r,s).L(t,i).L(t,s).pathShape;n("N",o,t)}{const t=c*1.5,o=t/2,e=(s+i)/2,h=m.M(o,s).Q_HV(t,e).Q_VH(o,i).Q_HV(r,e).Q_VH(o,s).pathShape;n("O",h,t)}{const t=c,o=p-u;if(o<=0)throw new Error("wtf");const e=t-o,h=m.M(r,s).L(r,i).M(r,s).L(e,s).Q_HV(t,u).Q_VH(e,p).L(r,p).pathShape;n("P",h,t)}{const t=c*1.5,o=t/2,e=(s+i)/2,h=m.M(o,s).Q_HV(t,e).Q_VH(o,i).Q_HV(r,e).Q_VH(o,s).M(t-o*.75,i-o*.75).L(t+o/6,i+o/6).pathShape;n("Q",h,t)}{const t=c,o=p-u;if(o<=0)throw new Error("wtf");const e=t-o,h=m.M(r,s).L(r,i).M(r,s).L(e,s).Q_HV(t,u).Q_VH(e,p).L(r,p).M(e,p).L(t,i).pathShape;n("R",h,t)}{const t=c,o=c/2,e=c,h=m.M(e,u).Q_VH(o,s).Q_HV(r,u).Q_VH(o,p).Q_HV(e,g).Q_VH(o,i).Q_HV(r,g).pathShape;n("S",h,t)}{const o=c+H,e=o/2,h=o,l=Q.mHeight/8,M=m.M(h,u).Q_VH(e,s).Q_HV(r,u).Q_VH(e,p).Q_HV(h,g).Q_VH(e,i).Q_HV(r,g).M(e,s-l).V(i+l).pathShape;n("$",M,o)}{const t=c,o=t/2,e=m.M(o,s).L(o,i).M(t,s).L(r,s).pathShape;n("T",e,t)}{const t=(g+p)/2,o=Math.abs(t-i)*.85,e=o*2,h=m.M(r,s).V(t).Q_VH(o,i).Q_HV(e,t).V(s).pathShape;n("U",h,e)}{const t=d,o=t/2,e=m.M(r,s).L(o,i).L(t,s).pathShape;n("V",e,t)}{const t=d*1.5,o=t/3,e=t/2,h=o*2,l=m.M(r,s).L(o,i).L(e,p).L(h,i).L(t,s).pathShape;n("W",l,t)}{const t=c,o=m.M(t,s).L(r,i).M(r,s).L(t,i).pathShape;n("X",o,t)}{const t=H,o=c+t,e=m.M(o,s).L(t,i).M(r,s).L(o/2,p).pathShape;n("Y",e,o)}{const t=c,o=m.M(r,s).H(t).L(r,i).H(t).pathShape;n("Z",o,t)}{const t=c/4,o=c*1.2,e=m.M(t*2,s+t).Q_VH(t,s).Q_HV(0,s+t).Q_VH(t,s+t*2).Q_HV(t*2,s+t),l=e.pathShape.translate(o-t*2,Q.mHeight-t*2);e.addCommands(l.commands),e.M(o,s).L(r,i);const M=e.pathShape;n("%",M,o)}{const t=c,o=m.M(t,s).L(r,i).pathShape;n("/",o,t)}{const t=c,o=m.M(r,s).L(t,i).pathShape;n("\\",o,t)}{const t=c,o=H/2,e=t+o,h=t/2,l=m.M(h,p).Q_HV(r,g).Q_VH(h,i).Q_HV(t,g).Q_VH(h,p).M(e,p).L(e,i).pathShape;n("a",l,e)}{const t=c,o=H/2,e=t+o,h=o,l=o+t/2,M=e,f=m.M(r,s).V(i).M(h,g).Q_VH(l,i).Q_HV(M,g).Q_VH(l,p).Q_HV(h,g).pathShape;n("b",f,e)}{const t=c*.875,o=0,e=c/2,h=t,l=(p+g)/2,M=(g+i)/2,f=m.M(h,l).Q_VH(e,p).Q_HV(o,g).Q_VH(e,i).Q_HV(h,M).pathShape;n("c",f,t)}{const t=c,o=H/2,e=t+o,h=t/2,l=m.M(h,p).Q_HV(r,g).Q_VH(h,i).Q_HV(t,g).Q_VH(h,p).M(e,s).L(e,i).pathShape;n("d",l,e)}const W=c/8;{const t=c,o=c/2,e=t,h=e-W,l=m.M(r,g).H(e).Q_VH(o,p).Q_HV(r,g).Q_VH(o,i).H(h).pathShape;n("e",l,t)}{const t=c*.75,o=t/2,e=t,h=m.M(e,s).Q_HV(o,u).V(i).M(e,p).H(r).pathShape;n("f",h,t)}{const t=c,o=H/2,e=t+o,h=t/2,l=m.M(h,p).Q_HV(r,g).Q_VH(h,i).Q_HV(t,g).Q_VH(h,p).M(e,p).V(i).Q_VH(h,v).H(r+W).pathShape;n("g",l,e)}{const t=c*.85,o=t/2,e=m.M(r,s).V(i).Q_VH(o,p).Q_HV(t,g).V(i).pathShape;n("h",e,t)}{const o=m.M(r,p).V(i).M(r,u).V(u-L).pathShape;n("i",o,0)}{const t=Math.abs(i-v),o=t/2,e=m.M(t,p).V(i).Q_VH(o,v).Q_HV(r,i).M(t,u).V(u-L).pathShape;n("j",e,t)}{const o=m.M(r,i).V(i-L).pathShape;n(".",o,0)}{const o=m.M(r,s).V(g).M(r,i).V(i-L).pathShape;n("!",o,0)}{const o=(v-i)/2,e=o/2,h=m.M(r,i-L).V(i).Q_VH(-e,i+o).pathShape;n(",",h,0)}{const e=(v-i)/2+L,h=new y([new F(r,s,r,s+e)]);n("'",h,0)}{const o=(v-i)/2+L,e=o,h=o,l=new y([new F(r,s,h,s+o)]);n("`",l,e)}{const o=(v-i)/2+L,e=o,h=o*2,l=h,M=s,f=s+o,x=m.M(r,f).L(e,M).L(l,f).pathShape;n("^",x,h)}{const t=H*2,e=(v-i)/2+L,h=new y([new F(r,s,r,s+e),new F(t,s,t,s+e)]);n('"',h,t)}{const o=p,e=m.M(r,i).V(i-L).M(r,o-L).V(o).pathShape;n(":",e,0)}{const o=new y([new F(r,s,r,i)]);n("|",o,0)}{const o=p,e=(v-i)/2,h=e/2,l=m.M(r,i-L).V(i).Q_VH(-h,i+e).M(r,o-L).V(o).pathShape;n(";",l,0)}{const t=Q.xHeight*2/3,o=c/10,e=t+o,h=m.M(r,s).V(i).M(t,p).L(r,p+t).M(t/2,i-t).L(e,i).pathShape;n("k",h,e)}{const o=m.M(r,s).V(i).pathShape;n("l",o,0)}{const t=c*1.5,o=t/4,e=t/2,h=t*3/4,l=t,M=m.M(r,p).V(i).Q_VH(o,p).Q_HV(e,g).V(i).M(e,g).Q_VH(h,p).Q_HV(l,g).V(i).pathShape;n("m",M,t)}{const t=c*.85,o=t/2,e=m.M(r,p).V(i).Q_VH(o,p).Q_HV(t,g).V(i).pathShape;n("n",e,t)}{const t=c,o=0,e=t/2,h=t,l=m.M(e,p).Q_HV(h,g).Q_VH(e,i).Q_HV(o,g).Q_VH(e,p).pathShape;n("o",l,t)}{const t=c,o=H/2,e=t+o,h=o,l=o+t/2,M=e,f=m.M(r,p).V(v).M(h,g).Q_VH(l,p).Q_HV(M,g).Q_VH(l,i).Q_HV(h,g).pathShape;n("p",f,e)}{const t=c,o=t/2,e=t+H/2,h=Math.abs(i-v),l=e+h/2,M=e+h,f=m.M(o,p).Q_HV(r,g).Q_VH(o,i).Q_HV(t,g).Q_VH(o,p).M(e,p).V(i).Q_VH(l,v).Q_HV(M,i).pathShape;n("q",f,M)}{const t=c,o=t/2,e=m.M(r,p).V(i).Q_VH(o,p).Q_HV(t,g).pathShape;n("r",e,t)}{const t=Q.xHeight*2/3,o=t/2,e=i,h=g,l=p,M=(e+h)/2,f=(h+l)/2,x=(f+l)/2,_=(e+M)/2,w=m.M(t,x).Q_VH(o,l).Q_HV(r,f).Q_VH(o,h).Q_HV(t,M).Q_VH(o,e).Q_HV(r,_).pathShape;n("s",w,t)}{const t=c*.75,o=t/2,e=t,h=m.M(o,u).V(g).Q_VH(e,i).M(e,p).H(r).pathShape;n("t",h,t)}{const t=c*.85,o=t/2,e=m.M(r,p).V(g).Q_VH(o,i).Q_HV(t,p).L(t,i).pathShape;n("u",e,t)}{const t=c,o=t/2,e=m.M(r,p).L(o,i).L(t,p).pathShape;n("v",e,t)}{const t=Q.xHeight*1.5,o=t/3,e=t/2,h=o*2,l=m.M(r,p).L(o,i).L(e,g).L(h,i).L(t,p).pathShape;n("w",l,t)}{const t=c,o=m.M(t,p).L(r,i).M(r,p).L(t,i).pathShape;n("x",o,t)}{const t=c,o=t/2,e=(p+v)/2,h=m.M(t,p).L(r,v).M(r,p).L(o,e).pathShape;n("y",h,t)}{const t=c,o=m.M(r,p).H(t).L(r,i).H(t).pathShape;n("z",o,t)}{const t=c/2,o=t/2,e=m.M(o,s).circle(o,s+o,"cw").pathShape;n("°",e,t)}{const t=-s,o=t/2,e=m.M(o,s).circle(o,s+o,"cw").pathShape;n("◯",e,t)}{const t=-s,o=t/2,e=s/2,h=m.M(0,e).arc(o,e,t,e,"cw").pathShape;n("◠",h,t)}{const t=-s,o=t/2,e=s/2,h=m.M(0,e).arc(o,e,t,e,"ccw").pathShape;n("◡",h,t)}{const t=-s,o=t/4,e=s+o,h=m.M(o*2,e).arc(o*3,e,t,e,"cw").Q_angles(o*2,i,xt,B).Q_angles(0,e,J,Ht).arc(o,e,o*2,e,"cw").pathShape;n("♡",h,t)}{const t=Q.mHeight,o=t/4,e=o;{const h=t,l=(s+i)/2,M=m.M(e,l-o).L(0,l).L(e,l+o).M(0,l).L(h,l).M(h-e,l-o).L(h,l).L(h-e,l+o);n("↔",M.pathShape,h);const f=new y(M.commands.slice(0,3));n("←",f,h);const x=new y(M.commands.slice(2,5));n("→",x,h)}{const l=o,M=o*2,f=M,x=m.M(0,s+e).L(l,s).L(f,s+e).M(l,s).L(l,i).M(0,i-e).L(l,i).L(f,i-e);n("↕",x.pathShape,M);const _=new y(x.commands.slice(0,3));n("↑",_,M);const w=new y(x.commands.slice(2,5));n("↓",w,M)}}{const t=Q.mHeight,o=0,e=t/2,h=t,l=s,M=i,f=(l+M)/2,x=Math.PI/16,_=m.M(e,l).Q_angles(h,f,z+x,B-x).Q_angles(e,M,B+x,ot-x).Q_angles(o,f,ot+x,J-x).Q_angles(e,l,J+x,z-x).pathShape;n("✧",_,t)}{let t=function(w,V){const b=w.maxY-w.minY,E=(V.bottom-V.top)/b,$=(w.maxX-w.minX)*E,k=0,q=$,G=tt(w.minX,k,w.maxX,q),lt=tt(w.minY,V.top,w.maxY,V.bottom);return{x:G,y:lt,advance:q}},o=function(){const w={x:1/0,y:1/0},V={x:-1/0,y:-1/0};M.forEach(A=>{["x","y"].forEach($=>{w[$]=Math.min(w[$],A[$]),V[$]=Math.max(V[$],A[$])})});const b={minX:w.x,maxX:V.x,minY:w.y,maxY:V.y},E=t(b,{top:s,bottom:i});return M.forEach(A=>{A.x=E.x(A.x),A.y=E.y(A.y)}),E};const l=J,M=K(5,w=>{const V=l+w*(2*Math.PI)*2/5;return Y(1,V)}),f=o(),x=M.map((w,V,b)=>{const R=b.at(V+1-b.length);return new F(w.x,w.y,R.x,R.y)});n("☆",new y(x),f.advance);const _=M.map((w,V,b)=>{const R=b.at(V+1-b.length),E=Math.atan2(R.y-w.y,R.x-w.x),A=.175;return C.angles(w.x,w.y,E+A,R.x,R.y,E-A)});n("⭒",new y(_),f.advance)}return new Map([...a.entries()].sort(([t],[o])=>t<o?-1:t==o?1:0))}class j{restart(a=5,n=this.lineHeight){this.leftMargin=a,this.x=a,this.baseline=n}leftMargin=0;rightMargin=95;x=this.leftMargin;baseline=0;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(a=1){this.baseline+=this.lineHeight*a}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=pt(5);getDescription(a){return this.font.get(a)}static join(a){return new y(a.flatMap(n=>n.description.shape.translate(n.x,n.baseline).commands))}displayText(a,n){return a.map(d=>{const c=d.description.shape,s=c.makeElement();return n.appendChild(s),s.style.transform=`translate(${d.x}px,${d.baseline}px)`,{...d,shape:c,element:s}})}static WORD_BREAK=/^(\n+| +|[^ \n]+)(.*)/ms;addText(a){const n=new Set,d=[];for(;;){const c=j.WORD_BREAK.exec(a);if(!c)break;const s=c[1];if(a=c[2],s[0]==`
`)this.carriageReturn(),this.lineFeed(s.length*4/3);else if(s[0]==" ")this.addSpace(s.length);else{let u=0;const p=0,g=[...s].flatMap(i=>{const v=this.getDescription(i);if(v){const H=v.advance+v.fontMetrics.defaultKerning,r={char:i,x:u,width:H,baseline:p,description:v};return u+=H,r}else return n.add(i),[]});this.x+u>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),g.forEach(i=>{i.x+=this.x,i.baseline=this.baseline,d.push(i)}),this.x+=u}}return n.size>0&&console.warn(n),d}addSpace(a=1){this.x+=this.font.get("0").fontMetrics.spaceWidth*a}static textToShape(a,n){const d=new j;d.font=n;const c=d.addText(a),s=j.join(c),u=d.x;return{shape:s,advance:u}}}class Lt{constructor(a){this.element=a}leftMargin=5;rightMargin=95;x=this.leftMargin;baseline=10;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(a=1){this.baseline+=this.lineHeight*a}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=pt(5);getDescription(a){return this.font.get(a)}makeRoom(a){this.x+a.advance>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed())}advance(a){this.x+=a.advance+a.fontMetrics.defaultKerning}moveToCursor(a){a.style.transform=`translate(${this.x}px,${this.baseline}px)`}showAndAdvance(a,n){return this.x+n>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),this.element.appendChild(a),a.style.transform=`translate(${this.x}px,${this.baseline}px)`,this.x+=n,this}show1(a){this.makeRoom(a);const n=a.makeElement();this.element.appendChild(n);const{x:d,baseline:c}=this;return this.moveToCursor(n),this.advance(a),{element:n,x:d,baseline:c}}splitAndShow1(a){this.makeRoom(a);const n=a.makeElements();return n.forEach(({element:d})=>{this.element.appendChild(d),this.moveToCursor(d)}),this.advance(a),n}show(a){const n=new Set,d=[...a].flatMap(c=>{const s=this.getDescription(c);return s?{...this.show1(s),description:s,char:c}:c==" "?(this.showSpace(),[]):(n.add(c),[])});return n.size>0&&console.warn(n),d}splitAndShow(a){const n=new Set,d=[...a].flatMap(c=>{const s=this.getDescription(c);return s?this.splitAndShow1(s):c==" "?(this.showSpace(),[]):(n.add(c),[])});return n.size>0&&console.warn(n),d}showSpace(a=1){return this.x+=this.font.get("0").fontMetrics.spaceWidth*a,this}}export{wt as D,ft as F,y as P,C as Q,j as T,Lt as W,Vt as d,pt as m};
