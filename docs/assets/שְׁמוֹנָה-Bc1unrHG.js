import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as S,Q as i,a as N}from"./path-shape-DxTxvizJ.js";import{c as v}from"./client-misc-ZHNZ3-cL.js";import{m as f}from"./misc-wGF4FraP.js";import{c as F}from"./path-debugger-widget-BgVYfnKn.js";import{R as P,a as O}from"./utility-By36BYLf.js";import{m as X}from"./rough-lib-6fT1OR7J.js";import"./math-to-path-BjxPr1Cw.js";const p=v.getById("pathInputElement",HTMLInputElement),L=v.getById("displaySinglePath",HTMLButtonElement),T=v.getById("singlePathErrorMessage",HTMLSpanElement),H=v.getById("randomSeed",HTMLInputElement),_=v.getById("roughness",HTMLInputElement),z=v.getById("displayRough",HTMLButtonElement),b=F();b.insertBefore("insertPathDebuggerHere");const g=F();g.insertBefore("insertProcessingPathDebuggerHere");{let o=function(){const c=b.pathShape;if(!c)g.pathShape=void 0;else{const e=b.selectedIndex,u=f.assertClass(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value,a=c.commands;switch(u){case"select":{g.pathShape=c,g.selectedIndex=e;break}case"mergeWithNext":{if(e<0||e>=a.length-1)g.pathShape=void 0;else{const n=a[e],r=a[e+1];if(!(n instanceof i&&r instanceof i))throw new Error("wtf");const t=i.angles(n.x0,n.y0,n.requestedIncomingAngle,r.x,r.y,r.requestedOutgoingAngle);g.pathShape=new S(a.toSpliced(e,2,t)),g.selectedIndex=e}break}case"deleteThenMerge":{if(e<1||e>=a.length-1)g.pathShape=void 0;else{const n=a[e-1],r=a[e],t=a[e+1];if(!(n instanceof i&&r instanceof i&&t instanceof i))throw new Error("wtf");const d=(n.x+t.x0)/2,l=(n.y+t.y0)/2,h=n.requestedOutgoingAngle,E=t.requestedIncomingAngle,s=O(h,E),w=i.angles(n.x0,n.y0,n.requestedIncomingAngle,d,l,s),x=i.angles(d,l,s,t.x,t.y,t.requestedOutgoingAngle),y=a.toSpliced(e-1,3,w,x);g.pathShape=new S(y),g.selectedIndex=e-1}break}case"recreate":{const n=a.map((r,t,d)=>{if(t!=e)return r;{const l=d[t-1],h=l?l instanceof i?l.requestedOutgoingAngle:l.outgoingAngle:r.incomingAngle,E=d[t+1],s=E?E instanceof i?E.requestedIncomingAngle:E.incomingAngle:r.outgoingAngle;return i.angles(r.x0,r.y0,h,r.x,r.y,s)}});g.pathShape=new S(n),g.selectedIndex=e;break}default:throw new Error("wtf")}}};b.listeners.push(o),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(c=>c.addEventListener("click",o))}L.addEventListener("click",()=>{b.pathShape=void 0;const o=p.value,c=S.fromString(o);b.pathShape=c,p.selectionStart=0,p.selectionEnd=Number.MAX_SAFE_INTEGER,p.focus()});p.addEventListener("keyup",o=>{o.code=="Enter"&&(L.click(),o.preventDefault())});{let o=()=>{};const c=()=>{const e=p.value;if(e.trim()==="")p.style.backgroundColor="",L.disabled=!0,T.innerText="";else try{S.fromString(e),L.disabled=!1,T.innerText=""}catch(u){if(!(u instanceof N))throw u;L.disabled=!0,T.innerText=u.message,o=()=>{p.focus(),p.setSelectionRange(e.length-u.where.length,e.length)}}};p.addEventListener("input",c),p.value="M 217.7,147.93 L 212.3274,201.107 Q 211.0302,213.94645 211.0302,228.9 Q 211.0302,255.57274 217.1449,261.14 Q 223.2502,266.6987 231.4119,266.6987 Q 249.1989,266.6987 252.5349,244.2787 L 259.3906,244.2787 Q 253.2759,295.7877 218.4426,295.7877 Q 181.9416,295.7877 181.9416,253.9137 Q 181.9416,233.01008 186.0165,201.2927 L 192.8722,147.9307 L 174.5292,147.9307 Q 159.39785,147.9307 150.8132,153.1189 Q 142.45157,158.17231 135.2492,173.4999 L 128.579,173.4999 Q 134.4619,153.27806 142.66,141.2599 Q 150.8129,129.308 158.224,125.1399 Q 165.80134,120.8783 180.273,120.8783 L 271.433,120.8783 L 271.433,147.9303 L 217.7,147.93",c(),T.parentElement.addEventListener("click",()=>o())}{let o=function(t,d){const l=document.createElement("th");t.appendChild(l),d!==void 0&&l.append((d*f.degreesPerRadian).toFixed(1)+"Â° "+d.toFixed(3))};const c=v.getById("byAngle",HTMLTableElement),e=0,u=5,a=f.initializedArray(u,t=>e+Math.PI*2*t/u),n=3,r=f.initializedArray(n,t=>e+Math.PI*2*t/n);{const t=c.insertRow();o(t),a.forEach(d=>{o(t,d)})}r.forEach((t,d)=>{const l=c.insertRow();o(l,t),a.forEach((h,E)=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("angles");const w=0,x=1,y=0,k=1;s.viewBox.baseVal.x=w,s.viewBox.baseVal.y=y,s.viewBox.baseVal.width=x-w,s.viewBox.baseVal.height=k-y,l.insertCell().appendChild(s);function C(I,A){const M=document.createElementNS("http://www.w3.org/2000/svg","line"),V=.2,[Q,R,D]=A?[w,y,I+Math.PI]:[x,k,I],q=f.polarToRectangular(V,D);M.x1.baseVal.value=Q,M.x2.baseVal.value=Q+q.x,M.y1.baseVal.value=R,M.y2.baseVal.value=R+q.y,s.appendChild(M)}C(h,!0),C(t,!1);const B=document.createElementNS("http://www.w3.org/2000/svg","path"),m=i.angles(w,y,h,x,k,t);if(m.creationInfo.success){const I=new S([m]).rawPath;B.setAttribute("d",I),s.appendChild(B);const A=Math.abs(f.angleBetween(h,m.incomingAngle))+Math.abs(f.angleBetween(t,m.outgoingAngle));A>f.radiansPerDegree?(console.error({error:A,degrees:A*f.degreesPerRadian,path:B,inExpected:h,inFound:m.incomingAngle,outExpected:t,outFound:m.outgoingAngle,qCommand:m}),s.style.backgroundColor="lightpink"):s.style.backgroundColor="rgb(26, 217, 255)"}else s.style.backgroundColor="hsl(190 100% 85% / 1)";s.addEventListener("click",()=>{console.log({inExpected:h,inFound:m?.incomingAngle,outExpected:t,outFound:m?.outgoingAngle,qCommand:m});const I=i.angles(w,y,h,x,k,t);console.log(I)})})})}L.click();z.addEventListener("click",()=>{let o=H.value;P.seedIsValid(o)||(o=P.newSeed(),H.value=o);const c=P.create(o);let e=f.parseFloatX(_.value);if(e===void 0||e<0)alert("Invalid roughness");else{console.log(e);const u=p.value,a=S.fromString(u),n=X(a,e,c).after;console.log(e,a,n),b.pathShape=n}});
