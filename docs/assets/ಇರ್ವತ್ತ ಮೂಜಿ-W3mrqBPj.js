import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as p}from"./client-misc-B8CxQsfg.js";import{b as a,r as n,m as it,c as ot,s as nt,g as rt,t as L,h as v}from"./fourier-samples-DZtHvX-G.js";import{p as st,P as F}from"./path-shape-D-vLKZJh.js";import{m as S}from"./misc-BHUyxQfl.js";import{e as mt}from"./utility-DH3fWvUB.js";import{H as lt}from"./handwriting-effect-2FjZRqWW.js";import{T as ct}from"./letters-more-a8CRYmiD.js";import"./letters-base-Lx1egdPZ.js";const pt=1024,H=p.getById("scaled",SVGGElement),J=p.getById("reference",SVGPathElement),dt=p.getById("samples",SVGPathElement);function A(i,s){if(i>=s)throw new Error("wtf");const w=S.makeLinear(i,0,s,1);function G(y){if(y<=i)return 0;if(y>=s)return 1;const d=w(y);return mt(d)}return G}let j=NaN,$=i=>{console.error("not ready yet")};window.showFrame=i=>{const s=i/60*1e3;$(s)};function Z(i){J.setAttribute("d",i.pathString);const s=st(J.getBBox(),{x:1,y:1,width:14,height:7},"srcRect fits completely into destRect",1),w=s.a;H.style.transform=s.toString(),H.style.setProperty("--path-scale",w.toString());const G=ot(i.pathString,pt);let y="";G.forEach(([t,o])=>{y+=`M${t},${o}l0,0`}),dt.setAttribute("d",y);const d=nt(G),f=rt({addTime:4800,pauseTime:200,maxGroupsToDisplay:i.maxGroupsToDisplay,terms:d});j=f.at(-1).endTime;const B=t=>Math.max(...d.slice(0,t).map(e=>Math.abs(e.frequency))),I=t=>8*B(t)+7,X=f.map(t=>{if(t.addingCircles==0){const o=L(d,t.usingCircles),e=I(t.usingCircles),r=F.glitchFreeParametric(o,e);return()=>r.rawPath}else if(t.usingCircles==0&&t.addingCircles==1&&d[0].frequency==0){let o=function(l){return`${m.x*l},${m.y*l}`};const{startTime:e,endTime:r}=t,c=r-e,u=A(e,e+c/2),g=A(e,r),m=v(d[0]);return l=>{const h=g(l),x=o(h),C=u(l),b=o(C);return`M ${x} L ${b}`}}else{const e=.2/B(t.usingCircles+t.addingCircles),r=S.makeBoundedLinear(t.startTime,-e,t.endTime,1+e),c=L(d,t.usingCircles),u=L(d,t.addingCircles,t.usingCircles);let g=I(t.usingCircles+t.addingCircles);if(t.usingCircles==0||t.usingCircles==1&&v(d[0])){const m=v(d[0])??{x:0,y:0};return l=>{const h=r(l),x=h-e,C=h+e,b=A(x,C),T=Math.min(1,C);if(T<=0)return`$M${m.x},${m.y} L${m.x},${m.y}`;{let P=function(k){k=k*T;const M=c(k),E=1-b(k);if(E==0)return M;{const K=u(k);return{x:M.x+E*K.x,y:M.y+E*K.y}}};const D=Math.ceil(Math.max(g,150)*T);return F.glitchFreeParametric(P,D).rawPath}}}else return m=>{const l=r(m),h=A(l-e,l+e);function x(b){const T=c(b),P=1-h(b);if(P==0)return T;{const D=u(b);return{x:T.x+P*D.x,y:T.y+P*D.y}}}return F.glitchFreeParametric(x,g).rawPath}}}),Y=new Intl.NumberFormat("en-US",{minimumSignificantDigits:5,maximumSignificantDigits:5,useGrouping:!1}).format,W=t=>{t<0&&(t=0);let o=Y(t);const[,e,r]=/^([0-9]+)\.([0-9]+)$/.exec(o);switch(e.length){case 3:break;case 2:{o=S.FIGURE_SPACE+o;break}case 1:{o=S.FIGURE_SPACE+S.FIGURE_SPACE+o;break}default:throw console.warn({beforeDecimalPoint:e,afterDecimalPoint:r,result:o}),new Error("wtf")}return o+"%"},tt=f.map(t=>({usingAmplitude:W(t.usingAmplitude),addingAmplitude:W(t.addingAmplitude),availableAmplitude:W(t.availableAmplitude)})),R=p.selectorQuery("[data-using] [data-circles]",HTMLTableCellElement),q=p.selectorQuery("[data-using] [data-amplitude]",HTMLTableCellElement),N=p.selectorQuery("[data-adding] [data-circles]",HTMLTableCellElement),Q=p.selectorQuery("[data-adding] [data-amplitude]",HTMLTableCellElement),U=p.selectorQuery("[data-available] [data-circles]",HTMLTableCellElement),V=p.selectorQuery("[data-available] [data-amplitude]",HTMLTableCellElement);function z(t,o){const e=new lt(t),r=new ct(.5);r.leftMargin=0,r.rightMargin=16,r.CRLF(),r.addText(o).forEach(g=>{e.add({baseline:g.baseline,x:g.x,shape:g.description.shape})});const u=r.font.get("0").fontMetrics.strokeWidth;return t.style.strokeWidth=u.toString(),e.setProgress(0),e}const et=z(p.getById("topText",SVGGElement),i.topText??""),at=z(p.getById("bottomText",SVGGElement),i.bottomText??"");$=t=>{et.setProgressLength((t-750)/1e3*3),at.setProgressLength((t-5e3)/1e3*3);function o(){const m=f.findIndex(({endTime:l})=>t<l);return m==-1?f.length-1:m}const e=o(),r=m=>`${m.toString().padStart(4,S.FIGURE_SPACE)}`,c=f[e];R.innerText=r(c.usingCircles),N.innerText=r(c.addingCircles),U.innerText=r(c.availableCircles),[{value:c.usingCircles,element1:R,element2:q},{value:c.addingCircles,element1:N,element2:Q},{value:c.availableCircles,element1:U,element2:V}].forEach(({value:m,element1:l,element2:h})=>{const x=m==0?"0.5":"";l.style.opacity=x,h.style.opacity=x});const u=tt[e];q.innerText=u.usingAmplitude,Q.innerText=u.addingAmplitude,V.innerText=u.availableAmplitude;const g=F.cssifyPath(X[e](t));H.style.setProperty("--d",g)}}const O=new Map([["likeShareAndSubscribe",{maxGroupsToDisplay:30,pathString:a.likeShareAndSubscribe,topText:"Cursive Writing",bottomText:"Hershey Fonts"}],["hilbert0",{maxGroupsToDisplay:9,pathString:a.hilbert[0],topText:"Hilbert, First Order",bottomText:"Wikipedia"}],["hilbert1",{maxGroupsToDisplay:20,pathString:n(a.hilbert[1]).rawPath,topText:"Hilbert, Second Order",bottomText:"Wikipedia"}],["hilbert4",{maxGroupsToDisplay:30,pathString:n(a.hilbert[4]).rawPath,topText:"Hilbert, Fifth Order",bottomText:"Wikipedia"}],["p0",{maxGroupsToDisplay:7,pathString:n(a.peanocurve[0]).rawPath,topText:"Peano Curve #0",bottomText:"Wikipedia"}],["p1",{maxGroupsToDisplay:10,pathString:n(a.peanocurve[1]).rawPath,topText:"Peano Curve #1",bottomText:"Wikipedia"}],["p2",{maxGroupsToDisplay:20,pathString:n(a.peanocurve[2]).rawPath,topText:"Peano Curve #2",bottomText:"Wikipedia"}],["square",{maxGroupsToDisplay:7,pathString:"M-0.5,-0.667 h 1 v 1 h -1 z"}],["ellipse",{maxGroupsToDisplay:7,pathString:"M1,0 A1,1.25 0 1 1 -1,0 A1,1.25 0 1 1 1,0 z"}],["star7",{maxGroupsToDisplay:8,pathString:it(7,2,"My seed 2025a").rawPath,topText:"Random 7 Pointed Star",bottomText:'makePolygon(7,2, "My seed 2025a")'}],["Daphne_Oram_1",{maxGroupsToDisplay:17,pathString:n(a.daphneOram1).rawPath,topText:"Daphne Oram #1",bottomText:"Wikimedia Commons"}],["Daphne_Oram_2",{maxGroupsToDisplay:22,pathString:n(a.daphneOram2,.025,.71).rawPath,topText:"Daphne Oram #2",bottomText:"Wikimedia Commons"}],["water_opossum",{maxGroupsToDisplay:9,pathString:a.waterOpossum,topText:"Water Opossum",bottomText:"Wikimedia Commons"}],["cat",{maxGroupsToDisplay:9,pathString:n(a.cat).rawPath,topText:"Cat",bottomText:"Wikimedia Commons"}],["airplane",{maxGroupsToDisplay:15,pathString:n(a.airplane,.3,.7).rawPath,topText:"Airplane",bottomText:"Wikimedia Commons"}],["head_facing_right",{maxGroupsToDisplay:12,pathString:n(a.headFacingRight).rawPath,topText:"Head Facing Right",bottomText:"Wikimedia Commons"}],["Lavater",{maxGroupsToDisplay:8,pathString:n(a.lavater).rawPath,topText:"Johann Kaspar Lavaters",bottomText:"Wikimedia Commons"}],["man_walking",{maxGroupsToDisplay:16,pathString:n(a.manWalking).rawPath,bottomText:"Wikimedia Commons",topText:"Man Walking"}],["bear",{maxGroupsToDisplay:16,pathString:n(a.bear).rawPath,topText:"Bear",bottomText:"Wikimedia Commons"}],["head_facing_left",{maxGroupsToDisplay:13,pathString:n(a.headFacingLeft).rawPath,topText:"Head Facing Left",bottomText:"Wikimedia Commons"}],["kiwi",{maxGroupsToDisplay:17,pathString:n(a.kiwi,1,.85).rawPath,topText:"Kiwi",bottomText:"Wikimedia Commons"}],["hand",{maxGroupsToDisplay:15,pathString:n(a.hand,.8,.2).rawPath,topText:"Hand",bottomText:"Wikimedia Commons"}],["carpe",{maxGroupsToDisplay:16,pathString:n(a.carpe).rawPath,topText:"Carpe",bottomText:"Wikimedia Commons"}],["pigeon",{maxGroupsToDisplay:19,pathString:a.pigeon,topText:"Pigeon",bottomText:"Wikimedia Commons"}],["smallAirplane",{maxGroupsToDisplay:16,pathString:n(a.smallAirplane,.8,.7).rawPath,topText:"Robin DR400",bottomText:"Wikimedia Commons"}],["hawk",{maxGroupsToDisplay:8,pathString:n(a.hawk).rawPath,topText:"Hawk",bottomText:"Wikimedia Commons"}],["songBird",{maxGroupsToDisplay:7,pathString:n(a.songBird).rawPath,topText:"Song Bird",bottomText:"Wikimedia Commons"}],["etchASketch",{maxGroupsToDisplay:21,pathString:n(a.etchASketch,.9,0).rawPath,topText:"Skyline",bottomText:"MacGameStore"}]]);{const i=new URLSearchParams(window.location.search).get("script_name");if(i){const s=O.get(i);if(!s)throw console.log(`invalid script name: ${i}`,O),new Error("wtf");Z(s)}else Z(O.get("hand"))}let _;setTimeout(()=>{let i=NaN;_=new p.AnimationLoop(s=>{isNaN(i)&&(i=s);const w=s-i;$(w)}),window.animationLoop=_},1);function ut(i){return document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(s=>{if(!(s instanceof SVGElement||s instanceof HTMLElement))throw new Error("wtf");s.style.display="none"}),_.cancel(),{source:"path-to-fourier.ts",script:i,firstFrame:0,lastFrame:Math.floor(j/1e3*60)}}window.initScreenCapture=ut;
