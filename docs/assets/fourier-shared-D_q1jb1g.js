import{d as P,P as g,L as J}from"./path-shape-CZZKMsju.js";import{m as p}from"./misc-BHUyxQfl.js";import{c as H}from"./client-misc-B8CxQsfg.js";var w,_;function C(){if(_)return w;_=1;var n=function(e,r){return[e[0]+r[0],e[1]+r[1]]},s=function(e,r){return[e[0]-r[0],e[1]-r[1]]},o=function(e,r){return[e[0]*r[0]-e[1]*r[1],e[0]*r[1]+e[1]*r[0]]},t=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])};return w={add:n,subtract:s,multiply:o,magnitude:t},w}var T,R;function b(){if(R)return T;R=1;var n=C(),s={},o=function(r,f){var a=-2*Math.PI*(r/f);return s[f]=s[f]||{},s[f][r]=s[f][r]||[Math.cos(a),Math.sin(a)],s[f][r]},t=function(r){var f=r.map(n.magnitude);return f.slice(0,f.length/2)},e=function(r,f){var a=f/r.length,u=r.slice(0,r.length/2);return u.map(function(i,c){return c*a})};return T={fftMag:t,fftFreq:e,exponent:o},T}var h={},y;function O(){if(y)return h;y=1;var n=32;h.INT_BITS=n,h.INT_MAX=2147483647,h.INT_MIN=-1<<n-1,h.sign=function(t){return(t>0)-(t<0)},h.abs=function(t){var e=t>>n-1;return(t^e)-e},h.min=function(t,e){return e^(t^e)&-(t<e)},h.max=function(t,e){return t^(t^e)&-(t<e)},h.isPow2=function(t){return!(t&t-1)&&!!t},h.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,e|=r,e|t>>1},h.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},h.popCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24};function s(t){var e=32;return t&=-t,t&&e--,t&65535&&(e-=16),t&16711935&&(e-=8),t&252645135&&(e-=4),t&858993459&&(e-=2),t&1431655765&&(e-=1),e}h.countTrailingZeros=s,h.nextPow2=function(t){return t+=t===0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},h.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},h.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var o=new Array(256);return function(t){for(var e=0;e<256;++e){var r=e,f=e,a=7;for(r>>>=1;r;r>>>=1)f<<=1,f|=r&1,--a;t[e]=f<<a&255}}(o),h.reverse=function(t){return o[t&255]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},h.interleave2=function(t,e){return t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1},h.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=(t|t>>>1)&858993459,t=(t|t>>>2)&252645135,t=(t|t>>>4)&16711935,t=(t|t>>>16)&65535,t<<16>>16},h.interleave3=function(t,e,r){return t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t|=e<<1,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,t|r<<2},h.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=(t|t>>>2)&3272356035,t=(t|t>>>4)&251719695,t=(t|t>>>8)&4278190335,t=(t|t>>>16)&1023,t<<22>>22},h.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>s(t)+1},h}var M,V;function E(){if(V)return M;V=1;var n=C(),s=b(),o=O();return M={fft:function t(e){var r=[],f=e.length;if(f==1)return Array.isArray(e[0])?[[e[0][0],e[0][1]]]:[[e[0],0]];for(var a=t(e.filter(d)),u=t(e.filter(m)),i=0;i<f/2;i++){var c=a[i],l=n.multiply(s.exponent(i,f),u[i]);r[i]=n.add(c,l),r[i+f/2]=n.subtract(c,l)}function d(F,x){return x%2==0}function m(F,x){return x%2==1}return r},fftInPlace:function(t){for(var e=t.length,r=o.countTrailingZeros(e),f=0;f<e;f++){var a=o.reverse(f)>>>o.INT_BITS-r;if(a>f){var u=[t[f],0];t[f]=t[a],t[a]=u}else t[a]=[t[a],0]}for(var i=2;i<=e;i+=i)for(var c=0;c<i/2;c++)for(var l=s.exponent(c,i),d=0;d<e/i;d++){var m=n.multiply(l,t[d*i+c+i/2]);t[d*i+c+i/2]=n.subtract(t[d*i+c],m),t[d*i+c]=n.add(t[d*i+c],m)}}},M}var A,B;function U(){if(B)return A;B=1;var n=E().fft;return A={ifft:function(o){for(var t=[],e=0;e<o.length;e++)t[e]=[o[e][1],o[e][0]];for(var r=n(t),f=[],a=0;a<r.length;a++)f[a]=[r[a][1]/r.length,r[a][0]/r.length];return f}},A}var q,X;function L(){if(X)return q;X=1;var n=C(),s=b(),o=function(t){for(var e=[],r=t.length,f=0;f<r;f++){e[f]=[0,0];for(var a=0;a<r;a++){var u=s.exponent(f*a,r),i;Array.isArray(t[a])?i=n.multiply(t[a],u):i=n.multiply([t[a],0],u),e[f]=n.add(e[f],i)}}return e};return q=o,q}var N,Z;function Q(){if(Z)return N;Z=1;var n=L();function s(o){for(var t=[],e=0;e<o.length;e++)t[e]=[o[e][1],o[e][0]];for(var r=n(t),f=[],a=0;a<r.length;a++)f[a]=[r[a][1]/r.length,r[a][0]/r.length];return f}return N=s,N}var S,D;function K(){return D||(D=1,S={fft:E().fft,ifft:U().ifft,fftInPlace:E().fftInPlace,util:b(),dft:L(),idft:Q()}),S}var W=K();const G=new P;function tt(n,s=.5,o=.5){const t=n instanceof g?n:g.fromString(n),e=typeof n=="string"?n:n.rawPath;G.d=e;const r=G.getBBox(),f=-p.lerp(r.x,r.x+r.width,s),a=-p.lerp(r.y,r.y+r.height,o);return t.translate(f,a)}function et(n,s,o="My seed 2025",t=.25){const e=2*Math.PI/n*(1+s);typeof o=="string"&&(o=p.Random.fromString(o));const r=()=>(o()-.5)*t,f=p.initializedArray(n,u=>{const i=u*e;return{x:Math.cos(i)+r(),y:Math.sin(i)+r()}}),a=f.map((u,i)=>{const c=f[(i+1)%n];return new J(u.x,u.y,c.x,c.y)});return new g(a)}function rt(n,s=1024){if(Math.log2(s)%1!==0)throw new Error("numSamples must be a power of 2");const o=[];for(let t=0;t<s;t++){const e=t/(s-1),r=n(e);o.push([r.x,r.y])}return o}function Y(n){let s=0;n.forEach(r=>s+=r.amplitude);const o=s/1e7,t=n.filter(r=>r.amplitude>o);let e=0;return t.forEach(r=>e+=r.amplitude),t}function nt(n){const s=n.length;if(Math.log2(s)%1!==0)throw new Error("numSamples must be a power of 2");const o=W.fft(n),t=[];for(let e=0;e<s;e++){const[r,f]=o[e],a=Math.sqrt(r*r+f*f)/s,u=Math.atan2(f,r),i=e<=s/2?e:e-s;t.push({frequency:i,amplitude:a,phase:u})}return t.sort((e,r)=>r.amplitude-e.amplitude),Y(t)}const I={miss:0,hit:0};window.cacheHealth=I;function at(n,s,o=0){const t=Math.min(o+s,n.length);function e(a){let u=0,i=0;for(let c=o;c<t;c++){const{frequency:l,amplitude:d,phase:m}=n[c],F=2*Math.PI*l*a+m;u+=d*Math.cos(F),i+=d*Math.sin(F)}return{x:u,y:i}}const r=new Map;function f(a){const u=r.get(a);if(u)return I.hit++,u;I.miss++;const i=e(a);return r.set(a,i),i}return f}function ot(n){if(n.frequency==0)return{x:Math.cos(n.phase)*n.amplitude,y:Math.sin(n.phase)*n.amplitude}}function $(n,s){const o=new P;o.d=n;const t=s,e=t-1,r=o.length;return p.initializedArray(t,f=>{const a=o.getPoint(r/e*f);return[a.x,a.y]})}function it(n,s){const o=new P;try{const t=g.fromString(n).commands;if(t.length==0)throw new Error("wtf");const e=new Array;t.forEach((u,i)=>{e.push(u);const c=t[(i+1)%t.length];if(g.needAnM(u,c)){const l=new J(u.x,u.y,c.x0,c.y0);e.push(l)}});const f=e.map(u=>new g([u])).map((u,i)=>{o.d=u.rawPath;const c=o.length;return{path:u,length:c,numberOfVertices:0,originalIndex:i}});{const u=f.toSorted((l,d)=>d.length-l.length);let i=s,c=p.sum(u.map(({length:l})=>l));for(;i!=0;){const l=u.pop();if(!l)throw new Error("wtf");if(l.length>0){const d=i/c*l.length,m=Math.max(1,Math.round(d));l.numberOfVertices=m,i-=m,c-=l.length}}}const a=new Array;return f.forEach(({length:u,numberOfVertices:i,path:c})=>{if(i>0){o.d=c.rawPath;for(let l=0;l<i;l++){const d=l/i*u,{x:m,y:F}=o.getPoint(d);a.push([m,F])}}}),a}catch(t){return console.warn("using fallback",t),$(n,s)}}function k(n){let s=0;n.forEach(t=>s+=t.amplitude);const o=n.map(t=>({here:t.amplitude/s*100,before:NaN,after:NaN}));{let t=0,e=0;o.forEach((r,f,a)=>{r.before=t,t+=r.here;const u=a.length-f-1,i=a[u];i.after=e,e+=i.here})}return o}function ft(n){const s=k(n.terms),o=new Array;let t=0;for(let a=n.maxGroupsToDisplay-1;a>=n.skipCountAtEnd&&t<s.length;a--){let u=0,i=0,c=t;const l=s[c].before;for(;u+=s[c].here,i++,c++,!(c>=s.length);)if(a>0){const x=s[c].after/a;if(u>x)break}const d=s[c-1].after,m=s.length-c;o.push({offset:NaN,startTime:NaN,endTime:NaN,usingCircles:t,usingAmplitude:l,addingCircles:i,addingAmplitude:u,availableAmplitude:d,availableCircles:m}),t+=i,o.push({offset:NaN,startTime:NaN,endTime:NaN,usingCircles:t,usingAmplitude:l+u,addingCircles:0,addingAmplitude:0,availableAmplitude:d,availableCircles:m})}let e=0;o.forEach(a=>{const u=a.addingCircles?n.addTime:n.pauseTime,i=e+u;a.startTime=e,a.endTime=i,e=i}),o.forEach(a=>{a.offset=a.startTime/e});const f={...o.at(-1),startTime:e,offset:1};return o.push(f),o}{const n=p.Random.fromString("Starry Night"),s=H.selectorQuery("[data-favorite]",SVGCircleElement);for(let o=0;o<100;o++){const t=p.assertClass(s.cloneNode(!0),SVGCircleElement);t.cx.baseVal.value=n()*16,t.cy.baseVal.value=n()*9,s.parentElement.append(t)}}export{rt as a,it as b,ft as c,ot as h,et as m,tt as r,nt as s,at as t};
