import"./modulepreload-polyfill-B5Qt9EMX.js";import{g as u}from"./client-misc-1LRynplM.js";import{s as L,R as C,m as F,a as f}from"./utility-2TZy30Cu.js";import{m}from"./misc-CLGTS8fC.js";import{P as H}from"./path-shape-BgXUztkR.js";import{T as B}from"./letters-more-CL-FCUgX.js";import{m as R}from"./rough-lib-DtHqJFj-.js";import{H as D}from"./handwriting-effect-C7XdtHPU.js";import"./math-to-path-DqQ6Gsvd.js";const k=u("tau",SVGPathElement),g=k.getTotalLength(),T=(()=>{const t=u("main-handwriting",SVGUseElement);t.style.strokeDasharray=`0, ${g+1}, ${g+1},0`;const e=m.makeLinear(0,0,1,-g);function n(o){f(o),t.style.display="",t.style.strokeDashoffset=e(o).toFixed(6)}function s(){t.style.display="none"}return{show:n,hide:s}})(),w=u("dance",SVGGElement),h=4,b=L("#dance line",SVGLineElement,h,h),G=L("#dance circle",SVGCircleElement,h,h),p=L("#dance .main-path",SVGPathElement,1,1)[0],I=(()=>{const t=H.fromString(k.getAttribute("d")),n=["[865414075,46,1165012143,288037704]","[888652358,42,1959707975,1083510000]","[888761724,43,1169051802,-2117776296]"].map(a=>{const c=C.create(a),l=R(t,25,c);if(l.after.commands.length!=t.commands.length)throw new Error("wtf");return l}),s=n[0].before.cssPath,o=n.map(a=>a.after.cssPath),i=p.animate([{offset:0,d:s},{offset:.1,d:s},{offset:.2,d:o[0]},{offset:.4,d:o[0]},{offset:.5,d:s},{offset:.7,d:o[1]},{offset:.9,d:o[2]},{offset:1,d:s}],{duration:1,fill:"both"});return i.pause(),i})(),x=(()=>{function t(n){f(n),w.style.display="",b.forEach(o=>o.style.display="none"),I.currentTime=0,m.initializedArray(h,o=>{const i=m.positiveModulo(n*(o+1)/h,1);return p.getPointAtLength(p.getTotalLength()*i)}).forEach((o,i)=>{const a=G[i];a.cx.baseVal.value=o.x,a.cy.baseVal.value=o.y})}function e(){w.style.display=""}return{show:t,hide:e}})(),P=(()=>{function t(n,s){function o(i){f(i),w.style.display="",b.forEach(r=>r.style.display="");const a=m.initializedArray(h,r=>{const c=m.positiveModulo(i+r/h,1);return p.getPointAtLength(p.getTotalLength()*c)});a.forEach((r,c)=>{const l=b[c],d=G[c];l.x1.baseVal.value=d.cx.baseVal.value=r.x,l.y1.baseVal.value=d.cy.baseVal.value=r.y;const y=a[c+1]??a[0];l.x2.baseVal.value=y.x,l.y2.baseVal.value=y.y})}I.currentTime=n,o(n*s%1)}function e(){w.style.display="none"}return{show:t,hide:e}})(),A=3,z=F(1,1,A);function $(t){f(t),T.hide(),x.hide(),P.hide();const e=z(t);switch(e.index){case 0:{T.show(e.t);break}case 1:{x.show(e.t);break}case 2:{P.show(e.t,A);break}default:throw new Error("wtf")}}const E=u("conversation-handwriting",SVGGElement),V=u("thumbnail-text",SVGGElement),N=(()=>{const t=E,e=new D(t),n=new B(40);n.rightMargin=1e3,n.CRLF(),n.baseline+=10;function s(a,r){const c=r=="student"?120:45;n.x=n.leftMargin=c,n.addText(a).forEach(d=>{e.add({baseline:d.baseline,x:d.x,shape:d.description.shape}).forEach(({element:y})=>{y.classList.add(r)})}),n.baseline+=10,n.CRLF()}s("Did you see the latest 3Blue1Brown video?","teacher"),s("Yes.  It looks amazing!","student"),s("Would you like to see something similar with tau instead of pi?","teacher"),s("Of course!","student"),s("I have some real stuff on the way.  I just really â™¡ some of those animations so I had to try them myself.","teacher");const o=m.makeBoundedLinear(.05,0,.8,1);function i(a){t.style.setProperty("--t",o(a).toFixed(6)),f(a)}return i})();function M(t){f(t),$(t),N(t)}{const t=u("time",HTMLInputElement),e=()=>{const n=t.valueAsNumber;M(n)};t.addEventListener("input",e),e()}function S(t){switch(t){case"main":{V.style.display="none",E.style.display="";break}case"thumbnail":{E.style.display="none",V.style.display="";break}default:throw new Error(`unknown scene: ${t}`)}}{let t=function(){const s=e.checked?"thumbnail":"main";S(s)};const e=u("showThumbnail",HTMLInputElement);e.addEventListener("click",t),t()}function O(t){return S(t),document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(e=>{if(!(e instanceof SVGElement||e instanceof HTMLElement))throw new Error("wtf");e.style.display="none"}),{source:"tau.ts",devicePixelRatio,scene:t}}const v=window;v.initScreenCapture=O;v.showFrame=M;v.showScene=S;
