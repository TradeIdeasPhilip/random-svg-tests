import"./modulepreload-polyfill-B5Qt9EMX.js";import{g as w}from"./client-misc-leadhGo2.js";import{d as E,T as d}from"./letters-more-BIU1PgJH.js";import{b as L}from"./utility-DcEUXXL7.js";const y=w("input",HTMLTextAreaElement),c=w("main",SVGElement);{const t=new d().font,{normal:a}=E(t),r=w("available",HTMLSpanElement);r.innerText=[...a].sort().join(" ")}class p{static#t;static doCleanup(){this.#t?.doCleanup(),this.#t=void 0,c.innerHTML=""}static restartCurrent(){const t=this.#t;t&&(this.doCleanup(),t.start())}start(){p.doCleanup(),this.startImpl(),p.#t=this}doCleanup(){}}class T extends p{startImpl(){const t=new d;t.restart();const a=y.value,r=t.addText(a);t.displayText(r,c),c.ownerSVGElement.viewBox.baseVal.height=t.baseline+t.font.get("0").fontMetrics.bottom}static start(){new this().start()}}const m=w("completionRatio",HTMLInputElement);class C extends p{startImpl(){const t=new d;t.restart();const a=y.value,r=t.addText(a);c.ownerSVGElement.viewBox.baseVal.height=t.baseline+t.font.get("0").fontMetrics.bottom;const b=d.join(r),n=document.createElementNS("http://www.w3.org/2000/svg","g");n.classList.add("handwriting"),c.appendChild(n);let i=0;b.splitOnMove().forEach(l=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",l.rawPath),n.appendChild(e);const o=i,g=e.getTotalLength();i=o+g,e.style.setProperty("--offset",o.toString()),e.style.setProperty("--length",g.toString())});const h=new AbortController;this.doCleanup=()=>h.abort();const x=i,u=()=>{const l=m.valueAsNumber*x;L(l),n.style.setProperty("--total-position",l.toString())};u(),m.addEventListener("input",u,{signal:h.signal})}static start(){new this().start()}}class v extends p{startImpl(){const t=new d;t.restart();const a=y.value,r=t.addText(a);c.ownerSVGElement.viewBox.baseVal.height=t.baseline+t.font.get("0").fontMetrics.bottom;const b=d.join(r),n=document.createElementNS("http://www.w3.org/2000/svg","g");n.classList.add("handwriting","skywriting"),c.appendChild(n);let i=0;b.splitOnMove().forEach(e=>{const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",e.rawPath),n.appendChild(o);const g=i,f=o.getTotalLength();i=g+f,o.style.setProperty("--offset",g.toString()),o.style.setProperty("--length",f.toString())});const h=new AbortController;this.doCleanup=()=>h.abort();const u=i+40,l=()=>{const e=m.valueAsNumber*u;L(e),n.style.setProperty("--total-position",e.toString())};l(),m.addEventListener("input",l,{signal:h.signal})}static start(){new this().start()}}y.addEventListener("input",()=>{p.restartCurrent()});function S(){const s=document.querySelector('input[name="type"]:checked')?.id;switch(s){case"simpleType":{T.start();break}case"handwritingType":{new C().start();break}case"skywritingType":{new v().start();break}case"roughType":{new v().start();break}default:throw new Error(`invalid id: ${s}`)}}S();document.querySelectorAll('input[name="type"]').forEach(s=>{s.addEventListener("click",S)});
