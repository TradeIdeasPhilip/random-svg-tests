import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as y}from"./client-misc-ZHNZ3-cL.js";import{b as a,r as n,m as ot,c as nt,s as rt,g as st,t as v,h as H}from"./fourier-samples-CJrkoqep.js";import{p as mt,P as A}from"./path-shape-D9Q9wcRy.js";import{m as w}from"./misc-wGF4FraP.js";import{d as S,g as lt}from"./utility-D-kBkb6L.js";import{H as ct}from"./handwriting-effect-2FjZRqWW.js";import{T as pt}from"./letters-more-BBKZF7yf.js";import"./letters-base-Cd72B0PE.js";const dt=1024,O=y.getById("scaled",SVGGElement),Z=y.getById("reference",SVGPathElement),ut=y.getById("samples",SVGPathElement);function W(i,s){if(i>=s)throw new Error("wtf");const C=w.makeLinear(i,0,s,1);function D(b){if(b<=i)return 0;if(b>=s)return 1;const p=C(b);return lt(p)}return D}let X=NaN,B=i=>{console.error("not ready yet")};window.showFrame=i=>{const s=i/60*1e3;B(s)};function j(i){Z.setAttribute("d",i.pathString);const s=mt(Z.getBBox(),{x:1,y:1,width:14,height:7},"srcRect fits completely into destRect",1),C=s.a;O.style.transform=s.toString(),O.style.setProperty("--path-scale",C.toString());const D=nt(i.pathString,dt);let b="";D.forEach(([t,o])=>{b+=`M${t},${o}l0,0`}),ut.setAttribute("d",b);const p=rt(D),T=st({addTime:4800,pauseTime:200,maxGroupsToDisplay:i.maxGroupsToDisplay,terms:p});X=T.at(-1).endTime;const I=t=>Math.max(...p.slice(0,t).map(e=>Math.abs(e.frequency))),R=t=>8*I(t)+7,Y=T.map(t=>{if(t.addingCircles==0){const o=v(p,t.usingCircles),e=R(t.usingCircles),r=A.glitchFreeParametric(o,e);return()=>r.rawPath}else if(t.usingCircles==0&&t.addingCircles==1&&p[0].frequency==0){let o=function(l){return`${m.x*l},${m.y*l}`};const{startTime:e,endTime:r}=t,c=r-e,d=W(e,e+c/2),u=W(e,r),m=H(p[0]);return l=>{const g=u(l),h=o(g),P=d(l),f=o(P);return`M ${h} L ${f}`}}else{const e=.2/I(t.usingCircles+t.addingCircles),r=w.makeBoundedLinear(t.startTime,-e,t.endTime,1+e),c=v(p,t.usingCircles),d=v(p,t.addingCircles,t.usingCircles);let u=R(t.usingCircles+t.addingCircles);if(t.usingCircles==0||t.usingCircles==1&&H(p[0])){const m=H(p[0])??{x:0,y:0};return l=>{const g=r(l),h=g-e,P=g+e,f=W(h,P),x=Math.min(1,P);if(x<=0)return`$M${m.x},${m.y} L${m.x},${m.y}`;{let k=function(G){G=G*x;const E=c(G),L=1-f(G);if(L==0)return E;{const Q=d(G);return{x:E.x+L*Q.x,y:E.y+L*Q.y}}};const F=Math.ceil(Math.max(u,150)*x);return A.glitchFreeParametric(k,F).rawPath}}}else return m=>{const l=r(m),g=W(l-e,l+e);function h(f){const x=c(f),k=1-g(f);if(k==0)return x;{const F=d(f);return{x:x.x+k*F.x,y:x.y+k*F.y}}}return A.glitchFreeParametric(h,u).rawPath}}}),tt=new Intl.NumberFormat("en-US",{minimumSignificantDigits:5,maximumSignificantDigits:5,useGrouping:!1}).format,M=t=>{t<0&&(t=0);let o=tt(t);const[,e,r]=/^([0-9]+)\.([0-9]+)$/.exec(o);switch(e.length){case 3:break;case 2:{o=w.FIGURE_SPACE+o;break}case 1:{o=w.FIGURE_SPACE+w.FIGURE_SPACE+o;break}default:throw console.warn({beforeDecimalPoint:e,afterDecimalPoint:r,result:o}),new Error("wtf")}return o+"%"},et=T.map(t=>({usingAmplitude:M(t.usingAmplitude),addingAmplitude:M(t.addingAmplitude),availableAmplitude:M(t.availableAmplitude)})),q=S("[data-using] [data-circles]",HTMLTableCellElement),N=S("[data-using] [data-amplitude]",HTMLTableCellElement),U=S("[data-adding] [data-circles]",HTMLTableCellElement),V=S("[data-adding] [data-amplitude]",HTMLTableCellElement),z=S("[data-available] [data-circles]",HTMLTableCellElement),K=S("[data-available] [data-amplitude]",HTMLTableCellElement);function J(t,o){const e=new ct(t),r=new pt(.5);r.leftMargin=0,r.rightMargin=16,r.CRLF(),r.addText(o).forEach(u=>{e.add({baseline:u.baseline,x:u.x,shape:u.description.shape})});const d=r.font.get("0").fontMetrics.strokeWidth;return t.style.strokeWidth=d.toString(),e.setProgress(0),e}const at=J(y.getById("topText",SVGGElement),i.topText??""),it=J(y.getById("bottomText",SVGGElement),i.bottomText??"");B=t=>{at.setProgressLength((t-750)/1e3*3),it.setProgressLength((t-5e3)/1e3*3);function o(){const m=T.findIndex(({endTime:l})=>t<l);return m==-1?T.length-1:m}const e=o(),r=m=>`${m.toString().padStart(4,w.FIGURE_SPACE)}`,c=T[e];q.innerText=r(c.usingCircles),U.innerText=r(c.addingCircles),z.innerText=r(c.availableCircles),[{value:c.usingCircles,element1:q,element2:N},{value:c.addingCircles,element1:U,element2:V},{value:c.availableCircles,element1:z,element2:K}].forEach(({value:m,element1:l,element2:g})=>{const h=m==0?"0.5":"";l.style.opacity=h,g.style.opacity=h});const d=et[e];N.innerText=d.usingAmplitude,V.innerText=d.addingAmplitude,K.innerText=d.availableAmplitude;const u=A.cssifyPath(Y[e](t));O.style.setProperty("--d",u)}}const _=new Map([["likeShareAndSubscribe",{maxGroupsToDisplay:30,pathString:a.likeShareAndSubscribe,topText:"Cursive Writing",bottomText:"Hershey Fonts"}],["hilbert0",{maxGroupsToDisplay:9,pathString:a.hilbert[0],topText:"Hilbert, First Order",bottomText:"Wikipedia"}],["hilbert1",{maxGroupsToDisplay:20,pathString:n(a.hilbert[1]).rawPath,topText:"Hilbert, Second Order",bottomText:"Wikipedia"}],["hilbert4",{maxGroupsToDisplay:30,pathString:n(a.hilbert[4]).rawPath,topText:"Hilbert, Fifth Order",bottomText:"Wikipedia"}],["p0",{maxGroupsToDisplay:7,pathString:n(a.peanocurve[0]).rawPath,topText:"Peano Curve #0",bottomText:"Wikipedia"}],["p1",{maxGroupsToDisplay:10,pathString:n(a.peanocurve[1]).rawPath,topText:"Peano Curve #1",bottomText:"Wikipedia"}],["p2",{maxGroupsToDisplay:20,pathString:n(a.peanocurve[2]).rawPath,topText:"Peano Curve #2",bottomText:"Wikipedia"}],["square",{maxGroupsToDisplay:7,pathString:"M-0.5,-0.667 h 1 v 1 h -1 z"}],["ellipse",{maxGroupsToDisplay:7,pathString:"M1,0 A1,1.25 0 1 1 -1,0 A1,1.25 0 1 1 1,0 z"}],["star7",{maxGroupsToDisplay:8,pathString:ot(7,2,"My seed 2025a").rawPath,topText:"Random 7 Pointed Star",bottomText:'makePolygon(7,2, "My seed 2025a")'}],["Daphne_Oram_1",{maxGroupsToDisplay:17,pathString:n(a.daphneOram1).rawPath,topText:"Daphne Oram #1",bottomText:"Wikimedia Commons"}],["Daphne_Oram_2",{maxGroupsToDisplay:22,pathString:n(a.daphneOram2,.025,.71).rawPath,topText:"Daphne Oram #2",bottomText:"Wikimedia Commons"}],["water_opossum",{maxGroupsToDisplay:9,pathString:a.waterOpossum,topText:"Water Opossum",bottomText:"Wikimedia Commons"}],["cat",{maxGroupsToDisplay:9,pathString:n(a.cat).rawPath,topText:"Cat",bottomText:"Wikimedia Commons"}],["airplane",{maxGroupsToDisplay:15,pathString:n(a.airplane,.3,.7).rawPath,topText:"Airplane",bottomText:"Wikimedia Commons"}],["head_facing_right",{maxGroupsToDisplay:12,pathString:n(a.headFacingRight).rawPath,topText:"Head Facing Right",bottomText:"Wikimedia Commons"}],["Lavater",{maxGroupsToDisplay:8,pathString:n(a.lavater).rawPath,topText:"Johann Kaspar Lavaters",bottomText:"Wikimedia Commons"}],["man_walking",{maxGroupsToDisplay:16,pathString:n(a.manWalking).rawPath,bottomText:"Wikimedia Commons",topText:"Man Walking"}],["bear",{maxGroupsToDisplay:16,pathString:n(a.bear).rawPath,topText:"Bear",bottomText:"Wikimedia Commons"}],["head_facing_left",{maxGroupsToDisplay:13,pathString:n(a.headFacingLeft).rawPath,topText:"Head Facing Left",bottomText:"Wikimedia Commons"}],["kiwi",{maxGroupsToDisplay:17,pathString:n(a.kiwi,1,.85).rawPath,topText:"Kiwi",bottomText:"Wikimedia Commons"}],["hand",{maxGroupsToDisplay:15,pathString:n(a.hand,.8,.2).rawPath,topText:"Hand",bottomText:"Wikimedia Commons"}],["carpe",{maxGroupsToDisplay:16,pathString:n(a.carpe).rawPath,topText:"Carpe",bottomText:"Wikimedia Commons"}],["pigeon",{maxGroupsToDisplay:19,pathString:a.pigeon,topText:"Pigeon",bottomText:"Wikimedia Commons"}],["smallAirplane",{maxGroupsToDisplay:16,pathString:n(a.smallAirplane,.8,.7).rawPath,topText:"Robin DR400",bottomText:"Wikimedia Commons"}],["hawk",{maxGroupsToDisplay:8,pathString:n(a.hawk).rawPath,topText:"Hawk",bottomText:"Wikimedia Commons"}],["songBird",{maxGroupsToDisplay:7,pathString:n(a.songBird).rawPath,topText:"Song Bird",bottomText:"Wikimedia Commons"}],["etchASketch",{maxGroupsToDisplay:21,pathString:n(a.etchASketch,.9,0).rawPath,topText:"Skyline",bottomText:"MacGameStore"}]]);{const i=new URLSearchParams(window.location.search).get("script_name");if(i){const s=_.get(i);if(!s)throw console.log(`invalid script name: ${i}`,_),new Error("wtf");j(s)}else j(_.get("hand"))}let $;setTimeout(()=>{let i=NaN;$=new y.AnimationLoop(s=>{isNaN(i)&&(i=s);const C=s-i;B(C)}),window.animationLoop=$},1);function gt(i){return document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(s=>{if(!(s instanceof SVGElement||s instanceof HTMLElement))throw new Error("wtf");s.style.display="none"}),$.cancel(),{source:"path-to-fourier.ts",script:i,firstFrame:0,lastFrame:Math.floor(X/1e3*60)}}window.initScreenCapture=gt;
