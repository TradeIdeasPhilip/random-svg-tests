import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as b,Q as i,a as N}from"./path-shape-BovksZbC.js";import{g as x}from"./client-misc-1LRynplM.js";import{m}from"./misc-CLGTS8fC.js";import{c as F}from"./path-debugger-widget-De312f9i.js";import{R as C}from"./utility-DPPXXj7g.js";import{m as O}from"./rough-lib-Cz2KR83N.js";import"./math-to-path-DqQ6Gsvd.js";const p=x("pathInputElement",HTMLInputElement),L=x("displaySinglePath",HTMLButtonElement),T=x("singlePathErrorMessage",HTMLSpanElement),H=x("randomSeed",HTMLInputElement),_=x("roughness",HTMLInputElement),X=x("displayRough",HTMLButtonElement),v=F();v.insertBefore("insertPathDebuggerHere");const g=F();g.insertBefore("insertProcessingPathDebuggerHere");{let o=function(){const c=v.pathShape;if(!c)g.pathShape=void 0;else{const e=v.selectedIndex,u=m.assertClass(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value,a=c.commands;switch(u){case"select":{g.pathShape=c,g.selectedIndex=e;break}case"mergeWithNext":{if(e<0||e>=a.length-1)g.pathShape=void 0;else{const n=a[e],r=a[e+1];if(!(n instanceof i&&r instanceof i))throw new Error("wtf");const t=i.angles(n.x0,n.y0,n.requestedIncomingAngle,r.x,r.y,r.requestedOutgoingAngle);g.pathShape=new b(a.toSpliced(e,2,t)),g.selectedIndex=e}break}case"deleteThenMerge":{if(e<1||e>=a.length-1)g.pathShape=void 0;else{const n=a[e-1],r=a[e],t=a[e+1];if(!(n instanceof i&&r instanceof i&&t instanceof i))throw new Error("wtf");const d=(n.x+t.x0)/2,l=(n.y+t.y0)/2,h=n.requestedOutgoingAngle,E=t.requestedIncomingAngle,s=h+m.angleBetween(h,E)/2,w=i.angles(n.x0,n.y0,n.requestedIncomingAngle,d,l,s),y=i.angles(d,l,s,t.x,t.y,t.requestedOutgoingAngle),S=a.toSpliced(e-1,3,w,y);g.pathShape=new b(S),g.selectedIndex=e-1}break}case"recreate":{const n=a.map((r,t,d)=>{if(t!=e)return r;{const l=d[t-1],h=l?l instanceof i?l.requestedOutgoingAngle:l.outgoingAngle:r.incomingAngle,E=d[t+1],s=E?E instanceof i?E.requestedIncomingAngle:E.incomingAngle:r.outgoingAngle;return i.angles(r.x0,r.y0,h,r.x,r.y,s)}});g.pathShape=new b(n),g.selectedIndex=e;break}default:throw new Error("wtf")}}};v.listeners.push(o),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(c=>c.addEventListener("click",o))}L.addEventListener("click",()=>{v.pathShape=void 0;const o=p.value,c=b.fromString(o);v.pathShape=c,p.selectionStart=0,p.selectionEnd=Number.MAX_SAFE_INTEGER,p.focus()});p.addEventListener("keyup",o=>{o.code=="Enter"&&(L.click(),o.preventDefault())});{let o=()=>{};const c=()=>{const e=p.value;if(e.trim()==="")p.style.backgroundColor="",L.disabled=!0,T.innerText="";else try{b.fromString(e),L.disabled=!1,T.innerText=""}catch(u){if(!(u instanceof N))throw u;L.disabled=!0,T.innerText=u.message,o=()=>{p.focus(),p.setSelectionRange(e.length-u.where.length,e.length)}}};p.addEventListener("input",c),p.value="M 217.7,147.93 L 212.3274,201.107 Q 211.0302,213.94645 211.0302,228.9 Q 211.0302,255.57274 217.1449,261.14 Q 223.2502,266.6987 231.4119,266.6987 Q 249.1989,266.6987 252.5349,244.2787 L 259.3906,244.2787 Q 253.2759,295.7877 218.4426,295.7877 Q 181.9416,295.7877 181.9416,253.9137 Q 181.9416,233.01008 186.0165,201.2927 L 192.8722,147.9307 L 174.5292,147.9307 Q 159.39785,147.9307 150.8132,153.1189 Q 142.45157,158.17231 135.2492,173.4999 L 128.579,173.4999 Q 134.4619,153.27806 142.66,141.2599 Q 150.8129,129.308 158.224,125.1399 Q 165.80134,120.8783 180.273,120.8783 L 271.433,120.8783 L 271.433,147.9303 L 217.7,147.93",c(),T.parentElement.addEventListener("click",()=>o())}{let o=function(t,d){const l=document.createElement("th");t.appendChild(l),d!==void 0&&l.append((d*m.degreesPerRadian).toFixed(1)+"Â° "+d.toFixed(3))};const c=x("byAngle",HTMLTableElement),e=0,u=5,a=m.initializedArray(u,t=>e+Math.PI*2*t/u),n=3,r=m.initializedArray(n,t=>e+Math.PI*2*t/n);{const t=c.insertRow();o(t),a.forEach(d=>{o(t,d)})}r.forEach((t,d)=>{const l=c.insertRow();o(l,t),a.forEach((h,E)=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("angles");const w=0,y=1,S=0,M=1;s.viewBox.baseVal.x=w,s.viewBox.baseVal.y=S,s.viewBox.baseVal.width=y-w,s.viewBox.baseVal.height=M-S,l.insertCell().appendChild(s);function B(I,A){const k=document.createElementNS("http://www.w3.org/2000/svg","line"),V=.2,[Q,R,D]=A?[w,S,I+Math.PI]:[y,M,I],q=m.polarToRectangular(V,D);k.x1.baseVal.value=Q,k.x2.baseVal.value=Q+q.x,k.y1.baseVal.value=R,k.y2.baseVal.value=R+q.y,s.appendChild(k)}B(h,!0),B(t,!1);const P=document.createElementNS("http://www.w3.org/2000/svg","path"),f=i.angles(w,S,h,y,M,t);if(f.creationInfo.success){const I=new b([f]).rawPath;P.setAttribute("d",I),s.appendChild(P);const A=Math.abs(m.angleBetween(h,f.incomingAngle))+Math.abs(m.angleBetween(t,f.outgoingAngle));A>m.radiansPerDegree?(console.error({error:A,degrees:A*m.degreesPerRadian,path:P,inExpected:h,inFound:f.incomingAngle,outExpected:t,outFound:f.outgoingAngle,qCommand:f}),s.style.backgroundColor="lightpink"):s.style.backgroundColor="rgb(26, 217, 255)"}else s.style.backgroundColor="hsl(190 100% 85% / 1)";s.addEventListener("click",()=>{console.log({inExpected:h,inFound:f?.incomingAngle,outExpected:t,outFound:f?.outgoingAngle,qCommand:f});const I=i.angles(w,S,h,y,M,t);console.log(I)})})})}L.click();X.addEventListener("click",()=>{let o=H.value;C.seedIsValid(o)||(o=C.newSeed(),H.value=o);const c=C.create(o);let e=m.parseFloatX(_.value);if(e===void 0||e<0)alert("Invalid roughness");else{console.log(e);const u=p.value,a=b.fromString(u),n=O(a,e,c).after;console.log(e,a,n),v.pathShape=n}});
