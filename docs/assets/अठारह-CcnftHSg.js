import"./modulepreload-polyfill-B5Qt9EMX.js";import{g as f,A as B}from"./client-misc-1LRynplM.js";import{b as $,s as g}from"./utility-DC2vzgXJ.js";import{m as d}from"./misc-CLGTS8fC.js";function x(e,t,s,i,o){const a=Math.atan2(o-s,i-t),n=d.polarToRectangular(20,a);e.x1.baseVal.value=t+n.x,e.y1.baseVal.value=s+n.y,e.x2.baseVal.value=t-n.x,e.y2.baseVal.value=s-n.y}function b(...e){e.forEach(t=>{t.style.display=""})}function V(...e){e.forEach(t=>{t.style.display="none"})}function M(){return[[29,41],[3,5],[37,7],[11,13],[31,17],[19,23],[103,43],[307,71]].map(([s,i])=>{function o(a,n){function r(l){const c=a*d.FULL_CIRCLE/l;return Math.sin(c)*n}return{Δx:r(s),Δy:r(i)}}return o})}const v=M();class h{#l=f("scale",SVGGElement);#u=f("function",SVGPathElement);#n=$("#singleEstimate",SVGLineElement);#t=g("#estimateLines line",SVGLineElement);#o;#e;addBorders(){g("svg#main text",SVGTextElement).forEach(s=>{const i=d.assertClass(s.cloneNode(!0),SVGTextElement);i.classList.add("scale-background"),s.parentElement.insertBefore(i,s)})}constructor(){[this.#o,this.#e]=g("circle.measurement-fill",SVGCircleElement,2,2);const s=.13333333*2,i=s/this.#t.length,o=`${i} ${s-i}`;this.#t.forEach((a,n)=>{a.style.strokeDasharray=o,a.style.strokeDashoffset=(i*n).toString()}),this.addBorders(),this.update()}static instance=new h;#s=1;#a=2;get dx(){return this.#a}#r=0;set timeInSeconds(t){this.#r=t,this.update()}get timeInSeconds(){return this.#r}update(){const t=0+this.#a,i=-this.f(t),o=this.#s,a=t*o,n=i*o;this.#e.cx.baseVal.value=a,this.#e.cy.baseVal.value=n;let r,l;this.blurry?(V(this.#n),b(...this.#t),this.#t.forEach((c,p)=>{const L=.013333333*this.zoom,S=v[p*2](this.timeInSeconds,L),T=v[p*2+1](this.timeInSeconds,L);x(c,S.Δx,S.Δy,a+T.Δx,n+T.Δy)}),r=h.initialBlurRadius*Math.sqrt(o),l="url(#measurementBlur)"):(V(...this.#t),b(this.#n),x(this.#n,0,0,a,n),r=.06666666,l="var(--measurement-color)"),[this.#o,this.#e].forEach(c=>{c.r.baseVal.value=r,c.style.fill=l})}#c=!1;get blurry(){return this.#c}set blurry(t){this.#c=t,this.update()}set dx(t){this.#a=t,this.update()}updatePath(){const t=this.#s,s=`path('M ${-3*t} ${-9*t} Q ${0*t} ${9*t} ${3*t} ${-9*t}')`;this.#u.style.d=s}get zoom(){return this.#s}set zoom(t){this.#s=t,this.update(),this.updatePath(),this.#l.style.transform=`scale(${t})`}f(t){return t*t}#i;get automaticTime(){return!!this.#i}set automaticTime(t){this.#i?.cancel(),this.#i=void 0,t&&(this.#i=new B(s=>{this.blurry&&(this.timeInSeconds=s/1e3)}))}static initialBlurRadius=.25}const u=h.instance,y=window;y.GUI=h.instance;const E=22.5,k=22.5-E,m=33.5-E,w=75-E,R=d.makeLinear(k,2,m,.005),D=d.makeLinear(m,2,w,.005),F=e=>e<m?R(e):D(e);function z(e){u.timeInSeconds=e-m,u.blurry=e>=m,u.dx=F(e)}let G;function A(){G?.cancel()}function C(){u.automaticTime=!1,A();let e;G=new B(t=>{e??=t;const s=t-e;z(s/1e3)})}f("start",HTMLButtonElement).addEventListener("click",C);f("stop",HTMLButtonElement).addEventListener("click",A);y.startRealtimeAnimation=C;function I(e){return document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(t=>{if(!(t instanceof SVGElement||t instanceof HTMLElement))throw new Error("wtf");t.style.display="none"}),u.automaticTime=!1,{source:"parabola-tangent-line.ts",script:e,seconds:w-k}}y.initScreenCapture=I;y.showFrame=z;
