import"./modulepreload-polyfill-B5Qt9EMX.js";import{P,Q as H,b as Y}from"./path-shape-BZC9YcLk.js";import{g as k,i as O,a as D}from"./client-misc-DWuUZUgy.js";import{c as F,r as G,e as q,a as X,f as $}from"./utility-CsOzd0ZV.js";const y=k("pathInputElement",HTMLInputElement),B=k("displaySinglePath",HTMLButtonElement),V=k("singlePathErrorMessage",HTMLSpanElement);function j(e){const i=document.createElement("div");i.innerHTML=`
      <div class="pathDebugger">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          preserveAspectRatio="xMidYMid meet"
          id="singlePathSvg"
        ></svg>
        <table class="segments">
          <tr>
            <th rowspan="2">#</th>
            <th rowspan="2">C</th>
            <th rowspan="2">Length</th>
            <th colspan="2">Requested</th>
            <th colspan="2">Actual</th>
            <th rowspan="2">Difference</th>
          </tr>
          <tr>
            <th>Incoming</th>
            <th>Outgoing</th>
            <th>Incoming</th>
            <th>Outgoing</th>
          </tr>
        </table>
      </div>`;const g=D(i.firstElementChild,HTMLDivElement),s=D(g.firstElementChild,SVGSVGElement),L=D(s.nextElementSibling,HTMLTableElement);function A(){if(s.innerHTML="",L.querySelectorAll("tr[data-temporary]").forEach(n=>{n.firstElementChild&&n.remove()}),!e)return;let o;const t=e.commands;t.map((n,d)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.style.d=new P([n]).cssPath;const Q=`hsl(${2.4*d}rad ${60+Math.sin(d)*40}% 50%)`;r.style.stroke=Q,s.appendChild(r);const a=r.getBBox();o?o=$(o,a):o=a;const l=L.insertRow();l.dataset.temporary="ðŸ˜Ž";const u=l.insertCell();u.innerText=d.toString(),u.style.color=Q;const f=l.insertCell();f.innerText=n.command;const w=l.insertCell();w.innerText=r.getTotalLength().toFixed(2);const b=(h,m)=>{h.innerText=(m*q).toFixed(2)+"Â°"},C=l.insertCell(),v=l.insertCell();if(n instanceof H){const h=n.creationInfo;h.source=="angles"&&(b(C,h.angle0),b(v,h.angle),h.success||[C,v].forEach(m=>m.classList.add("error")))}const c=l.insertCell(),p=n.incomingAngle;b(c,p);const x=l.insertCell(),E=n.outgoingAngle;b(x,E);const R=l.insertCell(),I=t[d-1],S=P.needAnM(I,n)?void 0:F(I.outgoingAngle,n.incomingAngle);S!==void 0&&b(R,S);{const m=[r,...[u,f,w,C,v,c,x]],N=T=>{m.forEach(M=>{M.classList[T]("hover")})};m.forEach(T=>{T.addEventListener("mouseenter",()=>N("add")),T.addEventListener("mouseleave",()=>N("remove")),T.addEventListener("click",()=>{document.querySelectorAll(".pathDebugger .selected").forEach(M=>M.classList.remove("selected")),[r,u].forEach(M=>M.classList.add("selected"))})})}}),o&&(s.viewBox.baseVal.x=o.x,s.viewBox.baseVal.y=o.y,s.viewBox.baseVal.width=o.width,s.viewBox.baseVal.height=o.height,s.style.setProperty("--stroke-width",(Math.hypot(o.width,o.height)*.008305657597434369).toString()))}return{topLevelElement:g,get pathShape(){return e},set pathShape(o){e=o,A()}}}const _=j();{const e=k("insertPathDebuggerHere",Element);e.parentElement.insertBefore(_.topLevelElement,e)}B.addEventListener("click",()=>{_.pathShape=void 0;const e=y.value,i=P.fromString(e);_.pathShape=i});y.addEventListener("keyup",e=>{e.code=="Enter"&&(B.click(),e.preventDefault())});{let e=()=>{};const i=()=>{const g=y.value;if(g.trim()==="")y.style.backgroundColor="",B.disabled=!0,V.innerText="";else try{P.fromString(g),B.disabled=!1,V.innerText=""}catch(s){if(!(s instanceof Y))throw s;B.disabled=!0,V.innerText=s.message,e=()=>{y.focus(),y.setSelectionRange(g.length-s.where.length,g.length)}}};y.addEventListener("input",i),y.value='{"commands":[{"command":"Q","x0":3.3402364362167827,"y0":-3.3007448073623697,"x1":3.9340253985180738,"y1":-4.407606648762401,"x":3.011655728124868,"y":-4.539237903380115,"creationInfo":{"source":"angles","success":true,"angle":-2.9998399305675316,"angle0":-1.0784066014045661}},{"command":"Q","x0":3.011655728124868,"y0":-4.539237903380115,"x1":1.574687929408164,"y1":-4.744307389359313,"x":1.472816111697163,"y":-3.4705009993745333,"creationInfo":{"source":"angles","success":true,"angle":1.6506008096939941,"angle0":-2.9998399305675316}},{"command":"Q","x0":1.472816111697163,"y0":-3.4705009993745333,"x1":2.425601605422024,"y1":-3.103608911097618,"x":3.378387099146885,"y":-2.7367168228207026,"creationInfo":{"source":"angles","success":false,"angle":1.3560482815273174,"angle0":1.6506008096939941}},{"command":"Q","x0":3.378387099146885,"y0":-2.7367168228207026,"x1":3.3100861700748974,"y1":-2.9792037225344936,"x":3.2417852410029093,"y":-3.2216906222482846,"creationInfo":{"source":"angles","success":false,"angle":-1.3703249858538125,"angle0":1.3560482815273174}},{"command":"Q","x0":3.2417852410029093,"y0":-3.2216906222482846,"x1":3.71956498838227,"y1":-3.1350455976774514,"x":4.1973447357616305,"y":-3.048400573106618,"creationInfo":{"source":"angles","success":false,"angle":-0.1010220204226494,"angle0":-0.1456045239311423}},{"command":"Q","x0":4.1973447357616305,"y0":-3.048400573106618,"x1":5.4196689403631035,"y1":-3.172304017662219,"x":5.061868062841531,"y":-4.160669146632123,"creationInfo":{"source":"angles","success":true,"angle":-1.918132677407088,"angle0":-0.1010220204226494}},{"command":"Q","x0":5.061868062841531,"y0":-4.160669146632123,"x1":5.268526125402326,"y1":-4.012893855293418,"x":5.475184187963122,"y":-3.8651185639547148,"creationInfo":{"source":"angles","success":false,"angle":-0.37440229149874305,"angle0":-1.918132677407088}},{"command":"Q","x0":5.475184187963122,"y0":-3.8651185639547148,"x1":16.480296958276732,"y1":-8.189428173637983,"x":2.683828194676533,"y":-6.181870056091758,"creationInfo":{"source":"angles","success":true,"angle":2.997094360451321,"angle0":-0.37440229149874305}},{"command":"Q","x0":2.683828194676533,"y0":-6.181870056091758,"x1":0.1382015495290775,"y1":-5.81144965915722,"x":0.0608453441230225,"y":-3.4844558053025536,"creationInfo":{"source":"angles","success":true,"angle":1.6040270673159511,"angle0":2.997094360451321}},{"command":"Q","x0":0.0608453441230225,"y0":-3.4844558053025536,"x1":-0.040183084485440876,"y1":-0.4453650018892805,"x":2.6303996577439386,"y":-0.5926166531791432,"creationInfo":{"source":"angles","success":true,"angle":-0.055082620605849786,"angle0":1.6040270673159511}},{"command":"Q","x0":2.6303996577439386,"y0":-0.5926166531791432,"x1":3.7388797143957104,"y1":-0.6537364665377791,"x":4.4264871867272255,"y":-0.9672211302345681,"creationInfo":{"source":"angles","success":true,"angle":-0.42775484124811636,"angle0":-0.055082620605849786}}]}',i(),V.parentElement.addEventListener("click",()=>e())}{let e=function(t,n){const d=document.createElement("th");t.appendChild(d),n!==void 0&&d.append((n*q).toFixed(1)+"Â° "+n.toFixed(3))};const i=k("byAngle",HTMLTableElement),g=0,s=5,L=O(s,t=>g+Math.PI*2*t/s),A=3,o=O(A,t=>g+Math.PI*2*t/A);{const t=i.insertRow();e(t),L.forEach(n=>{e(t,n)})}o.forEach((t,n)=>{const d=i.insertRow();e(d,t),L.forEach((r,Q)=>{const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.classList.add("angles");const l=0,u=1,f=0,w=1;a.viewBox.baseVal.x=l,a.viewBox.baseVal.y=f,a.viewBox.baseVal.width=u-l,a.viewBox.baseVal.height=w-f,d.insertCell().appendChild(a);function C(p,x){const E=document.createElementNS("http://www.w3.org/2000/svg","line"),R=.2,[I,S,h]=x?[l,f,p+Math.PI]:[u,w,p],m=X(R,h);E.x1.baseVal.value=I,E.x2.baseVal.value=I+m.x,E.y1.baseVal.value=S,E.y2.baseVal.value=S+m.y,a.appendChild(E)}C(r,!0),C(t,!1);const v=document.createElementNS("http://www.w3.org/2000/svg","path"),c=H.angles(l,f,r,u,w,t);if(c.creationInfo.success){const p=new P([c]).rawPath;v.setAttribute("d",p),a.appendChild(v);const x=Math.abs(F(r,c.incomingAngle))+Math.abs(F(t,c.outgoingAngle));x>G?(console.error({error:x,degrees:x*q,path:v,inExpected:r,inFound:c.incomingAngle,outExpected:t,outFound:c.outgoingAngle,qCommand:c}),a.style.backgroundColor="lightpink"):a.style.backgroundColor="rgb(26, 217, 255)"}else a.style.backgroundColor="hsl(190 100% 85% / 1)";a.addEventListener("click",()=>{console.log({inExpected:r,inFound:c?.incomingAngle,outExpected:t,outFound:c?.outgoingAngle,qCommand:c});debugger;const p=H.angles(l,f,r,u,w,t);console.log(p)})})})}
