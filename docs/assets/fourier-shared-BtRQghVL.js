import{d as b,P as F,L as V}from"./path-shape-DRm3ZWo5.js";import{m as g}from"./misc-BHUyxQfl.js";var w,_;function C(){if(_)return w;_=1;var a=function(r,e){return[r[0]+e[0],r[1]+e[1]]},u=function(r,e){return[r[0]-e[0],r[1]-e[1]]},o=function(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]},t=function(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])};return w={add:a,subtract:u,multiply:o,magnitude:t},w}var T,R;function E(){if(R)return T;R=1;var a=C(),u={},o=function(e,f){var n=-2*Math.PI*(e/f);return u[f]=u[f]||{},u[f][e]=u[f][e]||[Math.cos(n),Math.sin(n)],u[f][e]},t=function(e){var f=e.map(a.magnitude);return f.slice(0,f.length/2)},r=function(e,f){var n=f/e.length,s=e.slice(0,e.length/2);return s.map(function(i,c){return c*n})};return T={fftMag:t,fftFreq:r,exponent:o},T}var h={},y;function H(){if(y)return h;y=1;var a=32;h.INT_BITS=a,h.INT_MAX=2147483647,h.INT_MIN=-1<<a-1,h.sign=function(t){return(t>0)-(t<0)},h.abs=function(t){var r=t>>a-1;return(t^r)-r},h.min=function(t,r){return r^(t^r)&-(t<r)},h.max=function(t,r){return t^(t^r)&-(t<r)},h.isPow2=function(t){return!(t&t-1)&&!!t},h.log2=function(t){var r,e;return r=(t>65535)<<4,t>>>=r,e=(t>255)<<3,t>>>=e,r|=e,e=(t>15)<<2,t>>>=e,r|=e,e=(t>3)<<1,t>>>=e,r|=e,r|t>>1},h.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},h.popCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24};function u(t){var r=32;return t&=-t,t&&r--,t&65535&&(r-=16),t&16711935&&(r-=8),t&252645135&&(r-=4),t&858993459&&(r-=2),t&1431655765&&(r-=1),r}h.countTrailingZeros=u,h.nextPow2=function(t){return t+=t===0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},h.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},h.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var o=new Array(256);return function(t){for(var r=0;r<256;++r){var e=r,f=r,n=7;for(e>>>=1;e;e>>>=1)f<<=1,f|=e&1,--n;t[r]=f<<n&255}}(o),h.reverse=function(t){return o[t&255]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},h.interleave2=function(t,r){return t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t|r<<1},h.deinterleave2=function(t,r){return t=t>>>r&1431655765,t=(t|t>>>1)&858993459,t=(t|t>>>2)&252645135,t=(t|t>>>4)&16711935,t=(t|t>>>16)&65535,t<<16>>16},h.interleave3=function(t,r,e){return t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,t|=r<<1,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t|e<<2},h.deinterleave3=function(t,r){return t=t>>>r&1227133513,t=(t|t>>>2)&3272356035,t=(t|t>>>4)&251719695,t=(t|t>>>8)&4278190335,t=(t|t>>>16)&1023,t<<22>>22},h.nextCombination=function(t){var r=t|t-1;return r+1|(~r&-~r)-1>>>u(t)+1},h}var M,B;function P(){if(B)return M;B=1;var a=C(),u=E(),o=H();return M={fft:function t(r){var e=[],f=r.length;if(f==1)return Array.isArray(r[0])?[[r[0][0],r[0][1]]]:[[r[0],0]];for(var n=t(r.filter(d)),s=t(r.filter(m)),i=0;i<f/2;i++){var c=n[i],l=a.multiply(u.exponent(i,f),s[i]);e[i]=a.add(c,l),e[i+f/2]=a.subtract(c,l)}function d(p,x){return x%2==0}function m(p,x){return x%2==1}return e},fftInPlace:function(t){for(var r=t.length,e=o.countTrailingZeros(r),f=0;f<r;f++){var n=o.reverse(f)>>>o.INT_BITS-e;if(n>f){var s=[t[f],0];t[f]=t[n],t[n]=s}else t[n]=[t[n],0]}for(var i=2;i<=r;i+=i)for(var c=0;c<i/2;c++)for(var l=u.exponent(c,i),d=0;d<r/i;d++){var m=a.multiply(l,t[d*i+c+i/2]);t[d*i+c+i/2]=a.subtract(t[d*i+c],m),t[d*i+c]=a.add(t[d*i+c],m)}}},M}var A,X;function O(){if(X)return A;X=1;var a=P().fft;return A={ifft:function(o){for(var t=[],r=0;r<o.length;r++)t[r]=[o[r][1],o[r][0]];for(var e=a(t),f=[],n=0;n<e.length;n++)f[n]=[e[n][1]/e.length,e[n][0]/e.length];return f}},A}var q,Z;function G(){if(Z)return q;Z=1;var a=C(),u=E(),o=function(t){for(var r=[],e=t.length,f=0;f<e;f++){r[f]=[0,0];for(var n=0;n<e;n++){var s=u.exponent(f*n,e),i;Array.isArray(t[n])?i=a.multiply(t[n],s):i=a.multiply([t[n],0],s),r[f]=a.add(r[f],i)}}return r};return q=o,q}var I,D;function U(){if(D)return I;D=1;var a=G();function u(o){for(var t=[],r=0;r<o.length;r++)t[r]=[o[r][1],o[r][0]];for(var e=a(t),f=[],n=0;n<e.length;n++)f[n]=[e[n][1]/e.length,e[n][0]/e.length];return f}return I=u,I}var N,J;function K(){return J||(J=1,N={fft:P().fft,ifft:O().ifft,fftInPlace:P().fftInPlace,util:E(),dft:G(),idft:U()}),N}var Q=K();const L=new b;function j(a,u=.5,o=.5){const t=a instanceof F?a:F.fromString(a),r=typeof a=="string"?a:a.rawPath;L.d=r;const e=L.getBBox(),f=-g.lerp(e.x,e.x+e.width,u),n=-g.lerp(e.y,e.y+e.height,o);return t.translate(f,n)}function v(a,u,o="My seed 2025",t=.25){const r=2*Math.PI/a*(1+u);typeof o=="string"&&(o=g.Random.fromString(o));const e=()=>(o()-.5)*t,f=g.initializedArray(a,s=>{const i=s*r;return{x:Math.cos(i)+e(),y:Math.sin(i)+e()}}),n=f.map((s,i)=>{const c=f[(i+1)%a];return new V(s.x,s.y,c.x,c.y)});return new F(n)}function tt(a,u=1024){if(Math.log2(u)%1!==0)throw new Error("numSamples must be a power of 2");const o=[];for(let t=0;t<u;t++){const r=t/(u-1),e=a(r);o.push([e.x,e.y])}return o}function W(a){let u=0;a.forEach(e=>u+=e.amplitude);const o=u/1e7,t=a.filter(e=>e.amplitude>o);let r=0;return t.forEach(e=>r+=e.amplitude),t}function rt(a){const u=a.length;if(Math.log2(u)%1!==0)throw new Error("numSamples must be a power of 2");const o=Q.fft(a),t=[];for(let r=0;r<u;r++){const[e,f]=o[r],n=Math.sqrt(e*e+f*f)/u,s=Math.atan2(f,e),i=r<=u/2?r:r-u;t.push({frequency:i,amplitude:n,phase:s})}return t.sort((r,e)=>e.amplitude-r.amplitude),W(t)}const S={miss:0,hit:0};window.cacheHealth=S;function et(a,u,o=0){const t=Math.min(o+u,a.length);function r(n){let s=0,i=0;for(let c=o;c<t;c++){const{frequency:l,amplitude:d,phase:m}=a[c],p=2*Math.PI*l*n+m;s+=d*Math.cos(p),i+=d*Math.sin(p)}return{x:s,y:i}}const e=new Map;function f(n){const s=e.get(n);if(s)return S.hit++,s;S.miss++;const i=r(n);return e.set(n,i),i}return f}function nt(a){if(a.frequency==0)return{x:Math.cos(a.phase)*a.amplitude,y:Math.sin(a.phase)*a.amplitude}}function Y(a,u){const o=new b;o.d=a;const t=u,r=t-1,e=o.length;return g.initializedArray(t,f=>{const n=o.getPoint(e/r*f);return[n.x,n.y]})}function at(a,u){const o=new b;try{const t=F.fromString(a).commands;if(t.length==0)throw new Error("wtf");const r=new Array;t.forEach((s,i)=>{r.push(s);const c=t[(i+1)%t.length];if(F.needAnM(s,c)){const l=new V(s.x,s.y,c.x0,c.y0);r.push(l)}});const f=r.map(s=>new F([s])).map((s,i)=>{o.d=s.rawPath;const c=o.length;return{path:s,length:c,numberOfVertices:0,originalIndex:i}});{const s=f.toSorted((l,d)=>d.length-l.length);let i=u,c=g.sum(s.map(({length:l})=>l));for(;i!=0;){const l=s.pop();if(!l)throw new Error("wtf");if(l.length>0){const d=i/c*l.length,m=Math.max(1,Math.round(d));l.numberOfVertices=m,i-=m,c-=l.length}}}const n=new Array;return f.forEach(({length:s,numberOfVertices:i,path:c})=>{if(i>0){o.d=c.rawPath;for(let l=0;l<i;l++){const d=l/i*s,{x:m,y:p}=o.getPoint(d);n.push([m,p])}}}),n}catch(t){return console.warn("using fallback",t),Y(a,u)}}function $(a){let u=0;a.forEach(t=>u+=t.amplitude);const o=a.map(t=>({here:t.amplitude/u*100,before:NaN,after:NaN}));{let t=0,r=0;o.forEach((e,f,n)=>{e.before=t,t+=e.here;const s=n.length-f-1,i=n[s];i.after=r,r+=i.here})}return o}function it(a){const u=$(a.terms),o=new Array;let t=0;for(let n=a.maxGroupsToDisplay-1;n>=a.skipCountAtEnd&&t<u.length;n--){let s=0,i=0,c=t;const l=u[c].before;for(;s+=u[c].here,i++,c++,!(c>=u.length);)if(n>0){const x=u[c].after/n;if(s>x)break}const d=u[c-1].after,m=u.length-c;o.push({offset:NaN,startTime:NaN,endTime:NaN,usingCircles:t,usingAmplitude:l,addingCircles:i,addingAmplitude:s,availableAmplitude:d,availableCircles:m}),t+=i,o.push({offset:NaN,startTime:NaN,endTime:NaN,usingCircles:t,usingAmplitude:l+s,addingCircles:0,addingAmplitude:0,availableAmplitude:d,availableCircles:m})}let r=0;o.forEach(n=>{const s=n.addingCircles?a.addTime:a.pauseTime,i=r+s;n.startTime=r,n.endTime=i,r=i}),o.forEach(n=>{n.offset=n.startTime/r});const f={...o.at(-1),startTime:r,offset:1};return o.push(f),o}export{tt as a,at as b,it as c,nt as h,v as m,j as r,rt as s,et as t};
