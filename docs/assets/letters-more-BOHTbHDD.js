import{m as U,i as q,b as tt}from"./client-misc-DWuUZUgy.js";import{b as O,l as N,e as dt,c as Z,r as lt,f as R,g as nt,a as B}from"./utility-BTo8yCd1.js";class I{constructor(a,n,l,c){this.x0=a,this.y0=n,this.x=l,this.y=c,O(a,n,l,c),this.asString=`L ${l},${c}`,this.outgoingAngle=this.incomingAngle=Math.atan2(c-n,l-a)}toJSON(){return{command:"L",x0:this.x0,y0:this.y0,x:this.x,y:this.y}}incomingAngle;outgoingAngle;command="L";asString;translate(a,n){return new I(this.x0+a,this.y0+n,this.x+a,this.y+n)}toCubic(){return new T(this.x0,this.y0,N(this.x0,this.x,1/3),N(this.y0,this.y,1/3),N(this.x0,this.x,2/3),N(this.y0,this.y,2/3),this.x,this.y)}}class k{constructor(a,n,l,c,s,u,p){this.x0=a,this.y0=n,this.x1=l,this.y1=c,this.x=s,this.y=u,this.creationInfo=p,O(a,n,l,c,s,u),this.asString=`Q ${l},${c} ${s},${u}`}static line(a,n,l,c,s){return new this(a,n,(a+l)/2,(n+c)/2,l,c,s)}static line4(a,n,l,c){return this.line(a,n,l,c,{source:"line"})}static line2(a,n){return this.line4(a.x,a.y,n.x,n.y)}static angles(a,n,l,c,s,u){O(a,n,l,c,s,u);const p=st({x0:a,y0:n,angle:l},{x0:c,y0:s,angle:u+Math.PI});return p?new this(a,n,p.x,p.y,c,s,{source:"angles",success:!0,angle:u,angle0:l}):this.line(a,n,c,s,{source:"angles",success:!1,angle:u,angle0:l})}static tryAngles(a,n,l,c,s,u){O(a,n,l,c,s,u);const p=st({x0:a,y0:n,angle:l},{x0:c,y0:s,angle:u+Math.PI});if(p)return new this(a,n,p.x,p.y,c,s,{source:"angles",success:!0,angle:u,angle0:l})}toJSON(){return{command:"Q",x0:this.x0,y0:this.y0,x1:this.x1,y1:this.y1,x:this.x,y:this.y,creationInfo:this.creationInfo}}static controlPoints(a,n,l,c,s,u){return new this(a,n,l,c,s,u,{source:"controlPoints"})}get incomingAngle(){return Math.atan2(this.y1-this.y0,this.x1-this.x0)}get outgoingAngle(){return Math.atan2(this.y-this.y1,this.x-this.x1)}get requestedIncomingAngle(){return this.creationInfo.source=="angles"?this.creationInfo.angle0:this.incomingAngle}get requestedOutgoingAngle(){return this.creationInfo.source=="angles"?this.creationInfo.angle:this.outgoingAngle}command="Q";asString;translate(a,n){return k.controlPoints(this.x0+a,this.y0+n,this.x1+a,this.y1+n,this.x+a,this.y+n)}toCubic(){return new T(this.x0,this.y0,N(this.x0,this.x1,2/3),N(this.y0,this.y1,2/3),N(this.x,this.x1,2/3),N(this.y,this.y1,2/3),this.x,this.y)}}class T{constructor(a,n,l,c,s,u,p,g){this.x0=a,this.y0=n,this.x1=l,this.y1=c,this.x2=s,this.y2=u,this.x=p,this.y=g,O(a,n,l,c,s,u,p,g),this.asString=`C ${l},${c} ${s},${u} ${p},${g}`}reverse(){return new T(this.x,this.y,this.x2,this.y2,this.x1,this.y1,this.x0,this.y0)}get incomingAngle(){return Math.atan2(this.y1-this.y0,this.x1-this.x0)}get outgoingAngle(){return Math.atan2(this.y-this.y2,this.x-this.x2)}command="C";asString;translate(a,n){return new T(this.x0+a,this.y0+n,this.x1+a,this.y1+n,this.x2+a,this.y2+n,this.x+a,this.y+n)}toCubic(){return this}}class m{get commands(){return this.#t}addCommand(a){this.#t.push(a),this.#n=void 0}addCommands(a){return a.forEach(n=>this.addCommand(n)),this}static fromStrings(a){let n=a.join(" ");const l=[];let c;for(;n=n.replace(/^ */,""),n!="";){let s=at.exec(n);if(s){const u=R(s[1]),p=R(s[2]);if(u===void 0||p===void 0)throw console.error(s,u,p,this),new Error("wtf");c&&l.push(c),c=this.M(u,p),n=s[3];continue}if(c){if(s=ct.exec(n),s){const u=R(s[1]),p=R(s[2]);if(u===void 0||p===void 0)throw console.error(s,u,p,this),new Error("wtf");c=c.L(u,p),n=s[3];continue}if(s=it.exec(n),s){const u=R(s[1]),p=R(s[2]),g=R(s[3]),i=R(s[4]);if(u===void 0||p===void 0||g===void 0||i===void 0)throw console.error(s,u,p,g,i,this),new Error("wtf");c=c.Q(u,p,g,i),n=s[5];continue}if(s=rt.exec(n),s){const u=R(s[1]),p=R(s[2]),g=R(s[3]),i=R(s[4]),H=R(s[5]),Q=R(s[6]);if(u===void 0||p===void 0||g===void 0||i===void 0||H===void 0||Q===void 0)throw console.error(s,u,p,g,i,H,Q,this),new Error("wtf");c=c.C(u,p,g,i,H,Q),n=s[7];continue}}throw console.error(n),new Error("wtf")}return c&&l.push(c),l}static M(a,n){const l=new m;return l.M(a,n),l}#t=[];get pathShape(){return new y(this.#t)}#n;M(a,n,l=NaN){return O(a,n),this.#n={x:a,y:n,outgoingAngle:l},this}previous(){return this.#n??this.#t.at(-1)}H(a){const n=this.previous();return this.addCommand(new I(n.x,n.y,a,n.y)),this}V(a){const n=this.previous();return this.addCommand(new I(n.x,n.y,n.x,a)),this}L(a,n){const l=this.previous();return this.addCommand(new I(l.x,l.y,a,n)),this}Q(a,n,l,c){const s=this.previous();return this.addCommand(k.controlPoints(s.x,s.y,a,n,l,c)),this}Q_HV(a,n){const l=this.previous();return this.Q(a,l.y,a,n)}Q_VH(a,n){const l=this.previous();return this.Q(l.x,n,a,n)}Q_angles(a,n,l,c){const s=this.previous();if(c??=s.outgoingAngle,c===void 0)throw new Error("wtf");return this.addCommand(k.angles(s.x,s.y,c,a,n,l)),this}C(a,n,l,c,s,u){const p=this.previous();return this.addCommand(new T(p.x,p.y,a,n,l,c,s,u)),this}circle(a,n,l="cw"){const c=this.previous(),s=c.x,u=c.y,p=Math.atan2(u-n,s-a),g=Math.hypot(u-n,s-a),i=l=="cw"?1:-1,H=p+Math.PI*2*i,Q=U(0,p,1,H);function r(t){switch(t){case 0:case 1:return c;default:{const e=Q(t),o=B(g,e);return{x:a+o.x,y:n+o.y}}}}function L(t){return r(t)}return this.addParametricPath(L,8),this}arc(a,n,l,c,s){const u=this.previous(),p=u.x,g=u.y;let i=nt(Math.atan2(g-n,p-a),Math.PI*2);const H=Math.hypot(g-n,p-a);let Q=nt(Math.atan2(c-n,l-a),Math.PI*2);const r=Math.hypot(c-n,l-a);s=="cw"?i>Q&&(Q+=Math.PI*2):i<Q&&(i+=Math.PI*2);const L=Math.abs(i-Q),W=Math.ceil(L*1.17+1e-4),t=U(0,H,1,r),e=U(0,i,1,Q);function o(h){switch(h){case 0:return u;case 1:return{x:l,y:c};default:{const d=B(t(h),e(h));return{x:a+d.x,y:n+d.y}}}}return this.addParametricPath(o,W)}addParametricPath(a,n){if(n<=0)throw new Error("wtf");const l=.01/n,c=q(n+1,u=>{const p=u/n,g=a(p),i=ut(a,p,l);return{t:p,point:g,direction:i}});return q(n,u=>({from:c[u],to:c[u+1]})).forEach(u=>{this.Q_angles(u.to.point.x,u.to.point.y,u.to.direction,u.from.direction)}),this}}function ut(v,a,n){if(!(a>=0&&a<=1))throw new Error("Expected 0 ≤ t ≤ 1");const l=Math.max(0,a-n),c=v(l),s=Math.min(1,a+n),u=v(s),p=u.x-c.x,g=u.y-c.y;return p==0&&g==0?NaN:Math.atan2(g,p)}const Y=" *",E="(-?[0-9]+\\.?[0-9]*)",P=" *[, ] *",at=new RegExp(`^M${Y}${E}${P}${E}(.*)$`),ct=new RegExp(`^L${Y}${E}${P}${E}(.*)$`),it=new RegExp(`^Q${Y}${E}${P}${E}${P}${E}${P}${E}(.*)$`),rt=new RegExp(`^C${Y}${E}${P}${E}${P}${E}${P}${E}${P}${E}${P}${E}(.*)$`),gt=new RegExp(`${Y}${E}${P}${E}${P}${E}${P}${E}${P}${E}${P}${E}(.*)$`);class mt extends Error{constructor(a,n){super(a),this.where=n}}class y{static fromString(a){const n=this.fromJson(a);if(n)return n;let l=a,c=null;const s=r=>new mt(r,l),u=r=>{const L=R(r);if(L===void 0)throw s(`Invalid number: "${r}"`);return L};let p=NaN,g=NaN;const i=[],H=r=>{i.push(r),p=r.x,g=r.y};let Q=!1;for(;l=l.replace(/^ */,""),l!="";){if(c=at.exec(l),c){p=u(c[1]),g=u(c[2]),Q=!0,l=c[3];continue}if(!Q)throw s("Must start with an M command.");if(c=ct.exec(l),c){const r=u(c[1]),L=u(c[2]),W=new I(p,g,r,L);H(W),l=c[3];continue}if(c=it.exec(l),c){const r=u(c[1]),L=u(c[2]),W=u(c[3]),t=u(c[4]),e=k.controlPoints(p,g,r,L,W,t);H(e),l=c[5];continue}if(c=rt.exec(l),c){for(;c;){const r=u(c[1]),L=u(c[2]),W=u(c[3]),t=u(c[4]),e=u(c[5]),o=u(c[6]),h=new T(p,g,r,L,W,t,e,o);H(h),l=c[7],c=gt.exec(l)}continue}throw s("Confused.")}return new this(i)}static fromJson(a){try{const l=JSON.parse(a).commands.map(c=>{switch(c.command){case"C":{const{x0:s,y0:u,x1:p,y1:g,x2:i,y2:H,x:Q,y:r}=c;return new T(s,u,p,g,i,H,Q,r)}case"L":{const{x0:s,y0:u,x:p,y:g}=c;return new I(s,u,p,g)}case"Q":{const{x0:s,y0:u,x:p,y:g,creationInfo:i}=c;switch(i.source){case"angles":{const{angle0:H,angle:Q}=i,r=k.angles(s,u,H,p,g,Q);return(r.creationInfo.source!="angles"||r.creationInfo.success!=i.success)&&console.warn("different",c,r),r}case"controlPoints":{const{x1:H,y1:Q}=c;return k.controlPoints(s,u,H,Q,p,g)}case"line":return k.line4(s,u,p,g);default:throw new Error(`Unknown source: "${i.source}"`)}}default:throw new Error(`Unknown command: "${c.command}"`)}});return new y(l)}catch{return}}matchForMorph(a){const n=this.commands.map(p=>p.toCubic()),l=a.commands.map(p=>p.toCubic());if(n.length!=l.length){const{shorter:p,longer:g}=n.length<l.length?{shorter:n,longer:l}:{shorter:l,longer:n};if(p.length==0)throw new Error("can't morph something into nothing");const i=g.length/p.length,H=[];p.forEach((Q,r)=>{const L=Math.round((r+1)*i);for(;H.length<L;)H.push(Q)}),p.length=0,p.push(...H)}if(n.length!=l.length)throw new Error("wtf");function c(p){return y.cssifyPath(p.map(g=>new y([g]).rawPath).join())}const s=c(n),u=c(l);return[s,u]}commands;get endX(){return this.commands.at(-1)?.x}get endY(){return this.commands.at(-1)?.y}get startX(){return this.commands.at(0)?.x0}get startY(){return this.commands.at(0)?.y0}constructor(a){this.commands=[...a]}static cssifyPath(a){return`path('${a}')`}get cssPath(){return y.cssifyPath(this.rawPath)}makeElement(){const a=document.createElementNS("http://www.w3.org/2000/svg","path"),n=this.cssPath;if(a.style.d=n,a.style.d=="")throw console.error(n,a),new Error("wtf");return a}static needAnM(a,n){return n?!a||a.x!=n.x0||a.y!=n.y0:!1}get rawPath(){return this.commands.flatMap((a,n)=>{const l=[],c=this.commands[n-1];return y.needAnM(c,a)&&l.push(`M ${a.x0},${a.y0}`),l.push(a.asString),l}).join(" ")}get cssPaths(){return this.splitOnMove().map(a=>a.cssPath)}get rawPaths(){return this.splitOnMove().map(a=>a.rawPath)}splitOnMove(){const a=[];let n=[];return this.commands.forEach(l=>{y.needAnM(n.at(-1),l)&&(n=[],a.push(n)),n.push(l)}),a.map(l=>new y(l))}static join(a){return new y(a.flatMap(({Δx:n,Δy:l,shape:c})=>c.translate(n,l).commands))}convertToCubics(){return new y(this.commands.map(a=>a.toCubic()))}translate(a,n){return new y(this.commands.map(l=>l.translate(a,n)))}static fixAngleRounding(a){return a+400-400}static toDegrees(a){return Math.round(a*dt*100)/100}dump(){const a=this.commands.map((n,l)=>{const{x0:c,y0:s,x:u,y:p,incomingAngle:g,outgoingAngle:i,command:H}=n,Q=document.createElementNS("http://www.w3.org/2000/svg","path");Q.setAttribute("d",new y([n]).rawPath);const r=Q.getTotalLength(),L=this.commands[l-1],t=y.needAnM(L,n)?{}:{difference:y.toDegrees(Z(L.outgoingAngle,g))};return{x0:c,y0:s,x:u,y:p,incomingAngle:y.toDegrees(g),outgoingAngle:y.toDegrees(i),length:r,c:H,...t}});console.table(a),console.log(this.rawPath),console.log(JSON.stringify(this))}}function st(v,a){if(O(v.x0,v.y0,v.angle,a.x0,a.y0,a.angle),isNaN(v.angle)||isNaN(a.angle)||v.angle==a.angle)return;const n=Math.tan(v.angle),l=Math.tan(a.angle),c=Math.abs(n)*100>Number.MAX_SAFE_INTEGER,s=Math.abs(l)*100>Number.MAX_SAFE_INTEGER;if(c&&s)return;const u=Math.atan2(a.y0-v.y0,a.x0-v.x0),p=Z(v.angle,u),g=Z(a.angle,u);if(p==0||Math.abs(g)==Math.PI){if(Math.abs(p)==Math.PI||g==0)return;const Q=(v.x0+a.x0)/2,r=(v.y0+a.y0)/2;return{x:Q,y:r}}const i=Math.sign(p),H=Math.sign(g);if(!(i!=H||i==0)&&!(Math.abs(g)<=Math.abs(p)+lt))if(c||s){const Q=c?v.x0:a.x0,r=c?{...a,slope:l}:{...v,slope:n},L=r.slope*(Q-r.x0)+r.y0;return{x:Q,y:L}}else{const Q=(a.y0-l*a.x0-v.y0+n*v.x0)/(n-l),r=n*(Q-v.x0)+v.y0;return{x:Q,y:r}}}class Mt{constructor(a,n=a/10){if(this.fontSize=a,this.strokeWidth=n,a<=0||!isFinite(a))throw new Error("wtf")}get mHeight(){return this.fontSize}get xHeight(){return this.fontSize*.5}get aWidth(){return this.fontSize*.75}get digitWidth(){return this.fontSize*.5}get defaultKerning(){return this.strokeWidth*2.5}get spaceWidth(){return this.strokeWidth+this.digitWidth/2}get top(){return this.capitalTop-this.mHeight/4}get capitalTop(){return this.baseline-this.mHeight}get capitalTopMiddle(){return(this.capitalTop+this.capitalMiddle)/2}get capitalMiddle(){return this.baseline-this.xHeight}get capitalBottomMiddle(){return(this.baseline+this.capitalMiddle)/2}get baseline(){return 0}get descender(){return this.mHeight/4}get bottom(){return this.descender+this.mHeight/4}}class ft{constructor(a,n,l){this.advance=n,this.fontMetrics=l,a instanceof y?this.#t=()=>a:this.#t=a}#t;get shape(){return this.#t()}get cssPath(){return this.shape.cssPath}get d(){return this.shape.rawPath}makeElement(){return this.shape.makeElement()}makeElements(){return this.shape.splitOnMove().map(a=>({innerShape:a,element:a.makeElement()}))}}function vt(v){function a(c){return c.length==1}let n="",l=[];return v.forEach((c,s)=>{a(s)?n+=s:l.push(c)}),{normal:n,special:l}}const J=0,D=Math.PI/4,X=2*D,wt=3*D,et=4*D,xt=5*D,j=6*D,ot=7*D;function ht(v){const a=new Map;typeof v=="number"&&(v=new Mt(v));const n=(t,e,o)=>{const h=new ft(e,o,v);if(a.has(t))throw new Error(`duplicate letter: "${t}", previous letter: "${[...a].at(-1)[0]}"`);a.set(t,h)},{aWidth:l,digitWidth:c,capitalTop:s,capitalTopMiddle:u,capitalMiddle:p,capitalBottomMiddle:g,baseline:i,descender:H,strokeWidth:Q}=v,r=0,L=Q/3;{const t=c*.9,e=t/2,o=t/2,h=o*Math.SQRT1_2,d=m.M(r,s+o);d.arc(e,s+o,e+h,s+o+h,"cw"),d.Q_angles(e,g,X),d.M(e,i-L),d.L(e,i),n("?",d.pathShape,t)}{const t=c*7/8,e=t/2,o=t,h=t/2,d=v.mHeight/8,M=s-d,f=i+d;if(f-M<h*4)throw new Error("wtf");const x=(M+f)/2,_=m.M(o,M).arc(o,M+h,e,M+h,"ccw").L(e,x-h).arc(r,x-h,r,x,"cw").arc(r,x+h,e,x+h,"cw").L(e,f-h).arc(o,f-h,o,f,"ccw").pathShape;n("{",_,t);const w=m.M(r,M).arc(r,M+h,e,M+h,"cw").L(e,x-h).arc(o,x-h,o,x,"ccw").arc(o,x+h,e,x+h,"ccw").L(e,f-h).arc(r,f-h,r,f,"cw").pathShape;n("}",w,t)}{const t=c,o=t/2,h=t;{const d=(H-i)*2,M=H,f=M-d,x=s-d/4,_=x+d;if(d<=0||M<=f||f<=_||_<=x)throw new Error("wtf");const w=c*.5;{const V=m.M(w,x).Q_HV(0,_).V(f).Q_VH(w,M).pathShape;n("(",V,w)}{const V=c*.5,b=m.M(0,x).Q_HV(V,_).V(f).Q_VH(0,M).pathShape;n(")",b,V)}{const V=m.M(w,x).H(0).V(M).H(w).pathShape;n("[",V,w)}{const V=m.M(0,x).H(w).V(M).H(0).pathShape;n("]",V,w)}}{const d=c*.4,M=c*.3,f=r,x=f+d,_=x+M,w=_+M,V=w+d,b=V,A=c*.25,$=p,C=$-A,S=$+A,F=m.M(f,$).Q_angles(x,C,J,ot).Q_angles(_,$,(X+D)/2).Q_angles(w,S,J).Q_angles(V,$,ot).pathShape;n("~",F,b)}{const d=c*.75,M=d/2,f=m.M(M,p-M).V(p+M).M(r,p).H(d).pathShape;n("+",f,d)}{const d=c*.75,M=m.M(r,p).H(d).pathShape;n("-",M,d)}{const d=c/2*.9,M=5,f=-Math.PI/2,x=(s+i)/2,_=0,w=q(M,S=>{const F=S*(Math.PI*2)/M+f,z=B(_,F),G=B(d,F);return[z,G]}),V=w.flat(),b=Math.min(...V.map(({x:S})=>S));V.forEach(S=>{S.x-=b,S.y+=x});const A=w.map(([S,F])=>new I(S.x,S.y,F.x,F.y)),$=new y(A),C=Math.max(...V.map(({x:S})=>S));n("*",$,C)}{const d=c*.75,M=m.M(r,p-Q*1.25).H(d).M(r,p+Q*1.25).H(d).pathShape;n("=",M,d)}{const d=c*1.25,M=i+Q,f=m.M(0,M).H(d).pathShape;n("_",f,d)}{const d=c/2,M=3*d,f=d/3,x=s,_=x+d,w=_+d,V=w+d,b=m.M(d+f,x).L(d-f,V).M(2*d+f,x).L(2*d-f,V).M(0,_).H(M).M(0,w).H(M).pathShape;n("#",b,M)}{const d=c/2,M=3*d,f=0,x=d,_=M/2,w=2*d,V=M,b=s+(v.mHeight-M)/2,A=b+x,$=b+_,C=b+w,S=b+V,F=m.M(w,$).Q_VH(_,A).Q_HV(x,$).Q_VH(_,C).Q_HV(w,$).Q_VH((w+V)/2,C).Q_HV(V,$).V((A+$)/2).Q_VH(_,b).Q_HV(f,$).Q_VH(_,S).H((w+V)/2).pathShape;n("@",F,M)}{const d=m.M(o,s).Q(h,s,h,u).L(h,g).Q(h,i,o,i).Q(r,i,r,g).L(r,u).Q(r,s,o,s).M(h,u).L(r,g).pathShape;n("0",d,t)}{const d=m.M(r,u).Q(o,u,o,s).L(o,i).M(r,i).L(h,i).pathShape;n("1",d,t)}{const d=m.M(r,u).Q_VH(o,s).Q_HV(h,u).Q_VH(o,p).Q_HV(r,i).L(h,i).pathShape;n("2",d,t)}{const d=m.M(r,u).Q_VH(o,s).Q_HV(h,u).Q_VH(o,p).Q_HV(h,g).Q_VH(o,i).Q_HV(r,g).pathShape;n("3",d,t)}{const d=(o+h)/2,M=(o+r)/2,f=m.M(h,p).L(r,p).L(M,s).M(d,s).L(d,i).pathShape;n("4",f,t)}{const d=r+c/5,M=h-c/5,f=(p+g)/2,x=m.M(M,s).L(d,s).L(r,p).Q_VH(o,u).Q_HV(h,f).Q_VH(o,i).Q_HV(r,g).pathShape;n("5",x,t)}{const d=m.M(h,s).Q_HV(r,g).Q_VH(o,i).Q_HV(h,g).Q_VH(o,p).Q_HV(r,g).pathShape;n("6",d,t)}{const d=m.M(r,s).L(h,s).L(r,i).pathShape;n("7",d,t)}{const d=m.M(o,s).Q(h,s,h,u).Q(h,p,o,p).Q(r,p,r,g).Q(r,i,o,i).Q(h,i,h,g).Q(h,p,o,p).Q(r,p,r,u).Q(r,s,o,s).pathShape;n("8",d,t)}{const d=m.M(h,u).Q(h,s,o,s).Q(r,s,r,u).Q(r,p,o,p).Q(h,p,h,u).Q(h,i,r,i).pathShape;n("9",d,t)}}{const t=m.M(r,i).L(l/2,s).L(v.aWidth,i).M(v.aWidth/4,p).L(v.aWidth*.75,p).pathShape;n("A",t,l)}{const t=c,e=u-s;if(e<=0)throw new Error("wtf");const o=(t-e)*(2/3),h=i-g;if(h<=0)throw new Error("wtf");const d=t-h,M=m.M(r,i).L(r,s).L(o,s).Q_HV(o+e,s+e).Q(o+e,p,o,p).L(r,p).M(Math.max(d,o),p).Q_HV(d+h,i-h).Q_VH(d,i).L(r,i).pathShape;n("B",M,t)}{const t=c,o=t/2,h=t,d=m.M(h,u).Q(h,s,o,s).Q(r,s,r,u).L(r,g).Q(r,i,o,i).Q(h,i,h,g).pathShape;n("C",d,t)}{const t=c,o=t/2,h=t,d=m.M(r,s).L(r,i).L(o,i).Q(h,i,h,g).L(h,u).Q(h,s,o,s).L(r,s).pathShape;n("D",d,t)}{const t=c,e=t*(2/3),o=t,h=m.M(o,s).L(r,s).L(r,i).L(o,i).M(e,p).L(r,p).pathShape;n("E",h,t)}{const t=c,e=t*(2/3),o=t,h=m.M(o,s).L(r,s).L(r,i).M(e,p).L(r,p).pathShape;n("F",h,t)}{const t=c,o=t/2,h=t,d=m.M(h,u).Q(h,s,o,s).Q(r,s,r,u).L(r,g).Q(r,i,o,i).Q(h,i,h,g).L(h,p).L(o,p).pathShape;n("G",d,t)}{const t=c,e=t,o=m.M(r,s).L(r,i).M(e,s).L(e,i).M(r,p).L(e,p).pathShape;n("H",o,t)}{const t=v.mHeight/3,e=t/2,o=t,h=m.M(r,s).L(o,s).M(r,i).L(o,i).M(e,s).L(e,i).pathShape;n("I",h,t)}{const t=c*.85,o=t/2,h=t,d=m.M(h,s).L(h,g).Q(h,i,o,i).Q(r,i,r,g).pathShape;n("J",d,t)}{const t=c+Q,e=(s+i)/2,o=m.M(r,s).L(r,i).M(t,s).L(r+.5,e).L(t,i).pathShape;n("K",o,t)}{const t=c,e=m.M(r,s).L(r,i).L(t,i).pathShape;n("L",e,t)}{const t=c*1.5,e=t/2,o=m.M(r,i).L(r,s).L(e,p).L(t,s).L(t,i).pathShape;n("M",o,t)}{const t=c*1.2,e=m.M(r,i).L(r,s).L(t,i).L(t,s).pathShape;n("N",e,t)}{const t=c*1.5,e=t/2,o=(s+i)/2,h=m.M(e,s).Q_HV(t,o).Q_VH(e,i).Q_HV(r,o).Q_VH(e,s).pathShape;n("O",h,t)}{const t=c,e=p-u;if(e<=0)throw new Error("wtf");const o=t-e,h=m.M(r,s).L(r,i).M(r,s).L(o,s).Q_HV(t,u).Q_VH(o,p).L(r,p).pathShape;n("P",h,t)}{const t=c*1.5,e=t/2,o=(s+i)/2,h=m.M(e,s).Q_HV(t,o).Q_VH(e,i).Q_HV(r,o).Q_VH(e,s).M(t-e*.75,i-e*.75).L(t+e/6,i+e/6).pathShape;n("Q",h,t)}{const t=c,e=p-u;if(e<=0)throw new Error("wtf");const o=t-e,h=m.M(r,s).L(r,i).M(r,s).L(o,s).Q_HV(t,u).Q_VH(o,p).L(r,p).M(o,p).L(t,i).pathShape;n("R",h,t)}{const t=c,e=c/2,o=c,h=m.M(o,u).Q_VH(e,s).Q_HV(r,u).Q_VH(e,p).Q_HV(o,g).Q_VH(e,i).Q_HV(r,g).pathShape;n("S",h,t)}{const e=c+Q,o=e/2,h=e,d=v.mHeight/8,M=m.M(h,u).Q_VH(o,s).Q_HV(r,u).Q_VH(o,p).Q_HV(h,g).Q_VH(o,i).Q_HV(r,g).M(o,s-d).V(i+d).pathShape;n("$",M,e)}{const t=c,e=t/2,o=m.M(e,s).L(e,i).M(t,s).L(r,s).pathShape;n("T",o,t)}{const t=(g+p)/2,e=Math.abs(t-i)*.85,o=e*2,h=m.M(r,s).V(t).Q_VH(e,i).Q_HV(o,t).V(s).pathShape;n("U",h,o)}{const t=l,e=t/2,o=m.M(r,s).L(e,i).L(t,s).pathShape;n("V",o,t)}{const t=l*1.5,e=t/3,o=t/2,h=e*2,d=m.M(r,s).L(e,i).L(o,p).L(h,i).L(t,s).pathShape;n("W",d,t)}{const t=c,e=m.M(t,s).L(r,i).M(r,s).L(t,i).pathShape;n("X",e,t)}{const t=Q,e=c+t,o=m.M(e,s).L(t,i).M(r,s).L(e/2,p).pathShape;n("Y",o,e)}{const t=c,e=m.M(r,s).H(t).L(r,i).H(t).pathShape;n("Z",e,t)}{const t=c/4,e=c*1.2,o=m.M(t*2,s+t).Q_VH(t,s).Q_HV(0,s+t).Q_VH(t,s+t*2).Q_HV(t*2,s+t),d=o.pathShape.translate(e-t*2,v.mHeight-t*2);o.addCommands(d.commands),o.M(e,s).L(r,i);const M=o.pathShape;n("%",M,e)}{const t=c,e=m.M(t,s).L(r,i).pathShape;n("/",e,t)}{const t=c,e=m.M(r,s).L(t,i).pathShape;n("\\",e,t)}{const t=c,e=Q/2,o=t+e,h=t/2,d=m.M(h,p).Q_HV(r,g).Q_VH(h,i).Q_HV(t,g).Q_VH(h,p).M(o,p).L(o,i).pathShape;n("a",d,o)}{const t=c,e=Q/2,o=t+e,h=e,d=e+t/2,M=o,f=m.M(r,s).V(i).M(h,g).Q_VH(d,i).Q_HV(M,g).Q_VH(d,p).Q_HV(h,g).pathShape;n("b",f,o)}{const t=c*.875,e=0,o=c/2,h=t,d=(p+g)/2,M=(g+i)/2,f=m.M(h,d).Q_VH(o,p).Q_HV(e,g).Q_VH(o,i).Q_HV(h,M).pathShape;n("c",f,t)}{const t=c,e=Q/2,o=t+e,h=t/2,d=m.M(h,p).Q_HV(r,g).Q_VH(h,i).Q_HV(t,g).Q_VH(h,p).M(o,s).L(o,i).pathShape;n("d",d,o)}const W=c/8;{const t=c,e=c/2,o=t,h=o-W,d=m.M(r,g).H(o).Q_VH(e,p).Q_HV(r,g).Q_VH(e,i).H(h).pathShape;n("e",d,t)}{const t=c*.75,e=t/2,o=t,h=m.M(o,s).Q_HV(e,u).V(i).M(o,p).H(r).pathShape;n("f",h,t)}{const t=c,e=Q/2,o=t+e,h=t/2,d=m.M(h,p).Q_HV(r,g).Q_VH(h,i).Q_HV(t,g).Q_VH(h,p).M(o,p).V(i).Q_VH(h,H).H(r+W).pathShape;n("g",d,o)}{const t=c*.85,e=t/2,o=m.M(r,s).V(i).Q_VH(e,p).Q_HV(t,g).V(i).pathShape;n("h",o,t)}{const e=m.M(r,p).V(i).M(r,u).V(u-L).pathShape;n("i",e,0)}{const t=Math.abs(i-H),e=t/2,o=m.M(t,p).V(i).Q_VH(e,H).Q_HV(r,i).M(t,u).V(u-L).pathShape;n("j",o,t)}{const e=m.M(r,i).V(i-L).pathShape;n(".",e,0)}{const e=m.M(r,s).V(g).M(r,i).V(i-L).pathShape;n("!",e,0)}{const e=(H-i)/2,o=e/2,h=m.M(r,i-L).V(i).Q_VH(-o,i+e).pathShape;n(",",h,0)}{const o=(H-i)/2+L,h=new y([new I(r,s,r,s+o)]);n("'",h,0)}{const e=(H-i)/2+L,o=e,h=e,d=new y([new I(r,s,h,s+e)]);n("`",d,o)}{const e=(H-i)/2+L,o=e,h=e*2,d=h,M=s,f=s+e,x=m.M(r,f).L(o,M).L(d,f).pathShape;n("^",x,h)}{const t=Q*2,o=(H-i)/2+L,h=new y([new I(r,s,r,s+o),new I(t,s,t,s+o)]);n('"',h,t)}{const e=p,o=m.M(r,i).V(i-L).M(r,e-L).V(e).pathShape;n(":",o,0)}{const e=new y([new I(r,s,r,i)]);n("|",e,0)}{const e=p,o=(H-i)/2,h=o/2,d=m.M(r,i-L).V(i).Q_VH(-h,i+o).M(r,e-L).V(e).pathShape;n(";",d,0)}{const t=v.xHeight*2/3,e=c/10,o=t+e,h=m.M(r,s).V(i).M(t,p).L(r,p+t).M(t/2,i-t).L(o,i).pathShape;n("k",h,o)}{const e=m.M(r,s).V(i).pathShape;n("l",e,0)}{const t=c*1.5,e=t/4,o=t/2,h=t*3/4,d=t,M=m.M(r,p).V(i).Q_VH(e,p).Q_HV(o,g).V(i).M(o,g).Q_VH(h,p).Q_HV(d,g).V(i).pathShape;n("m",M,t)}{const t=c*.85,e=t/2,o=m.M(r,p).V(i).Q_VH(e,p).Q_HV(t,g).V(i).pathShape;n("n",o,t)}{const t=c,e=0,o=t/2,h=t,d=m.M(o,p).Q_HV(h,g).Q_VH(o,i).Q_HV(e,g).Q_VH(o,p).pathShape;n("o",d,t)}{const t=c,e=Q/2,o=t+e,h=e,d=e+t/2,M=o,f=m.M(r,p).V(H).M(h,g).Q_VH(d,p).Q_HV(M,g).Q_VH(d,i).Q_HV(h,g).pathShape;n("p",f,o)}{const t=c,e=t/2,o=t+Q/2,h=Math.abs(i-H),d=o+h/2,M=o+h,f=m.M(e,p).Q_HV(r,g).Q_VH(e,i).Q_HV(t,g).Q_VH(e,p).M(o,p).V(i).Q_VH(d,H).Q_HV(M,i).pathShape;n("q",f,M)}{const t=c,e=t/2,o=m.M(r,p).V(i).Q_VH(e,p).Q_HV(t,g).pathShape;n("r",o,t)}{const t=v.xHeight*2/3,e=t/2,o=i,h=g,d=p,M=(o+h)/2,f=(h+d)/2,x=(f+d)/2,_=(o+M)/2,w=m.M(t,x).Q_VH(e,d).Q_HV(r,f).Q_VH(e,h).Q_HV(t,M).Q_VH(e,o).Q_HV(r,_).pathShape;n("s",w,t)}{const t=c*.75,e=t/2,o=t,h=m.M(e,u).V(g).Q_VH(o,i).M(o,p).H(r).pathShape;n("t",h,t)}{const t=c*.85,e=t/2,o=m.M(r,p).V(g).Q_VH(e,i).Q_HV(t,p).L(t,i).pathShape;n("u",o,t)}{const t=c,e=t/2,o=m.M(r,p).L(e,i).L(t,p).pathShape;n("v",o,t)}{const t=v.xHeight*1.5,e=t/3,o=t/2,h=e*2,d=m.M(r,p).L(e,i).L(o,g).L(h,i).L(t,p).pathShape;n("w",d,t)}{const t=c,e=m.M(t,p).L(r,i).M(r,p).L(t,i).pathShape;n("x",e,t)}{const t=c,e=t/2,o=(p+H)/2,h=m.M(t,p).L(r,H).M(r,p).L(e,o).pathShape;n("y",h,t)}{const t=c,e=m.M(r,p).H(t).L(r,i).H(t).pathShape;n("z",e,t)}{const t=c/2,e=t/2,o=m.M(e,s).circle(e,s+e,"cw").pathShape;n("°",o,t)}{const t=-s,e=t/2,o=m.M(e,s).circle(e,s+e,"cw").pathShape;n("◯",o,t)}{const t=-s,e=t/2,o=s/2,h=m.M(0,o).arc(e,o,t,o,"cw").pathShape;n("◠",h,t)}{const t=-s,e=t/2,o=s/2,h=m.M(0,o).arc(e,o,t,o,"ccw").pathShape;n("◡",h,t)}{const t=-s,e=t/4,o=s+e,h=m.M(e*2,o).arc(e*3,o,t,o,"cw").Q_angles(e*2,i,wt,X).Q_angles(0,o,j,xt).arc(e,o,e*2,o,"cw").pathShape;n("♡",h,t)}{const t=v.mHeight,e=t/4,o=e;{const h=t,d=(s+i)/2,M=m.M(o,d-e).L(0,d).L(o,d+e).M(0,d).L(h,d).M(h-o,d-e).L(h,d).L(h-o,d+e);n("↔",M.pathShape,h);const f=new y(M.commands.slice(0,3));n("←",f,h);const x=new y(M.commands.slice(2,5));n("→",x,h)}{const d=e,M=e*2,f=M,x=m.M(0,s+o).L(d,s).L(f,s+o).M(d,s).L(d,i).M(0,i-o).L(d,i).L(f,i-o);n("↕",x.pathShape,M);const _=new y(x.commands.slice(0,3));n("↑",_,M);const w=new y(x.commands.slice(2,5));n("↓",w,M)}}{const t=v.mHeight,e=0,o=t/2,h=t,d=s,M=i,f=(d+M)/2,x=Math.PI/16,_=m.M(o,d).Q_angles(h,f,J+x,X-x).Q_angles(o,M,X+x,et-x).Q_angles(e,f,et+x,j-x).Q_angles(o,d,j+x,J-x).pathShape;n("✧",_,t)}{let t=function(w,V){const b=w.maxY-w.minY,$=(V.bottom-V.top)/b,S=(w.maxX-w.minX)*$,F=0,z=S,G=tt(w.minX,F,w.maxX,z),pt=tt(w.minY,V.top,w.maxY,V.bottom);return{x:G,y:pt,advance:z}},e=function(){const w={x:1/0,y:1/0},V={x:-1/0,y:-1/0};M.forEach(C=>{["x","y"].forEach(S=>{w[S]=Math.min(w[S],C[S]),V[S]=Math.max(V[S],C[S])})});const b={minX:w.x,maxX:V.x,minY:w.y,maxY:V.y},$=t(b,{top:s,bottom:i});return M.forEach(C=>{C.x=$.x(C.x),C.y=$.y(C.y)}),$};const d=j,M=q(5,w=>{const V=d+w*(2*Math.PI)*2/5;return B(1,V)}),f=e(),x=M.map((w,V,b)=>{const A=b.at(V+1-b.length);return new I(w.x,w.y,A.x,A.y)});n("☆",new y(x),f.advance);const _=M.map((w,V,b)=>{const A=b.at(V+1-b.length),$=Math.atan2(A.y-w.y,A.x-w.x),C=.175;return k.angles(w.x,w.y,$+C,A.x,A.y,$-C)});n("⭒",new y(_),f.advance)}return new Map([...a.entries()].sort(([t],[e])=>t<e?-1:t==e?1:0))}class K{restart(a=5,n=this.lineHeight){this.leftMargin=a,this.x=a,this.baseline=n}leftMargin=0;rightMargin=95;x=this.leftMargin;baseline=0;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(a=1){this.baseline+=this.lineHeight*a}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=ht(5);getDescription(a){return this.font.get(a)}static join(a){return new y(a.flatMap(n=>n.description.shape.translate(n.x,n.baseline).commands))}displayText(a,n){return a.map(l=>{const c=l.description.shape,s=c.makeElement();return n.appendChild(s),s.style.transform=`translate(${l.x}px,${l.baseline}px)`,{...l,shape:c,element:s}})}static WORD_BREAK=/^(\n+| +|[^ \n]+)(.*)/ms;addText(a){const n=new Set,l=[];for(;;){const c=K.WORD_BREAK.exec(a);if(!c)break;const s=c[1];if(a=c[2],s[0]==`
`)this.carriageReturn(),this.lineFeed(s.length*4/3);else if(s[0]==" ")this.addSpace(s.length);else{let u=0;const p=0,g=[...s].flatMap(i=>{const H=this.getDescription(i);if(H){const Q=H.advance+H.fontMetrics.defaultKerning,r={char:i,x:u,width:Q,baseline:p,description:H};return u+=Q,r}else return n.add(i),[]});this.x+u>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),g.forEach(i=>{i.x+=this.x,i.baseline=this.baseline,l.push(i)}),this.x+=u}}return n.size>0&&console.warn(n),l}addSpace(a=1){this.x+=this.font.get("0").fontMetrics.spaceWidth*a}static textToShape(a,n){const l=new K;l.font=n;const c=l.addText(a),s=K.join(c),u=l.x;return{shape:s,advance:u}}}class Vt{constructor(a){this.element=a}leftMargin=5;rightMargin=95;x=this.leftMargin;baseline=10;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(a=1){this.baseline+=this.lineHeight*a}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=ht(5);getDescription(a){return this.font.get(a)}makeRoom(a){this.x+a.advance>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed())}advance(a){this.x+=a.advance+a.fontMetrics.defaultKerning}moveToCursor(a){a.style.transform=`translate(${this.x}px,${this.baseline}px)`}showAndAdvance(a,n){return this.x+n>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),this.element.appendChild(a),a.style.transform=`translate(${this.x}px,${this.baseline}px)`,this.x+=n,this}show1(a){this.makeRoom(a);const n=a.makeElement();this.element.appendChild(n);const{x:l,baseline:c}=this;return this.moveToCursor(n),this.advance(a),{element:n,x:l,baseline:c}}splitAndShow1(a){this.makeRoom(a);const n=a.makeElements();return n.forEach(({element:l})=>{this.element.appendChild(l),this.moveToCursor(l)}),this.advance(a),n}show(a){const n=new Set,l=[...a].flatMap(c=>{const s=this.getDescription(c);return s?{...this.show1(s),description:s,char:c}:c==" "?(this.showSpace(),[]):(n.add(c),[])});return n.size>0&&console.warn(n),l}splitAndShow(a){const n=new Set,l=[...a].flatMap(c=>{const s=this.getDescription(c);return s?this.splitAndShow1(s):c==" "?(this.showSpace(),[]):(n.add(c),[])});return n.size>0&&console.warn(n),l}showSpace(a=1){return this.x+=this.font.get("0").fontMetrics.spaceWidth*a,this}}export{ft as D,Mt as F,y as P,k as Q,K as T,Vt as W,vt as d,ht as m};
