import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as X,m as nt,i as et,g as wt,s as ut}from"./client-misc-leadhGo2.js";/* empty css              */import{b as j,l as B,c as mt,a as ot,s as vt}from"./utility-DcEUXXL7.js";import{a as Vt}from"./rough.esm-C_8OcXYf.js";class ht{constructor(c,e,u){this.x0=c,this.y0=e,this.x=u,j(c,e,u),this.y=e,this.asString=`H ${u}`}y;incomingAngle=NaN;outgoingAngle=NaN;command="H";asString;translate(c,e){return new ht(this.x0+c,this.y0+e,this.x+c)}toCubic(){return new q(this.x0,this.y0,B(this.x0,this.x,1/3),this.y0,B(this.x0,this.x,2/3),this.y0,this.x,this.y0)}}class rt{constructor(c,e,u){this.x0=c,this.y0=e,this.y=u,j(c,e,u),this.x=c,this.asString=`V ${u}`}x;incomingAngle=NaN;outgoingAngle=NaN;command="V";asString;translate(c,e){return new rt(this.x0+c,this.y0+e,this.y+e)}toCubic(){return new q(this.x0,this.y0,this.x0,B(this.y0,this.y,1/3),this.x0,B(this.y0,this.y,2/3),this.x0,this.y)}}class at{constructor(c,e,u,p){this.x0=c,this.y0=e,this.x=u,this.y=p,j(c,e,u,p),this.asString=`L ${u},${p}`}incomingAngle=NaN;outgoingAngle=NaN;command="L";asString;translate(c,e){return new at(this.x0+c,this.y0+e,this.x+c,this.y+e)}toCubic(){return new q(this.x0,this.y0,B(this.x0,this.x,1/3),B(this.y0,this.y,1/3),B(this.x0,this.x,2/3),B(this.y0,this.y,2/3),this.x,this.y)}}class pt{constructor(c,e,u,p,s,m){this.x0=c,this.y0=e,this.x1=u,this.y1=p,this.x=s,this.y=m,j(c,e,u,p,s,m),this.asString=`Q ${u},${p} ${s},${m}`}incomingAngle=NaN;outgoingAngle=NaN;command="Q";asString;translate(c,e){return new pt(this.x0+c,this.y0+e,this.x1+c,this.y1+e,this.x+c,this.y+e)}toCubic(){return new q(this.x0,this.y0,B(this.x0,this.x1,2/3),B(this.y0,this.y1,2/3),B(this.x,this.x1,2/3),B(this.y,this.y1,2/3),this.x,this.y)}}class q{constructor(c,e,u,p,s,m,i,g){this.x0=c,this.y0=e,this.x1=u,this.y1=p,this.x2=s,this.y2=m,this.x=i,this.y=g,j(c,e,u,p,s,m,i,g),this.asString=`C ${u},${p} ${s},${m} ${i},${g}`}reverse(){return new q(this.x,this.y,this.x2,this.y2,this.x1,this.y1,this.x0,this.y0)}incomingAngle=NaN;outgoingAngle=NaN;command="C";asString;translate(c,e){return new q(this.x0+c,this.y0+e,this.x1+c,this.y1+e,this.x2+c,this.y2+e,this.x+c,this.y+e)}toCubic(){return this}}class f{get commands(){return this.#t}addCommand(c){this.#t.push(c),this.#e=void 0}addCommands(c){c.forEach(e=>this.addCommand(e))}static fromStrings(c){let e=c.join(" ");const u=[];let p;for(;e=e.replace(/^ */,""),e!="";){let s=Qt.exec(e);if(s){const m=X(s[1]),i=X(s[2]);if(m===void 0||i===void 0)throw console.error(s,m,i,this),new Error("wtf");p&&u.push(p),p=this.M(m,i),e=s[3];continue}if(p){if(s=xt.exec(e),s){const m=X(s[1]),i=X(s[2]),g=X(s[3]),a=X(s[4]);if(m===void 0||i===void 0||g===void 0||a===void 0)throw console.error(s,m,i,g,a,this),new Error("wtf");p=p.Q(m,i,g,a),e=s[5];continue}if(s=yt.exec(e),s){const m=X(s[1]),i=X(s[2]),g=X(s[3]),a=X(s[4]),b=X(s[5]),_=X(s[6]);if(m===void 0||i===void 0||g===void 0||a===void 0||b===void 0||_===void 0)throw console.error(s,m,i,g,a,b,_,this),new Error("wtf");p=p.C(m,i,g,a,b,_),e=s[7];continue}}throw console.error(e),new Error("wtf")}return p&&u.push(p),u}static M(c,e){const u=new f;return u.M(c,e),u}#t=[];get pathShape(){return new I(this.#t)}#e;M(c,e,u=NaN){return j(c,e),this.#e={x:c,y:e,outgoingAngle:u},this}previous(){return this.#e??this.#t.at(-1)}H(c){const e=this.previous();return this.addCommand(new ht(e.x,e.y,c)),this}V(c){const e=this.previous();return this.addCommand(new rt(e.x,e.y,c)),this}L(c,e){const u=this.previous();return this.addCommand(new at(u.x,u.y,c,e)),this}Q(c,e,u,p){const s=this.previous();return this.addCommand(new pt(s.x,s.y,c,e,u,p)),this}Q_HV(c,e){const u=this.previous();return this.Q(c,u.y,c,e)}Q_VH(c,e){const u=this.previous();return this.Q(u.x,e,c,e)}Q_angles(c,e,u,p){const s=this.previous();if(p??=s.outgoingAngle,p===void 0)throw new Error("wtf");j(p,u);const m=St({x0:s.x,y0:s.y,slope:Math.tan(p)},{x0:c,y0:e,slope:Math.tan(u)});return m?this.Q(m.x,m.y,c,e):this.L(c,e),this}C(c,e,u,p,s,m){const i=this.previous();return this.addCommand(new q(i.x,i.y,c,e,u,p,s,m)),this}circle(c,e,u="cw"){const p=this.previous(),s=p.x,m=p.y,i=Math.atan2(m-e,s-c),g=Math.hypot(m-e,s-c),a=u=="cw"?1:-1,b=i+Math.PI*2*a,_=nt(0,i,1,b);function h(t){switch(t){case 0:case 1:return p;default:{const n=_(t),o=ot(g,n);return{x:c+o.x,y:e+o.y}}}}function Y(t){return h(t)}return this.addParametricPath(Y,8),this}arc(c,e,u,p,s){const m=this.previous(),i=m.x,g=m.y;let a=mt(Math.atan2(g-e,i-c),Math.PI*2);const b=Math.hypot(g-e,i-c);let _=mt(Math.atan2(p-e,u-c),Math.PI*2);const h=Math.hypot(p-e,u-c);s=="cw"?a>_&&(_+=Math.PI*2):a<_&&(a+=Math.PI*2);const Y=Math.abs(a-_),P=Math.ceil(Y*1.17+1e-4),t=nt(0,b,1,h),n=nt(0,a,1,_);function o(r){switch(r){case 0:return m;case 1:return{x:u,y:p};default:{const d=ot(t(r),n(r));return{x:c+d.x,y:e+d.y}}}}return this.addParametricPath(o,P)}addParametricPath(c,e){if(e<=0)throw new Error("wtf");const u=.01/e,p=et(e+1,m=>{const i=m/e,g=c(i),a=Ht(c,i,u);return{t:i,point:g,direction:a}});return et(e,m=>({from:p[m],to:p[m+1]})).forEach(m=>{this.Q_angles(m.to.point.x,m.to.point.y,m.to.direction,m.from.direction)}),this}}function Ht(y,c,e){if(!(c>=0&&c<=1))throw new Error("Expected 0 ≤ t ≤ 1");const u=Math.max(0,c-e),p=y(u),s=Math.min(1,c+e),m=y(s),i=m.x-p.x,g=m.y-p.y;return i==0&&g==0?NaN:Math.atan2(g,i)}const dt=" *",z="(-?[0-9]+.?[0-9]*)",G=" *[, ] *",Qt=new RegExp(`^M${dt}${z}${G}${z}(.*)$`),xt=new RegExp(`^Q${dt}${z}${G}${z}${G}${z}${G}${z}(.*)$`),yt=new RegExp(`^C${dt}${z}${G}${z}${G}${z}${G}${z}${G}${z}${G}${z}(.*)$`);class I{matchForMorph(c){const e=this.commands.map(i=>i.toCubic()),u=c.commands.map(i=>i.toCubic());if(e.length!=u.length){const{shorter:i,longer:g}=e.length<u.length?{shorter:e,longer:u}:{shorter:u,longer:e};if(i.length==0)throw new Error("can't morph something into nothing");const a=g.length/i.length,b=[];i.forEach((_,h)=>{const Y=Math.round((h+1)*a);for(;b.length<Y;)b.push(_)}),i.length=0,i.push(...b)}if(e.length!=u.length)throw new Error("wtf");function p(i){return I.cssifyPath(i.map(g=>new I([g]).rawPath).join())}const s=p(e),m=p(u);return[s,m]}commands;get endX(){return this.commands.at(-1)?.x}get endY(){return this.commands.at(-1)?.y}get startX(){return this.commands.at(0)?.x0}get startY(){return this.commands.at(0)?.y0}static fromStrings(c){const u=f.fromStrings(c).flatMap(s=>s.commands);return new this(u)}constructor(c){this.commands=[...c]}static cssifyPath(c){return`path('${c}')`}get cssPath(){return I.cssifyPath(this.rawPath)}makeElement(){const c=document.createElementNS("http://www.w3.org/2000/svg","path"),e=this.cssPath;if(c.style.d=e,c.style.d=="")throw console.error(e,c),new Error("wtf");return c}static needAnM(c,e){return!c||c.x!=e.x0||c.y!=e.y0}get rawPath(){return this.commands.flatMap((c,e)=>{const u=[],p=this.commands[e-1];return I.needAnM(p,c)&&u.push(`M ${c.x0},${c.y0}`),u.push(c.asString),u}).join(" ")}get cssPaths(){return this.splitOnMove().map(c=>c.cssPath)}get rawPaths(){return this.splitOnMove().map(c=>c.rawPath)}splitOnMove(){const c=[];let e=[];return this.commands.forEach(u=>{I.needAnM(e.at(-1),u)&&(e=[],c.push(e)),e.push(u)}),c.map(u=>new I(u))}static join(c){return new I(c.flatMap(({Δx:e,Δy:u,shape:p})=>p.translate(e,u).commands))}convertToCubics(){return new I(this.commands.map(c=>c.toCubic()))}translate(c,e){return new I(this.commands.map(u=>u.translate(c,e)))}}function St(y,c){if(isNaN(y.slope)||isNaN(c.slope)||y.slope==c.slope)return;const e=Math.abs(y.slope)>Number.MAX_SAFE_INTEGER,u=Math.abs(c.slope)>Number.MAX_SAFE_INTEGER;if(e&&u)return;const p=e?y.x0:u?c.x0:(c.y0-c.slope*c.x0-y.y0+y.slope*y.x0)/(y.slope-c.slope),s=e?c.slope*(p-c.x0)+c.y0:y.slope*(p-y.x0)+y.y0;return{x:p,y:s}}class gt{constructor(c,e=c/10){if(this.fontSize=c,this.strokeWidth=e,c<=0||!isFinite(c))throw new Error("wtf")}get mHeight(){return this.fontSize}get xHeight(){return this.fontSize*.5}get aWidth(){return this.fontSize*.75}get digitWidth(){return this.fontSize*.5}get defaultKerning(){return this.strokeWidth*2.5}get spaceWidth(){return this.strokeWidth+this.digitWidth/2}get top(){return this.capitalTop-this.mHeight/4}get capitalTop(){return this.baseline-this.mHeight}get capitalTopMiddle(){return(this.capitalTop+this.capitalMiddle)/2}get capitalMiddle(){return this.baseline-this.xHeight}get capitalBottomMiddle(){return(this.baseline+this.capitalMiddle)/2}get baseline(){return 0}get descender(){return this.mHeight/4}get bottom(){return this.descender+this.mHeight/4}}class lt{constructor(c,e,u){this.advance=e,this.fontMetrics=u,c instanceof I?this.#t=()=>c:this.#t=c}#t;get shape(){return this.#t()}get cssPath(){return this.shape.cssPath}get d(){return this.shape.rawPath}makeElement(){return this.shape.makeElement()}makeElements(){return this.shape.splitOnMove().map(c=>({innerShape:c,element:c.makeElement()}))}}const st=Math.PI/4,Lt=2*st,_t=3*st,Et=4*st,bt=5*st,ft=6*st;function tt(y){const c=new Map;typeof y=="number"&&(y=new gt(y));const e=(t,n,o)=>{const r=new lt(n,o,y);if(c.has(t))throw new Error(`duplicate letter: "${t}", previous letter: "${[...c].at(-1)[0]}"`);c.set(t,r)},{aWidth:u,digitWidth:p,capitalTop:s,capitalTopMiddle:m,capitalMiddle:i,capitalBottomMiddle:g,baseline:a,descender:b,strokeWidth:_}=y,h=0;{const t=p,o=t/2,r=t;{const d=(b-a)*2,H=b,S=H-d,k=s-d/4,$=k+d;if(d<=0||H<=S||S<=$||$<=k)throw new Error("wtf");const w=p*.5;{const l=f.M(w,k).Q_HV(0,$).V(S).Q_VH(w,H).pathShape;e("(",l,w)}{const l=p*.5,M=f.M(0,k).Q_HV(l,$).V(S).Q_VH(0,H).pathShape;e(")",M,l)}{const l=f.M(w,k).H(0).V(H).H(w).pathShape;e("[",l,w)}{const l=f.M(0,k).H(w).V(H).H(0).pathShape;e("]",l,w)}}{const d=p*.75,H=d/2,S=f.M(H,i-H).V(i+H).M(h,i).H(d).pathShape;e("+",S,d)}{const d=p*.75,H=f.M(h,i).H(d).pathShape;e("-",H,d)}{const d=p/2*.9,H=5,S=-Math.PI/2,k=(s+a)/2,$=0,w=et(H,V=>{const L=V*(Math.PI*2)/H+S,C=ot($,L),R=ot(d,L);return[C,R]}),l=w.flat(),M=Math.min(...l.map(({x:V})=>V));l.forEach(V=>{V.x-=M,V.y+=k});const Q=w.map(([V,L])=>new at(V.x,V.y,L.x,L.y)),v=new I(Q),x=Math.max(...l.map(({x:V})=>V));e("*",v,x)}{const d=p*.75,H=f.M(h,i-_*1.25).H(d).M(h,i+_*1.25).H(d).pathShape;e("=",H,d)}{const d=p*1.25,H=a+_,S=f.M(0,H).H(d).pathShape;e("_",S,d)}{const d=p/2,H=3*d,S=d/3,k=s,$=k+d,w=$+d,l=w+d,M=f.M(d+S,k).L(d-S,l).M(2*d+S,k).L(2*d-S,l).M(0,$).H(H).M(0,w).H(H).pathShape;e("#",M,H)}{const d=p/2,H=3*d,S=0,k=d,$=H/2,w=2*d,l=H,M=s+(y.mHeight-H)/2,Q=M+k,v=M+$,x=M+w,V=M+l,L=f.M(w,v).Q_VH($,Q).Q_HV(k,v).Q_VH($,x).Q_HV(w,v).Q_VH((w+l)/2,x).Q_HV(l,v).V((Q+v)/2).Q_VH($,M).Q_HV(S,v).Q_VH($,V).H((w+l)/2).pathShape;e("@",L,H)}{const d=f.M(o,s).Q(r,s,r,m).L(r,g).Q(r,a,o,a).Q(h,a,h,g).L(h,m).Q(h,s,o,s).M(r,m).L(h,g).pathShape;e("0",d,t)}{const d=f.M(h,m).Q(o,m,o,s).L(o,a).M(h,a).L(r,a).pathShape;e("1",d,t)}{const d=f.M(h,m).Q_VH(o,s).Q_HV(r,m).Q_VH(o,i).Q_HV(h,a).L(r,a).pathShape;e("2",d,t)}{const d=f.M(h,m).Q_VH(o,s).Q_HV(r,m).Q_VH(o,i).Q_HV(r,g).Q_VH(o,a).Q_HV(h,g).pathShape;e("3",d,t)}{const d=(o+r)/2,H=(o+h)/2,S=f.M(r,i).L(h,i).L(H,s).M(d,s).L(d,a).pathShape;e("4",S,t)}{const d=h+p/5,H=r-p/5,S=(i+g)/2,k=f.M(H,s).L(d,s).L(h,i).Q_VH(o,m).Q_HV(r,S).Q_VH(o,a).Q_HV(h,g).pathShape;e("5",k,t)}{const d=f.M(r,s).Q_HV(h,g).Q_VH(o,a).Q_HV(r,g).Q_VH(o,i).Q_HV(h,g).pathShape;e("6",d,t)}{const d=f.M(h,s).L(r,s).L(h,a).pathShape;e("7",d,t)}{const d=f.M(o,s).Q(r,s,r,m).Q(r,i,o,i).Q(h,i,h,g).Q(h,a,o,a).Q(r,a,r,g).Q(r,i,o,i).Q(h,i,h,m).Q(h,s,o,s).pathShape;e("8",d,t)}{const d=f.M(r,m).Q(r,s,o,s).Q(h,s,h,m).Q(h,i,o,i).Q(r,i,r,m).Q(r,a,h,a).pathShape;e("9",d,t)}}{const t=f.M(h,a).L(u/2,s).L(y.aWidth,a).M(y.aWidth/4,i).L(y.aWidth*.75,i).pathShape;e("A",t,u)}{const t=p,n=m-s;if(n<=0)throw new Error("wtf");const o=(t-n)*(2/3),r=a-g;if(r<=0)throw new Error("wtf");const d=t-r,H=f.M(h,s).L(h,a).L(d,a).M(Math.max(d,o),i).L(h,i).M(h,s).L(o,s).Q(o+n,s,o+n,s+n).Q(o+n,i,o,i).M(d,i).Q(d+r,i,d+r,a-r).Q(d+r,a,d,a).pathShape;e("B",H,t)}{const t=p,o=t/2,r=t,d=f.M(r,m).Q(r,s,o,s).Q(h,s,h,m).L(h,g).Q(h,a,o,a).Q(r,a,r,g).pathShape;e("C",d,t)}{const t=p,o=t/2,r=t,d=f.M(h,s).L(h,a).L(o,a).Q(r,a,r,g).L(r,m).Q(r,s,o,s).L(h,s).pathShape;e("D",d,t)}{const t=p,n=t*(2/3),o=t,r=f.M(o,s).L(h,s).L(h,a).L(o,a).M(n,i).L(h,i).pathShape;e("E",r,t)}{const t=p,n=t*(2/3),o=t,r=f.M(o,s).L(h,s).L(h,a).M(n,i).L(h,i).pathShape;e("F",r,t)}{const t=p,o=t/2,r=t,d=f.M(r,m).Q(r,s,o,s).Q(h,s,h,m).L(h,g).Q(h,a,o,a).Q(r,a,r,g).L(r,i).L(o,i).pathShape;e("G",d,t)}{const t=p,n=t,o=f.M(h,s).L(h,a).M(n,s).L(n,a).M(h,i).L(n,i).pathShape;e("H",o,t)}{const t=y.mHeight/3,n=t/2,o=t,r=f.M(h,s).L(o,s).M(h,a).L(o,a).M(n,s).L(n,a).pathShape;e("I",r,t)}{const t=p*.85,o=t/2,r=t,d=f.M(r,s).L(r,g).Q(r,a,o,a).Q(h,a,h,g).pathShape;e("J",d,t)}{const t=p+_,n=(s+a)/2,o=f.M(h,s).L(h,a).M(t,s).L(h+.5,n).L(t,a).pathShape;e("K",o,t)}{const t=p,n=f.M(h,s).L(h,a).L(t,a).pathShape;e("L",n,t)}{const t=p*1.5,n=t/2,o=f.M(h,a).L(h,s).L(n,i).L(t,s).L(t,a).pathShape;e("M",o,t)}{const t=p*1.2,n=f.M(h,a).L(h,s).L(t,a).L(t,s).pathShape;e("N",n,t)}{const t=p*1.5,n=t/2,o=(s+a)/2,r=f.M(n,s).Q_HV(t,o).Q_VH(n,a).Q_HV(h,o).Q_VH(n,s).pathShape;e("O",r,t)}{const t=p,n=i-m;if(n<=0)throw new Error("wtf");const o=t-n,r=f.M(h,s).L(h,a).M(h,s).L(o,s).Q_HV(t,m).Q_VH(o,i).L(h,i).pathShape;e("P",r,t)}{const t=p*1.5,n=t/2,o=(s+a)/2,r=f.M(n,s).Q_HV(t,o).Q_VH(n,a).Q_HV(h,o).Q_VH(n,s).M(t-n*.75,a-n*.75).L(t+n/6,a+n/6).pathShape;e("Q",r,t)}{const t=p,n=i-m;if(n<=0)throw new Error("wtf");const o=t-n,r=f.M(h,s).L(h,a).M(h,s).L(o,s).Q_HV(t,m).Q_VH(o,i).L(h,i).M(o,i).L(t,a).pathShape;e("R",r,t)}{const t=p,n=p/2,o=p,r=f.M(o,m).Q_VH(n,s).Q_HV(h,m).Q_VH(n,i).Q_HV(o,g).Q_VH(n,a).Q_HV(h,g).pathShape;e("S",r,t)}{const n=p+_,o=n/2,r=n,d=y.mHeight/8,H=f.M(r,m).Q_VH(o,s).Q_HV(h,m).Q_VH(o,i).Q_HV(r,g).Q_VH(o,a).Q_HV(h,g).M(o,s-d).V(a+d).pathShape;e("$",H,n)}{const t=p,n=t/2,o=f.M(n,s).L(n,a).M(t,s).L(h,s).pathShape;e("T",o,t)}{const t=(g+i)/2,n=Math.abs(t-a)*.85,o=n*2,r=f.M(h,s).V(t).Q_VH(n,a).Q_HV(o,t).V(s).pathShape;e("U",r,o)}{const t=u,n=t/2,o=f.M(h,s).L(n,a).L(t,s).pathShape;e("V",o,t)}{const t=u*1.5,n=t/3,o=t/2,r=n*2,d=f.M(h,s).L(n,a).L(o,i).L(r,a).L(t,s).pathShape;e("W",d,t)}{const t=p,n=f.M(t,s).L(h,a).M(h,s).L(t,a).pathShape;e("X",n,t)}{const t=_,n=p+t,o=f.M(n,s).L(t,a).M(h,s).L(n/2,i).pathShape;e("Y",o,n)}{const t=p,n=f.M(h,s).H(t).L(h,a).H(t).pathShape;e("Z",n,t)}{const t=p/4,n=p*1.2,o=f.M(t*2,s+t).Q_VH(t,s).Q_HV(0,s+t).Q_VH(t,s+t*2).Q_HV(t*2,s+t),d=o.pathShape.translate(n-t*2,y.mHeight-t*2);o.addCommands(d.commands),o.M(n,s).L(h,a);const H=o.pathShape;e("%",H,n)}{const t=p,n=f.M(t,s).L(h,a).pathShape;e("/",n,t)}{const t=p,n=f.M(h,s).L(t,a).pathShape;e("\\",n,t)}{const t=p,n=_/2,o=t+n,r=t/2,d=f.M(r,i).Q_HV(h,g).Q_VH(r,a).Q_HV(t,g).Q_VH(r,i).M(o,i).L(o,a).pathShape;e("a",d,o)}{const t=p,n=_/2,o=t+n,r=n,d=n+t/2,H=o,S=f.M(h,s).V(a).M(r,g).Q_VH(d,a).Q_HV(H,g).Q_VH(d,i).Q_HV(r,g).pathShape;e("b",S,o)}{const t=p*.875,n=0,o=p/2,r=t,d=(i+g)/2,H=(g+a)/2,S=f.M(r,d).Q_VH(o,i).Q_HV(n,g).Q_VH(o,a).Q_HV(r,H).pathShape;e("c",S,t)}{const t=p,n=_/2,o=t+n,r=t/2,d=f.M(r,i).Q_HV(h,g).Q_VH(r,a).Q_HV(t,g).Q_VH(r,i).M(o,s).L(o,a).pathShape;e("d",d,o)}const Y=p/8;{const t=p,n=p/2,o=t,r=o-Y,d=f.M(h,g).H(o).Q_VH(n,i).Q_HV(h,g).Q_VH(n,a).H(r).pathShape;e("e",d,t)}{const t=p*.75,n=t/2,o=t,r=f.M(o,s).Q_HV(n,m).V(a).M(o,i).H(h).pathShape;e("f",r,t)}{const t=p,n=_/2,o=t+n,r=t/2,d=f.M(r,i).Q_HV(h,g).Q_VH(r,a).Q_HV(t,g).Q_VH(r,i).M(o,i).V(a).Q_VH(r,b).H(h+Y).pathShape;e("g",d,o)}{const t=p*.85,n=t/2,o=f.M(h,s).V(a).Q_VH(n,i).Q_HV(t,g).V(a).pathShape;e("h",o,t)}const P=_/4;{const n=f.M(h,i).V(a).M(h,m).V(m-P).pathShape;e("i",n,0)}{const t=Math.abs(a-b),n=t/2,o=f.M(t,i).V(a).Q_VH(n,b).Q_HV(h,a).M(t,m).V(m-P).pathShape;e("j",o,t)}{const n=f.M(h,a).V(a-P).pathShape;e(".",n,0)}{const n=f.M(h,s).V(g).M(h,a).V(a-P).pathShape;e("!",n,0)}{const n=(b-a)/2,o=n/2,r=f.M(h,a-P).V(a).Q_VH(-o,a+n).pathShape;e(",",r,0)}{const n=i,o=f.M(h,a).V(a-P).M(h,n-P).V(n).pathShape;e(":",o,0)}{const n=i,o=(b-a)/2,r=o/2,d=f.M(h,a-P).V(a).Q_VH(-r,a+o).M(h,n-P).V(n).pathShape;e(";",d,0)}{const t=y.xHeight*2/3,n=p/10,o=t+n,r=f.M(h,s).V(a).M(t,i).L(h,i+t).M(t/2,a-t).L(o,a).pathShape;e("k",r,o)}{const n=f.M(h,s).V(a).pathShape;e("l",n,0)}{const t=p*1.5,n=t/4,o=t/2,r=t*3/4,d=t,H=f.M(h,i).V(a).Q_VH(n,i).Q_HV(o,g).V(a).M(o,g).Q_VH(r,i).Q_HV(d,g).V(a).pathShape;e("m",H,t)}{const t=p*.85,n=t/2,o=f.M(h,i).V(a).Q_VH(n,i).Q_HV(t,g).V(a).pathShape;e("n",o,t)}{const t=p,n=0,o=t/2,r=t,d=f.M(o,i).Q_HV(r,g).Q_VH(o,a).Q_HV(n,g).Q_VH(o,i).pathShape;e("o",d,t)}{const t=p,n=_/2,o=t+n,r=n,d=n+t/2,H=o,S=f.M(h,i).V(b).M(r,g).Q_VH(d,i).Q_HV(H,g).Q_VH(d,a).Q_HV(r,g).pathShape;e("p",S,o)}{const t=p,n=t/2,o=t+_/2,r=Math.abs(a-b),d=o+r/2,H=o+r,S=f.M(n,i).Q_HV(h,g).Q_VH(n,a).Q_HV(t,g).Q_VH(n,i).M(o,i).V(a).Q_VH(d,b).Q_HV(H,a).pathShape;e("q",S,H)}{const t=p,n=t/2,o=f.M(h,i).V(a).Q_VH(n,i).Q_HV(t,g).pathShape;e("r",o,t)}{const t=y.xHeight*2/3,n=t/2,o=a,r=g,d=i,H=(o+r)/2,S=(r+d)/2,k=(S+d)/2,$=(o+H)/2,w=f.M(t,k).Q_VH(n,d).Q_HV(h,S).Q_VH(n,r).Q_HV(t,H).Q_VH(n,o).Q_HV(h,$).pathShape;e("s",w,t)}{const t=p*.75,n=t/2,o=t,r=f.M(n,m).V(g).Q_VH(o,a).M(o,i).H(h).pathShape;e("t",r,t)}{const t=p*.85,n=t/2,o=f.M(h,i).V(g).Q_VH(n,a).Q_HV(t,i).L(t,a).pathShape;e("u",o,t)}{const t=p,n=t/2,o=f.M(h,i).L(n,a).L(t,i).pathShape;e("v",o,t)}{const t=y.xHeight*1.5,n=t/3,o=t/2,r=n*2,d=f.M(h,i).L(n,a).L(o,g).L(r,a).L(t,i).pathShape;e("w",d,t)}{const t=p,n=f.M(t,i).L(h,a).M(h,i).L(t,a).pathShape;e("x",n,t)}{const t=p,n=t/2,o=(i+b)/2,r=f.M(t,i).L(h,b).M(h,i).L(n,o).pathShape;e("y",r,t)}{const t=p,n=f.M(h,i).H(t).L(h,a).H(t).pathShape;e("z",n,t)}{const t=p/2,n=t/2,o=f.M(n,s).circle(n,s+n,"cw").pathShape;e("°",o,t)}{const t=-s,n=t/2,o=f.M(n,s).circle(n,s+n,"cw").pathShape;e("◯",o,t)}{const t=-s,n=t/2,o=s/2,r=f.M(0,o).arc(n,o,t,o,"cw").pathShape;e("◠",r,t)}{const t=-s,n=t/2,o=s/2,r=f.M(0,o).arc(n,o,t,o,"ccw").pathShape;e("◡",r,t)}{const t=-s,n=t/4,o=s+n,r=f.M(n*2,o).arc(n*3,o,t,o,"cw").Q_angles(n*2,a,_t,ft+.01).Q_angles(0,o,Lt+.01,bt).arc(n,o,n*2,o,"cw").pathShape;e("♡",r,t)}return["À","Á","Â","Ã","Ä","Å"].forEach((t,n,o)=>{const r=-s/o.length*(n*2+1),d=f.M(r,s).Q_angles(0,a,Et,ft+.01).pathShape;e(t,d,r),console.log(d.commands[0].asString)}),new Map([...c.entries()].sort(([t],[n])=>t<n?-1:t==n?1:0))}const J=wt("main",SVGSVGElement);function Ct(y){const c=new Map;return y.forEach((e,u)=>{const{advance:p,fontMetrics:s}=e,m=e.shape.convertToCubics(),i=new lt(m,p,s);c.set(u,i)}),c}function Rt(y,c=y*.75){const e=tt(y);return tt(c).forEach((p,s)=>{const m=s.toLowerCase();m!=s&&e.set(m,p)}),e}function it(y,c){const e={roughness:.5,bowing:3,disableMultiStroke:!0,preserveVertices:!0},u=Vt.generator({options:{...e,...c}}),p=new Map;return y.forEach((s,m)=>{const i=()=>{const a=u.path(s.d),_=u.toPaths(a).map(h=>h.d);return I.fromStrings(_)},g=new lt(i,s.advance,s.fontMetrics);p.set(m,g)}),p}{let y=function(w){return w.length==1},c=function(w){let M=1/0,Q=-1/0;w.forEach(L=>{const{description:C,baseline:R}=L,{fontMetrics:D}=C;M=Math.min(M,D.top+R),Q=Math.max(Q,D.bottom+R)});const v=M-1,x=Q+1,V=document.createElementNS("http://www.w3.org/2000/svg","rect");return V.x.baseVal.value=0,V.y.baseVal.value=v,V.width.baseVal.value=100,V.height.baseVal.value=x-v,J.insertBefore(V,w[0].element),V},e=function(w){const l=new u;l.font=P;const M=l.addText(w),Q=u.join(M),v=l.x;return{shape:Q,advance:v}};class u{leftMargin=0;rightMargin=95;x=this.leftMargin;baseline=0;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(l=1){this.baseline+=this.lineHeight*l}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=tt(5);getDescription(l){return this.font.get(l)}static join(l){return new I(l.flatMap(M=>M.description.shape.translate(M.x,M.baseline).commands))}displayText(l){return l.map(M=>{const Q=M.description.shape,v=Q.makeElement();return J.appendChild(v),v.style.transform=`translate(${this.x}px,${this.baseline}px)`,{...M,shape:Q,element:v}})}static WORD_BREAK=/^(\n+| +|[^ \n]+)(.*)/ms;addText(l){const M=new Set,Q=[];for(;;){const v=u.WORD_BREAK.exec(l);if(!v)break;const x=v[1];if(l=v[2],x[0]==`
`)this.carriageReturn(),this.lineFeed(x.length*4/3);else if(x[0]==" ")this.addSpace(x.length);else{let V=0;const L=0,C=[...x].flatMap(R=>{const D=this.getDescription(R);if(D){const T=D.advance+D.fontMetrics.defaultKerning,A={x:V,width:T,baseline:L,description:D,char:R};return V+=T,A}else return M.add(R),[]});this.x+V>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),C.forEach(R=>{R.x+=this.x,R.baseline=this.baseline,Q.push(R)}),this.x+=V}}return M.size>0&&console.warn(M),Q}addSpace(l=1){this.x+=this.font.get("0").fontMetrics.spaceWidth*l}}class p{leftMargin=5;rightMargin=95;x=this.leftMargin;baseline=10;lineHeight=7.5;carriageReturn(){this.x=this.leftMargin}lineFeed(l=1){this.baseline+=this.lineHeight*l}CRLF(){this.carriageReturn(),this.lineFeed(4/3)}font=tt(5);getDescription(l){return this.font.get(l)}makeRoom(l){this.x+l.advance>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed())}advance(l){this.x+=l.advance+l.fontMetrics.defaultKerning}moveToCursor(l){l.style.transform=`translate(${this.x}px,${this.baseline}px)`}showAndAdvance(l,M){return this.x+M>this.rightMargin&&this.x>this.leftMargin&&(this.carriageReturn(),this.lineFeed()),J.appendChild(l),l.style.transform=`translate(${this.x}px,${this.baseline}px)`,this.x+=M,this}show1(l){this.makeRoom(l);const M=l.makeElement();J.appendChild(M);const{x:Q,baseline:v}=this;return this.moveToCursor(M),this.advance(l),{element:M,x:Q,baseline:v}}splitAndShow1(l){this.makeRoom(l);const M=l.makeElements();return M.forEach(({element:Q})=>{J.appendChild(Q),this.moveToCursor(Q)}),this.advance(l),M}show(l){const M=new Set,Q=[...l].flatMap(v=>{const x=this.getDescription(v);return x?{...this.show1(x),description:x,char:v}:v==" "?(this.showSpace(),[]):(M.add(v),[])});return M.size>0&&console.warn(M),Q}splitAndShow(l){const M=new Set,Q=[...l].flatMap(v=>{const x=this.getDescription(v);return x?this.splitAndShow1(x):v==" "?(this.showSpace(),[]):(M.add(v),[])});return M.size>0&&console.warn(M),Q}showSpace(l=1){return this.x+=this.font.get("0").fontMetrics.spaceWidth*l,this}}const s=new p;let m="";s.font.forEach((w,l)=>{y(l)&&(m+=l)}),s.show(m),s.CRLF();{const w=s.show(m);w.forEach(({element:l})=>{l.classList.add("lights")}),c(w).style.fill="black"}s.CRLF();const i=s.splitAndShow(m),g=w=>{if(w==0)return 0;const l=i[w].innerShape,M=i[w-1].innerShape,Q=Math.hypot(M.endX-l.startX,M.endY-l.startY);return j(Q),Q},{totalLength:a,maxLength:b}=i.reduce(({totalLength:w,maxLength:l},{element:M},Q)=>{const v=M.getTotalLength();return j(v),w+=g(Q)+v,l=Math.max(l,v),{totalLength:w,maxLength:l}},{totalLength:0,maxLength:0}),_=Math.ceil(b)+1,h=`0 ${_} ${_} 0`;async function Y(){for(;;){let M=0,Q;i.forEach(({element:v},x)=>{const V=v.getTotalLength();M+=g(x);const L=1e3+M/a*3e4;M+=V;const C=V/a*3e4;Q=v.animate([{strokeDasharray:h,strokeDashoffset:1e-5},{strokeDasharray:h,strokeDashoffset:-V}],{delay:L,duration:C,fill:"backwards"})}),await Q.finished,await ut(3e3)}}Y(),s.CRLF(),s.font=Rt(5,3),s.show("Small  Caps"),s.lineHeight*=1.125;const P=tt(new gt(6,.5)),t=Ct(P),n=[{roughness:.4,title:"Heartbeat!"},{roughness:.44,title:"Toggle @#$%"},{roughness:.5,title:"Skywriting"},{roughness:.54,title:"The Wave *"},{roughness:.59,title:"Wavy Lights."},{roughness:.64,title:"Blustery day.i"}].map(w=>{const{roughness:l,title:M}=w;return s.font=it(t,{roughness:l}),s.CRLF(),s.show(`${Math.round(l*100)} ${M??"Rough Font"} [4XxYyZ]`)}),o=n[0],r=n[1],d=n[2],H=n[3],S=n[4],k=n[5],$=it(t,{roughness:0});c(S).style.fill="black",S.forEach(({element:w})=>{w.classList.add("lights")}),[S,k].forEach(w=>{w.forEach(l=>{function M(){return Math.random()+.5|0}const Q=3+M()+M()+M(),v=et(Q,()=>({d:l.description.cssPath}));v.push(v[0]);const x=Q*1e4/3,V=x/8,L=Math.exp(B(Math.log(V),Math.log(x),Math.random()));l.element.animate(v,{duration:L,iterations:1/0})})}),r.forEach(w=>{const l=$.get(w.char).cssPath,M=w.element.style.d,Q=.03,v=[{offset:0,d:M},{offset:Q,d:l},{offset:.5,d:l},{offset:Q+.5,d:M},{offset:1,d:M}];w.element.animate(v,{duration:2e3,iterations:1/0})});{const v=H.length,x=v*3,V=5e3;H.forEach((L,C)=>{const R=$.get(L.char).cssPath,D=L.element.style.d,T=L.element.style.transform,A=T+" scale(1.32)",N={d:R,transform:T},W={d:D,transform:A},E=[{offset:0,...N},{offset:4/x,...W},{offset:6/x,...W},{offset:14/x,...N},{offset:1,...N}];L.element.animate(E,{duration:V,iterationStart:1-C/v,iterations:1/0})})}{const w=d;c(w).style.fill="hwb(190 10% 0% / 1)",w.forEach(l=>{const M=$.get(l.char).cssPath,Q=l.element.style.d,v=1/16,x=15/16,V=14e3,L=[{offset:0,strokeWidth:.5},{offset:v,strokeWidth:.5},{offset:x,strokeWidth:2.25},{offset:1,strokeWidth:2.25}],C=[{offset:0,d:M},{offset:v,d:M,easing:"cubic-bezier(0.275, 0.760, 0.495, 1.005)"},{offset:x,d:Q},{offset:1,d:Q}],R=[{offset:0,opacity:1},{offset:v,opacity:1,easing:"cubic-bezier(0.280, 0.650, 0.630, 1.000)"},{offset:x,opacity:0},{offset:1,opacity:0}];l.element.animate(R,{duration:V,iterations:1/0}),l.element.animate(C,{duration:V,iterations:1/0}),l.element.animate(L,{duration:V,iterations:1/0}),l.element.style.stroke="white"})}o.forEach(w=>{const l=$.get(w.char).cssPath,M=w.element.style.d,Q=750,v="cubic-bezier(.55,0,1,.55)";w.element.animate([{offset:0,d:l,easing:v},{offset:.5,d:M,easing:v},{offset:1,d:l}],{duration:Q,iterations:1/0})});{s.CRLF();const w=.25,l=1.5,M="The more I drink the more I want to tell you what I really think about you.",Q=nt(0,w,M.length-1,l),v=[...M].flatMap((T,A)=>(s.font=it(t,{roughness:Q(A)}),s.splitAndShow(T))),x=T=>{if(T==0)return 0;const A=v[T].innerShape,N=v[T-1].innerShape,W=Math.hypot(N.endX-A.startX,N.endY-A.startY);return j(W),W},{totalLength:V,maxLength:L}=v.reduce(({totalLength:T,maxLength:A},{element:N},W)=>{const E=N.getTotalLength();return T+=x(W)+E,A=Math.max(A,E),{totalLength:T,maxLength:A}},{totalLength:0,maxLength:0}),C=Math.ceil(L)+1,R=`0 ${C} ${C} 0`;async function D(){for(;;){let N=0,W;v.forEach(({element:E},F)=>{const K=E.getTotalLength();N+=x(F);const O=1e3+N/V*3e4;N+=K;const U=K/V*3e4;W=E.animate([{strokeDasharray:R,strokeDashoffset:1e-5},{strokeDasharray:R,strokeDashoffset:-K}],{delay:O,duration:U,fill:"backwards"})}),await W.finished,await ut(3e3)}}D()}{s.font=P,s.CRLF();const w=e("Stop°"),l=e("Go◯");s.CRLF();const M=w.shape.makeElement();s.showAndAdvance(M,w.advance),s.showSpace();const Q=l.shape.makeElement();s.showAndAdvance(Q,l.advance);const v=l.shape.matchForMorph(w.shape),x=v[0],V=v[1],L=w.shape.makeElement();s.showSpace(),s.showAndAdvance(L,w.advance),L.animate([{d:x},{d:x,easing:"ease"},{d:V},{d:V,easing:"ease"},{d:x}],{duration:5e3,iterations:1/0})}{const w=x=>e([...x].join(`
`)).shape,l=w("123"),M=w("ABC"),[Q,v]=l.matchForMorph(M);s.CRLF(),et(7,x=>{const V=l.makeElement();s.showAndAdvance(V,10*(6/7)*.86),V.animate([{d:Q},{d:v}],{duration:Number.MAX_SAFE_INTEGER,iterations:1,iterationStart:x/6*.999})}),s.lineFeed(2.5)}{let w=function(V){const L=V[0].makeElement();s.showAndAdvance(L,0);const C=V[0].matchForMorph(V[1]);L.animate([{d:C[0]},{d:C[0],easing:"ease"},{d:C[1]},{d:C[1],easing:"ease"},{d:C[0]}],{duration:5e3,iterations:1/0})},l=function(V){const L=new I(V[1].commands.toReversed());return[V[0],L]},M=function(V){{const E=V.map(F=>!F.commands.length);if(E[0]&&E[1])return V;if(E[0]||E[1])throw new Error("wtf")}function L(E,F){const K=Math.hypot(E.x-F.x,E.y-F.y)+Math.hypot(E.x0-F.x0,E.y0-F.y0),O=Math.hypot(E.x-F.x0,E.y-F.y0)+Math.hypot(E.x0-F.x0,E.y-F.y),U=O<K;return{distance:U?O:K,needToReverse:U}}const C=V.map(E=>E.commands),[R,D]=C[0].length<C[1].length?C:C.toReversed(),T=[...D],A=[],N=vt([...R]);if(N.forEach(E=>{let F={command:void 0,distance:1/0,index:NaN};T.forEach((O,U)=>{const{distance:Z,needToReverse:ct}=L(E,O);Z<F.distance&&(F={command:ct?O.toCubic().reverse():O,distance:Z,index:U})});const K=F;A.push(K.command),T.splice(K.index,1)}),N.length!=A.length)throw new Error("wtf");if(T.forEach(E=>{let F={command:void 0,distance:1/0,index:NaN};N.forEach((O,U)=>{const{distance:Z,needToReverse:ct}=L(O,E);Z<F.distance&&(F={command:ct?O.toCubic().reverse():O,distance:Z,index:U})});const K=F;N.push(K.command),A.push(E)}),N.length!=A.length)throw new Error("wtf");const W=[N,A];return R==C[1]&&W.reverse(),console.log(R),[new I(W[0]),new I(W[1])]};s.CRLF();const Q=e(`Round
  and
round!`),v=e(`Circle
  in a
spiral`),x=[Q.shape,v.shape];w(x),s.x+=Math.max(Q.advance,v.advance),s.showSpace(4),w(M(x)),s.x+=Math.max(Q.advance,v.advance),s.showSpace(4),w(l(x)),s.lineFeed(2.5)}s.x>s.rightMargin&&s.CRLF(),J.viewBox.baseVal.height=s.baseline+s.font.get("0").fontMetrics.bottom}
