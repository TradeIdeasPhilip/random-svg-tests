var l={},M;function K(){return M||(M=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.countMap=i.Random=i.phi=i.radiansPerDegree=i.degreesPerRadian=i.FULL_CIRCLE=i.FIGURE_SPACE=i.NON_BREAKING_SPACE=i.MIN_DATE=i.MAX_DATE=i.csvStringToArray=void 0,i.assertClass=L,i.assertNonNullable=N,i.sleep=C,i.testXml=d,i.parseXml=I,i.followPath=h,i.getAttribute=F,i.parseFloatX=g,i.parseIntX=m,i.parseTimeT=T,i.pickAny=R,i.pick=w,i.take=p,i.filterMap=P,i.makePromise=y,i.dateIsValid=v,i.angleBetween=k,i.positiveModulo=f,i.rotateArray=D,i.rectUnion=E,i.rectAddPoint=X,i.dateToFileName=O,i.lerp=$,i.assertFinite=b,i.shuffleArray=G,i.zip=B,i.count=j,i.initializedArray=S,i.sum=q,i.makeLinear=z,i.makeBoundedLinear=J,i.polarToRectangular=V,i.permutations=A,i.gcd=s,i.lcm=H;function L(e,n,r="Assertion Failed."){const t=a=>{throw new Error(`${r}  Expected type:  ${n.name}.  Found type:  ${a}.`)};if(e===null)t("null");else if(typeof e!="object")t(typeof e);else if(!(e instanceof n))t(e.constructor.name);else return e;throw new Error("wtf")}function N(e){if(e==null)throw new Error("wtf");return e}function C(e){return new Promise(n=>{setTimeout(n,e)})}function d(e){const r=new DOMParser().parseFromString(e,"application/xml");for(const t of Array.from(r.querySelectorAll("parsererror")))if(t instanceof HTMLElement)return{error:t};return{parsed:r}}function I(e){if(e!==void 0){const{parsed:n}=d(e);return n?.documentElement}}function h(e,...n){for(const r of n){if(e===void 0)return;if(typeof r=="number")e=e.children[r];else{const t=e.getElementsByTagName(r);if(t.length!=1)return;e=t[0]}}return e}function F(e,n,...r){if(n=h(n,...r),n!==void 0&&n.hasAttribute(e))return n.getAttribute(e)??void 0}function g(e){if(e==null)return;const n=+e;if(isFinite(n))return n}function m(e){const n=g(e);if(n!==void 0)return n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER||n!=Math.floor(n)?void 0:n}function T(e){if(typeof e=="string"&&(e=m(e)),e!=null&&!(e<=0))return new Date(e*1e3)}const _=e=>{const n=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,r=[[]];let t;for(;t=n.exec(e);)t[1].length&&t[1]!==","&&r.push([]),r[r.length-1].push(t[2]!==void 0?t[2].replace(/""/g,'"'):t[3]);return r};i.csvStringToArray=_;function R(e){const n=e.values().next();if(!n.done)return n.value}function w(e){if(e.length==0)throw new Error("wtf");return e[Math.random()*e.length|0]}function p(e){if(e.length<1)throw new Error("wtf");const n=Math.random()*e.length|0;return e.splice(n,1)[0]}function P(e,n){const r=[];return e.forEach((t,a)=>{const u=n(t,a);u!==void 0&&r.push(u)}),r}function y(){let e,n;return{promise:new Promise((t,a)=>{e=t,n=a}),resolve:e,reject:n}}i.MAX_DATE=new Date(864e13),i.MIN_DATE=new Date(-864e13);function v(e){return isFinite(e.getTime())}i.NON_BREAKING_SPACE=" ",i.FIGURE_SPACE=" ",i.FULL_CIRCLE=2*Math.PI,i.degreesPerRadian=360/i.FULL_CIRCLE,i.radiansPerDegree=i.FULL_CIRCLE/360,i.phi=(1+Math.sqrt(5))/2;function k(e,n){const r=f(e,i.FULL_CIRCLE);let a=f(n,i.FULL_CIRCLE)-r;const u=i.FULL_CIRCLE/2;if(a>u?a-=i.FULL_CIRCLE:a<-u&&(a+=i.FULL_CIRCLE),Math.abs(a)>u)throw new Error("wtf");return a}function f(e,n){const r=e%n;return r<0?r+Math.abs(n):r}function D(e,n){if((n|0)!=n)throw new Error(`invalid input: ${n}`);return n=f(n,e.length),n==0?e:[...e.slice(n),...e.slice(0,n)]}class U{constructor(){throw new Error("wtf")}static sfc32(n,r,t,a){function u(){n|=0,r|=0,t|=0,a|=0;let c=(n+r|0)+a|0;return a=a+1|0,n=r^r>>>9,r=t+(t<<3)|0,t=t<<21|t>>>11,t=t+c|0,(c>>>0)/4294967296}const o=u;return Object.defineProperty(o,"currentSeed",{get(){return JSON.stringify([n,r,t,a])}}),o}static#e=42;static seedIsValid(n){try{return this.create(n),!0}catch{return!1}}static create(n=this.newSeed()){console.info(n);const r=JSON.parse(n);if(!(r instanceof Array))throw new Error("invalid input");if(r.length!=4)throw new Error("invalid input");const[t,a,u,o]=r;if(!(typeof t=="number"&&typeof a=="number"&&typeof u=="number"&&typeof o=="number"))throw new Error("invalid input");return this.sfc32(t,a,u,o)}static newSeed(){const n=[];return n.push(Date.now()|0),n.push(this.#e++|0),n.push(Math.random()*2**31|0),n.push(performance.now()*1e4|0),JSON.stringify(n)}static fromString(n){try{return this.create(n)}catch{return this.create(this.anyStringToSeed(n))}}static anyStringToSeed(n){function r(u,o){return(u<<o|u>>>32-o)>>>0}const t=[2654435769,608135816,2242054355,320440878];return new TextEncoder().encode(n).forEach(u=>{t[0]^=u,t[0]=r(t[0],3),t[1]^=u,t[1]=r(t[1],5),t[2]^=u,t[2]=r(t[2],7),t[3]^=u,t[3]=r(t[3],11)}),t[0]^=r(t[1],7),t[1]^=r(t[2],11),t[2]^=r(t[3],13),t[3]^=r(t[0],17),JSON.stringify(t)}static test(){const t=[this.create()];for(;t.length<=10;){for(let u=0;u<20;u++){const o=t.map(c=>c());for(let c=1;c<o.length;c++)if(o[c]!==o[0]){debugger;throw new Error("wtf")}}const a=w(t).currentSeed;t.forEach(u=>{if(u.currentSeed!=a){debugger;throw new Error("wtf")}}),t.push(this.create(a))}}}i.Random=U;function E(e,n){const r=Math.min(e.x,n.x),t=Math.min(e.y,n.y),a=Math.max(e.x+e.width,n.x+n.width),u=Math.max(e.y+e.height,n.y+n.height),o=a-r,c=u-t;return{x:r,y:t,width:o,height:c}}function X(e,n,r){return E(e,{x:n,y:r,width:0,height:0})}function O(e){return isNaN(e.getTime())?"0000⸱00⸱00 00⦂00⦂00":`${e.getFullYear().toString().padStart(4,"0")}⸱${(e.getMonth()+1).toString().padStart(2,"0")}⸱${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}⦂${e.getMinutes().toString().padStart(2,"0")}⦂${e.getSeconds().toString().padStart(2,"0")}`}function $(e,n,r){return e+(n-e)*r}function b(...e){e.forEach(n=>{if(!Number.isFinite(n))throw new Error("wtf")})}function G(e){for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function*B(...e){const n=e.map(r=>r[Symbol.iterator]());for(;;){const r=n.map(t=>t.next());if(r.some(({done:t})=>t))break;yield r.map(({value:t})=>t)}}function*j(e=0,n=1/0,r=1){for(let t=e;t<n;t+=r)yield t}function S(e,n){const r=[];for(let t=0;t<e;t++)r.push(n(t));return r}i.countMap=S;function q(e){return e.reduce((n,r)=>n+r,0)}function z(e,n,r,t){const a=(t-n)/(r-e);return function(u){return(u-e)*a+n}}function J(e,n,r,t){r<e&&([e,n,r,t]=[r,t,e,n]);const a=(t-n)/(r-e);return function(u){return u<=e?n:u>=r?t:(u-e)*a+n}}function V(e,n){return{x:Math.cos(n)*e,y:Math.sin(n)*e}}function*A(e,n=[]){if(e.length==0)yield n;else for(let r=0;r<e.length;r++){const t=e[r],a=[...n,t],u=[...e.slice(0,r),...e.slice(r+1)];yield*A(u,a)}}function s(e,n){return n?s(n,e%n):e}function H(e,n){return e*n/s(e,n)}}(l)),l}var Y=K();export{Y as m,K as r};
