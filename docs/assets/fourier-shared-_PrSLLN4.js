import{d as b,P as p,L}from"./path-shape-CZZKMsju.js";import{m as F}from"./misc-BHUyxQfl.js";var w,S;function C(){if(S)return w;S=1;var a=function(r,e){return[r[0]+e[0],r[1]+e[1]]},u=function(r,e){return[r[0]-e[0],r[1]-e[1]]},i=function(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]},t=function(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])};return w={add:a,subtract:u,multiply:i,magnitude:t},w}var T,_;function E(){if(_)return T;_=1;var a=C(),u={},i=function(e,o){var n=-2*Math.PI*(e/o);return u[o]=u[o]||{},u[o][e]=u[o][e]||[Math.cos(n),Math.sin(n)],u[o][e]},t=function(e){var o=e.map(a.magnitude);return o.slice(0,o.length/2)},r=function(e,o){var n=o/e.length,s=e.slice(0,e.length/2);return s.map(function(f,l){return l*n})};return T={fftMag:t,fftFreq:r,exponent:i},T}var h={},R;function G(){if(R)return h;R=1;var a=32;h.INT_BITS=a,h.INT_MAX=2147483647,h.INT_MIN=-1<<a-1,h.sign=function(t){return(t>0)-(t<0)},h.abs=function(t){var r=t>>a-1;return(t^r)-r},h.min=function(t,r){return r^(t^r)&-(t<r)},h.max=function(t,r){return t^(t^r)&-(t<r)},h.isPow2=function(t){return!(t&t-1)&&!!t},h.log2=function(t){var r,e;return r=(t>65535)<<4,t>>>=r,e=(t>255)<<3,t>>>=e,r|=e,e=(t>15)<<2,t>>>=e,r|=e,e=(t>3)<<1,t>>>=e,r|=e,r|t>>1},h.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},h.popCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24};function u(t){var r=32;return t&=-t,t&&r--,t&65535&&(r-=16),t&16711935&&(r-=8),t&252645135&&(r-=4),t&858993459&&(r-=2),t&1431655765&&(r-=1),r}h.countTrailingZeros=u,h.nextPow2=function(t){return t+=t===0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},h.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},h.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var i=new Array(256);return function(t){for(var r=0;r<256;++r){var e=r,o=r,n=7;for(e>>>=1;e;e>>>=1)o<<=1,o|=e&1,--n;t[r]=o<<n&255}}(i),h.reverse=function(t){return i[t&255]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},h.interleave2=function(t,r){return t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t|r<<1},h.deinterleave2=function(t,r){return t=t>>>r&1431655765,t=(t|t>>>1)&858993459,t=(t|t>>>2)&252645135,t=(t|t>>>4)&16711935,t=(t|t>>>16)&65535,t<<16>>16},h.interleave3=function(t,r,e){return t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,t|=r<<1,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t|e<<2},h.deinterleave3=function(t,r){return t=t>>>r&1227133513,t=(t|t>>>2)&3272356035,t=(t|t>>>4)&251719695,t=(t|t>>>8)&4278190335,t=(t|t>>>16)&1023,t<<22>>22},h.nextCombination=function(t){var r=t|t-1;return r+1|(~r&-~r)-1>>>u(t)+1},h}var M,y;function P(){if(y)return M;y=1;var a=C(),u=E(),i=G();return M={fft:function t(r){var e=[],o=r.length;if(o==1)return Array.isArray(r[0])?[[r[0][0],r[0][1]]]:[[r[0],0]];for(var n=t(r.filter(d)),s=t(r.filter(m)),f=0;f<o/2;f++){var l=n[f],c=a.multiply(u.exponent(f,o),s[f]);e[f]=a.add(l,c),e[f+o/2]=a.subtract(l,c)}function d(x,g){return g%2==0}function m(x,g){return g%2==1}return e},fftInPlace:function(t){for(var r=t.length,e=i.countTrailingZeros(r),o=0;o<r;o++){var n=i.reverse(o)>>>i.INT_BITS-e;if(n>o){var s=[t[o],0];t[o]=t[n],t[n]=s}else t[n]=[t[n],0]}for(var f=2;f<=r;f+=f)for(var l=0;l<f/2;l++)for(var c=u.exponent(l,f),d=0;d<r/f;d++){var m=a.multiply(c,t[d*f+l+f/2]);t[d*f+l+f/2]=a.subtract(t[d*f+l],m),t[d*f+l]=a.add(t[d*f+l],m)}}},M}var A,B;function U(){if(B)return A;B=1;var a=P().fft;return A={ifft:function(i){for(var t=[],r=0;r<i.length;r++)t[r]=[i[r][1],i[r][0]];for(var e=a(t),o=[],n=0;n<e.length;n++)o[n]=[e[n][1]/e.length,e[n][0]/e.length];return o}},A}var q,X;function V(){if(X)return q;X=1;var a=C(),u=E(),i=function(t){for(var r=[],e=t.length,o=0;o<e;o++){r[o]=[0,0];for(var n=0;n<e;n++){var s=u.exponent(o*n,e),f;Array.isArray(t[n])?f=a.multiply(t[n],s):f=a.multiply([t[n],0],s),r[o]=a.add(r[o],f)}}return r};return q=i,q}var I,Z;function H(){if(Z)return I;Z=1;var a=V();function u(i){for(var t=[],r=0;r<i.length;r++)t[r]=[i[r][1],i[r][0]];for(var e=a(t),o=[],n=0;n<e.length;n++)o[n]=[e[n][1]/e.length,e[n][0]/e.length];return o}return I=u,I}var N,D;function K(){return D||(D=1,N={fft:P().fft,ifft:U().ifft,fftInPlace:P().fftInPlace,util:E(),dft:V(),idft:H()}),N}var O=K();const J=new b;function z(a,u=.5,i=.5){const t=a instanceof p?a:p.fromString(a),r=typeof a=="string"?a:a.rawPath;J.d=r;const e=J.getBBox(),o=-F.lerp(e.x,e.x+e.width,u),n=-F.lerp(e.y,e.y+e.height,i);return t.translate(o,n)}function j(a,u,i="My seed 2025",t=.25){const r=2*Math.PI/a*(1+u);typeof i=="string"&&(i=F.Random.fromString(i));const e=()=>(i()-.5)*t,o=F.initializedArray(a,s=>{const f=s*r;return{x:Math.cos(f)+e(),y:Math.sin(f)+e()}}),n=o.map((s,f)=>{const l=o[(f+1)%a];return new L(s.x,s.y,l.x,l.y)});return new p(n)}function v(a,u=1024){if(Math.log2(u)%1!==0)throw new Error("numSamples must be a power of 2");const i=[];for(let t=0;t<u;t++){const r=t/(u-1),e=a(r);i.push([e.x,e.y])}return i}function Q(a){let u=0;a.forEach(e=>u+=e.amplitude);const i=u/1e7,t=a.filter(e=>e.amplitude>i);let r=0;return t.forEach(e=>r+=e.amplitude),t}function tt(a){const u=a.length;if(Math.log2(u)%1!==0)throw new Error("numSamples must be a power of 2");const i=O.fft(a),t=[];for(let r=0;r<u;r++){const[e,o]=i[r],n=Math.sqrt(e*e+o*o)/u,s=Math.atan2(o,e),f=r<=u/2?r:r-u;t.push({frequency:f,amplitude:n,phase:s})}return t.sort((r,e)=>e.amplitude-r.amplitude),Q(t)}function rt(a,u,i=0){const t=Math.min(i+u,a.length);return r=>{let e=0,o=0;for(let n=i;n<t;n++){const{frequency:s,amplitude:f,phase:l}=a[n],c=2*Math.PI*s*r+l;e+=f*Math.cos(c),o+=f*Math.sin(c)}return{x:e,y:o}}}function et(a){if(a.frequency==0)return{x:Math.cos(a.phase)*a.amplitude,y:Math.sin(a.phase)*a.amplitude}}function W(a,u){const i=new b;i.d=a;const t=u,r=t-1,e=i.length;return F.initializedArray(t,o=>{const n=i.getPoint(e/r*o);return[n.x,n.y]})}function nt(a,u){const i=new b;try{const t=p.fromString(a).commands;if(t.length==0)throw new Error("wtf");const r=new Array;t.forEach((s,f)=>{r.push(s);const l=t[(f+1)%t.length];if(p.needAnM(s,l)){const c=new L(s.x,s.y,l.x0,l.y0);r.push(c)}});const o=r.map(s=>new p([s])).map((s,f)=>{i.d=s.rawPath;const l=i.length;return{path:s,length:l,numberOfVertices:0,originalIndex:f}});{const s=o.toSorted((c,d)=>d.length-c.length);let f=u,l=F.sum(s.map(({length:c})=>c));for(;f!=0;){const c=s.pop();if(!c)throw new Error("wtf");if(c.length>0){const d=f/l*c.length,m=Math.max(1,Math.round(d));c.numberOfVertices=m,f-=m,l-=c.length}}}const n=new Array;return o.forEach(({length:s,numberOfVertices:f,path:l})=>{if(f>0){i.d=l.rawPath;for(let c=0;c<f;c++){const d=c/f*s,{x:m,y:x}=i.getPoint(d);n.push([m,x])}}}),n}catch(t){return console.warn("using fallback",t),W(a,u)}}function Y(a){let u=0;a.forEach(t=>u+=t.amplitude);const i=a.map(t=>({here:t.amplitude/u*100,before:NaN,after:NaN}));{let t=0,r=0;i.forEach((e,o,n)=>{e.before=t,t+=e.here;const s=n.length-o-1,f=n[s];f.after=r,r+=f.here})}return i}function at(a){const u=Y(a.terms),i=new Array;let t=0;for(let n=a.maxGroupsToDisplay-1;n>=0&&t<u.length;n--){let s=0,f=0,l=t;const c=u[l].before;for(;s+=u[l].here,f++,l++,!(l>=u.length);)if(n>0){const g=u[l].after/n;if(s>g)break}const d=u[l-1].after,m=u.length-l;i.push({offset:NaN,startTime:NaN,endTime:NaN,usingCircles:t,usingAmplitude:c,addingCircles:f,addingAmplitude:s,availableAmplitude:d,availableCircles:m}),t+=f,i.push({offset:NaN,startTime:NaN,endTime:NaN,usingCircles:t,usingAmplitude:c+s,addingCircles:0,addingAmplitude:0,availableAmplitude:d,availableCircles:m})}let r=0;i.forEach(n=>{const s=n.addingCircles?a.addTime:a.pauseTime,f=r+s;n.startTime=r,n.endTime=f,r=f}),i.forEach(n=>{n.offset=n.startTime/r});const o={...i.at(-1),startTime:r,offset:1};return i.push(o),i}export{v as a,nt as b,at as g,et as h,j as m,z as r,tt as s,rt as t};
