import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as C,Q as p,b as z}from"./path-shape-BZC9YcLk.js";import{g as A,i as $,a as F}from"./client-misc-DWuUZUgy.js";import{c as O,r as U,e as Y,a as W,f as J}from"./utility-CsOzd0ZV.js";const b=A("pathInputElement",HTMLInputElement),M=A("displaySinglePath",HTMLButtonElement),R=A("singlePathErrorMessage",HTMLSpanElement);function j(s){const u=document.createElement("div");u.innerHTML=`
      <div class="pathDebugger">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          preserveAspectRatio="xMidYMid meet"
          id="singlePathSvg"
        ></svg>
        <table class="segments">
          <tr>
            <th rowspan="2">#</th>
            <th rowspan="2">C</th>
            <th rowspan="2">Length</th>
            <th colspan="2">Requested</th>
            <th colspan="2">Actual</th>
            <th rowspan="2">Difference</th>
          </tr>
          <tr>
            <th>Incoming</th>
            <th>Outgoing</th>
            <th>Incoming</th>
            <th>Outgoing</th>
          </tr>
        </table>
      </div>`;const l=F(u.firstElementChild,HTMLDivElement),e=F(l.firstElementChild,SVGSVGElement),S=F(e.nextElementSibling,HTMLTableElement);let r=-1;function c(){if(e.innerHTML="",S.querySelectorAll("tr[data-temporary]").forEach(t=>{t.firstElementChild&&t.remove()}),r=-1,s){let t;const h=s.commands;h.map((m,o)=>{const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.style.d=new C([m]).cssPath;const y=`hsl(${2.4*o}rad ${60+Math.sin(o)*40}% 50%)`;i.style.stroke=y,e.appendChild(i);const f=i.getBBox();t?t=J(t,f):t=f;const d=S.insertRow();d.dataset.temporary="ðŸ˜Ž";const B=d.insertCell();B.innerText=o.toString(),B.style.color=y;const P=d.insertCell();P.innerText=m.command;const L=d.insertCell();L.innerText=i.getTotalLength().toFixed(2);const g=(I,T)=>{I.innerText=(T*Y).toFixed(2)+"Â°"},x=d.insertCell(),w=d.insertCell();if(m instanceof p){const I=m.creationInfo;I.source=="angles"&&(g(x,I.angle0),g(w,I.angle),I.success||[x,w].forEach(T=>T.classList.add("error")))}const v=d.insertCell(),N=m.incomingAngle;g(v,N);const q=d.insertCell(),H=m.outgoingAngle;g(q,H);const _=d.insertCell(),V=h[o-1],G=C.needAnM(V,m)?void 0:O(V.outgoingAngle,m.incomingAngle);G!==void 0&&g(_,G);{const T=[i,...[B,P,L,x,w,v,q]],X=Q=>{T.forEach(D=>{D.classList[Q]("hover")})};T.forEach(Q=>{Q.addEventListener("mouseenter",()=>X("add")),Q.addEventListener("mouseleave",()=>X("remove")),Q.addEventListener("click",()=>{l.querySelectorAll(".selected").forEach(D=>D.classList.remove("selected")),[i,B].forEach(D=>D.classList.add("selected")),r=o,a()})})}}),t&&(e.viewBox.baseVal.x=t.x,e.viewBox.baseVal.y=t.y,e.viewBox.baseVal.width=t.width,e.viewBox.baseVal.height=t.height,e.style.setProperty("--stroke-width",(Math.hypot(t.width,t.height)*.008305657597434369).toString()))}a()}const n=[];function a(){n.forEach(t=>{try{t()}catch(h){console.error(h)}})}return{topLevelElement:l,get pathShape(){return s},set pathShape(t){s=t,c()},get selectedIndex(){return r},listeners:n}}const k=j();{const s=A("insertPathDebuggerHere",Element);s.parentElement.insertBefore(k.topLevelElement,s)}const E=j();{let s=function(){const l=k.pathShape;if(!l)E.pathShape=void 0;else{const e=k.selectedIndex,S=F(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value,r=l.commands;switch(S){case"delete":{e>-1?E.pathShape=new C(r.toSpliced(e,1)):E.pathShape=l;break}case"mergeWithNext":{if(e<0||e>=r.length-1)E.pathShape=void 0;else{const c=r[e],n=r[e+1];if(!(c instanceof p&&n instanceof p))throw new Error("wtf");const a=p.angles(c.x0,c.y0,c.requestedIncomingAngle,n.x,n.y,n.requestedOutgoingAngle);E.pathShape=new C(r.toSpliced(e,2,a))}break}case"deleteThenMerge":{if(e<1||e>=r.length-1)E.pathShape=void 0;else{const c=r[e-1],n=r[e],a=r[e+1];if(!(c instanceof p&&n instanceof p&&a instanceof p))throw new Error("wtf");const t=(c.x+a.x0)/2,h=(c.y+a.y0)/2,m=c.requestedOutgoingAngle,o=a.requestedIncomingAngle,i=m+O(m,o)/2,y=p.angles(c.x0,c.y0,c.requestedIncomingAngle,t,h,i),f=p.angles(t,h,i,a.x,a.y,a.requestedOutgoingAngle),d=r.toSpliced(e-1,3,y,f);E.pathShape=new C(d)}break}case"flip":{E.pathShape=void 0;break}default:throw new Error("wtf")}}};const u=A("insertProcessingPathDebuggerHere",Element);u.parentElement.insertBefore(E.topLevelElement,u),k.listeners.push(s),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(l=>l.addEventListener("click",s))}M.addEventListener("click",()=>{k.pathShape=void 0;const s=b.value,u=C.fromString(s);k.pathShape=u});b.addEventListener("keyup",s=>{s.code=="Enter"&&(M.click(),s.preventDefault())});{let s=()=>{};const u=()=>{const l=b.value;if(l.trim()==="")b.style.backgroundColor="",M.disabled=!0,R.innerText="";else try{C.fromString(l),M.disabled=!1,R.innerText=""}catch(e){if(!(e instanceof z))throw e;M.disabled=!0,R.innerText=e.message,s=()=>{b.focus(),b.setSelectionRange(l.length-e.where.length,l.length)}}};b.addEventListener("input",u),b.value='{"commands":[{"command":"Q","x0":3.3402364362167827,"y0":-3.3007448073623697,"x1":3.9340253985180738,"y1":-4.407606648762401,"x":3.011655728124868,"y":-4.539237903380115,"creationInfo":{"source":"angles","success":true,"angle":-2.9998399305675316,"angle0":-1.0784066014045661}},{"command":"Q","x0":3.011655728124868,"y0":-4.539237903380115,"x1":1.574687929408164,"y1":-4.744307389359313,"x":1.472816111697163,"y":-3.4705009993745333,"creationInfo":{"source":"angles","success":true,"angle":1.6506008096939941,"angle0":-2.9998399305675316}},{"command":"Q","x0":1.472816111697163,"y0":-3.4705009993745333,"x1":2.425601605422024,"y1":-3.103608911097618,"x":3.378387099146885,"y":-2.7367168228207026,"creationInfo":{"source":"angles","success":false,"angle":1.3560482815273174,"angle0":1.6506008096939941}},{"command":"Q","x0":3.378387099146885,"y0":-2.7367168228207026,"x1":3.3100861700748974,"y1":-2.9792037225344936,"x":3.2417852410029093,"y":-3.2216906222482846,"creationInfo":{"source":"angles","success":false,"angle":-1.3703249858538125,"angle0":1.3560482815273174}},{"command":"Q","x0":3.2417852410029093,"y0":-3.2216906222482846,"x1":3.71956498838227,"y1":-3.1350455976774514,"x":4.1973447357616305,"y":-3.048400573106618,"creationInfo":{"source":"angles","success":false,"angle":-0.1010220204226494,"angle0":-0.1456045239311423}},{"command":"Q","x0":4.1973447357616305,"y0":-3.048400573106618,"x1":5.4196689403631035,"y1":-3.172304017662219,"x":5.061868062841531,"y":-4.160669146632123,"creationInfo":{"source":"angles","success":true,"angle":-1.918132677407088,"angle0":-0.1010220204226494}},{"command":"Q","x0":5.061868062841531,"y0":-4.160669146632123,"x1":5.268526125402326,"y1":-4.012893855293418,"x":5.475184187963122,"y":-3.8651185639547148,"creationInfo":{"source":"angles","success":false,"angle":-0.37440229149874305,"angle0":-1.918132677407088}},{"command":"Q","x0":5.475184187963122,"y0":-3.8651185639547148,"x1":16.480296958276732,"y1":-8.189428173637983,"x":2.683828194676533,"y":-6.181870056091758,"creationInfo":{"source":"angles","success":true,"angle":2.997094360451321,"angle0":-0.37440229149874305}},{"command":"Q","x0":2.683828194676533,"y0":-6.181870056091758,"x1":0.1382015495290775,"y1":-5.81144965915722,"x":0.0608453441230225,"y":-3.4844558053025536,"creationInfo":{"source":"angles","success":true,"angle":1.6040270673159511,"angle0":2.997094360451321}},{"command":"Q","x0":0.0608453441230225,"y0":-3.4844558053025536,"x1":-0.040183084485440876,"y1":-0.4453650018892805,"x":2.6303996577439386,"y":-0.5926166531791432,"creationInfo":{"source":"angles","success":true,"angle":-0.055082620605849786,"angle0":1.6040270673159511}},{"command":"Q","x0":2.6303996577439386,"y0":-0.5926166531791432,"x1":3.7388797143957104,"y1":-0.6537364665377791,"x":4.4264871867272255,"y":-0.9672211302345681,"creationInfo":{"source":"angles","success":true,"angle":-0.42775484124811636,"angle0":-0.055082620605849786}}]}',u(),R.parentElement.addEventListener("click",()=>s())}{let s=function(n,a){const t=document.createElement("th");n.appendChild(t),a!==void 0&&t.append((a*Y).toFixed(1)+"Â° "+a.toFixed(3))};const u=A("byAngle",HTMLTableElement),l=0,e=5,S=$(e,n=>l+Math.PI*2*n/e),r=3,c=$(r,n=>l+Math.PI*2*n/r);{const n=u.insertRow();s(n),S.forEach(a=>{s(n,a)})}c.forEach((n,a)=>{const t=u.insertRow();s(t,n),S.forEach((h,m)=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("angles");const i=0,y=1,f=0,d=1;o.viewBox.baseVal.x=i,o.viewBox.baseVal.y=f,o.viewBox.baseVal.width=y-i,o.viewBox.baseVal.height=d-f,t.insertCell().appendChild(o);function P(x,w){const v=document.createElementNS("http://www.w3.org/2000/svg","line"),N=.2,[q,H,_]=w?[i,f,x+Math.PI]:[y,d,x],V=W(N,_);v.x1.baseVal.value=q,v.x2.baseVal.value=q+V.x,v.y1.baseVal.value=H,v.y2.baseVal.value=H+V.y,o.appendChild(v)}P(h,!0),P(n,!1);const L=document.createElementNS("http://www.w3.org/2000/svg","path"),g=p.angles(i,f,h,y,d,n);if(g.creationInfo.success){const x=new C([g]).rawPath;L.setAttribute("d",x),o.appendChild(L);const w=Math.abs(O(h,g.incomingAngle))+Math.abs(O(n,g.outgoingAngle));w>U?(console.error({error:w,degrees:w*Y,path:L,inExpected:h,inFound:g.incomingAngle,outExpected:n,outFound:g.outgoingAngle,qCommand:g}),o.style.backgroundColor="lightpink"):o.style.backgroundColor="rgb(26, 217, 255)"}else o.style.backgroundColor="hsl(190 100% 85% / 1)";o.addEventListener("click",()=>{console.log({inExpected:h,inFound:g?.incomingAngle,outExpected:n,outFound:g?.outgoingAngle,qCommand:g});debugger;const x=p.angles(i,f,h,y,d,n);console.log(x)})})})}M.click();
