import{m as a}from"./misc-wGF4FraP.js";function w(n,r,e=1,t=1/0,s=document){const o=[];if(s.querySelectorAll(n).forEach(i=>{o.push(a.assertClass(i,r))}),o.length<e||o.length>t)throw new Error(`Expecting "${n}" to return [${e} - ${t}] instances of ${r.name}, found ${o.length}.`);return o}function p(n,r,e=document){return w(n,r,1,1,e)[0]}class d{constructor(){throw new Error("wtf")}static sfc32(r,e,t,s){function o(){r|=0,e|=0,t|=0,s|=0;let c=(r+e|0)+s|0;return s=s+1|0,r=e^e>>>9,e=t+(t<<3)|0,t=t<<21|t>>>11,t=t+c|0,(c>>>0)/4294967296}const i=o;return Object.defineProperty(i,"currentSeed",{get(){return JSON.stringify([r,e,t,s])}}),i}static#t=42;static seedIsValid(r){try{return this.create(r),!0}catch{return!1}}static create(r=this.newSeed()){console.info(r);const e=JSON.parse(r);if(!(e instanceof Array))throw new Error("invalid input");if(e.length!=4)throw new Error("invalid input");const[t,s,o,i]=e;if(!(typeof t=="number"&&typeof s=="number"&&typeof o=="number"&&typeof i=="number"))throw new Error("invalid input");return this.sfc32(t,s,o,i)}static newSeed(){const r=[];return r.push(Date.now()|0),r.push(this.#t++|0),r.push(Math.random()*2**31|0),r.push(performance.now()*1e4|0),JSON.stringify(r)}static fromString(r){try{return this.create(r)}catch{return this.create(this.anyStringToSeed(r))}}static anyStringToSeed(r){function e(o,i){return(o<<i|o>>>32-i)>>>0}const t=[2654435769,608135816,2242054355,320440878];return new TextEncoder().encode(r).forEach(o=>{t[0]^=o,t[0]=e(t[0],3),t[1]^=o,t[1]=e(t[1],5),t[2]^=o,t[2]=e(t[2],7),t[3]^=o,t[3]=e(t[3],11)}),t[0]^=e(t[1],7),t[1]^=e(t[2],11),t[2]^=e(t[3],13),t[3]^=e(t[0],17),JSON.stringify(t)}static test(){const t=[this.create()];for(;t.length<=10;){for(let o=0;o<20;o++){const i=t.map(c=>c());for(let c=1;c<i.length;c++)if(i[c]!==i[0]){debugger;throw new Error("wtf")}}const s=a.pick(t).currentSeed;t.forEach(o=>{if(o.currentSeed!=s){debugger;throw new Error("wtf")}}),t.push(this.create(s))}}}window.Random=d;function u(n){if(!(Number.isFinite(n)&&n>=0&&n<=1))throw new Error(`t should be between 0 and 1, inclusive. t == ${n}`)}function E(...n){n.forEach(t=>{if(!(t>=0&&t<Number.MAX_SAFE_INTEGER))throw new Error("wtf")});const r=a.sum(n);if(r==0)throw new Error("wtf");return t=>{u(t),t*=r;for(let s=0;s<n.length;s++){const o=n[s];if(t<=o)return t/=o,{t,index:s};t-=o}throw new Error("wtf")}}function S(n,r,e){const t=n+r+e,s=a.makeBoundedLinear(n/t,0,(n+r)/t,1);return i=>{u(i);const c=s(i)*r,f=Math.min(c|0,r-1),h=c-f;return u(h),{t:h,index:f}}}function g(n){if(n==null)throw new Error("wtf");return n}function y(n){const r=2/(n+1),e=1-r;return s=>e*s*s+r*s}function l(n,r){return r?l(r,n%r):n}function N(n,r){return n*r/l(n,r)}class x{#t;constructor(r=60){if(a.assertFinite(r),r<1||r!=(r|0))throw new Error("wtf");this.#t=r,this.fromMSF=this.fromMSF.bind(this),this.fromString=this.fromString.bind(this),Object.freeze(this)}get framesPerSecond(){return this.#t}fromMSF(r,e,t){return(r*60+e)*this.#t+t}fromString(r){const e=/^([0-9]+):([0-9]+):([0-9]+)$/.exec(r);if(!e)throw new Error("wtf");const t=a.parseIntX(e[1]),s=a.parseIntX(e[2]),o=a.parseIntX(e[3]);if(t===void 0||s===void 0||o===void 0)throw new Error("wtf");return this.fromMSF(t,s,o)}}export{x as G,d as R,u as a,p as b,y as c,S as d,g as e,N as l,E as m,w as s};
