import{i as M,m}from"./client-misc-DWuUZUgy.js";import{l as I,a as p}from"./utility-CsOzd0ZV.js";function k(t,n,i){const r=I(t.x,n.x,i),e=I(t.y,n.y,i);return{x:r,y:e}}function d(t,n,i){if(!(n>=0&&n<=1))throw new Error("Expected 0 ≤ t ≤ 1");const r=Math.max(0,n-i),e=t(r),c=Math.min(1,n+i),f=t(c),s=f.x-e.x,o=f.y-e.y;return s==0&&o==0?NaN:Math.atan2(o,s)}function g(t,n={}){const i=Math.ceil(n.numberOfSegments??10);if(i<1)throw new Error(`Invalid numberOfSegments: ${i}`);const r=.01/i,e=M(i+1,o=>{const a=o/i,l=t(a),y=d(t,a,r);return{t:a,point:l,direction:y}}),c=M(i,o=>({from:e[o],to:e[o+1]}));let s=`${n.initialCommand??"M"} ${c[0].from.point.x}, ${c[0].from.point.y}`;return c.forEach(o=>{const a=P({x0:o.from.point.x,y0:o.from.point.y,slope:Math.tan(o.from.direction)},{x0:o.to.point.x,y0:o.to.point.y,slope:Math.tan(o.to.direction)});a?s+=` Q ${a.x},${a.y}`:s+=" M",s+=` ${o.to.point.x},${o.to.point.y}`}),s}function S(t,n,i){const r=A(t,n,i);return g(r,{numberOfSegments:i*9.001002})}function A(t,n,i){const c={x:t.x-n.x,y:t.y-n.y},f=Math.hypot(c.x,c.y),s=m(0,f,1,0),o=Math.atan2(c.y,c.x),a=m(0,o,1,o+i*2*Math.PI);return function(l){const y=s(l),x=a(l),u=p(y,x);return{x:n.x+u.x,y:n.y+u.y}}}function b(t,n,i){const r=A(n,t,i);return e=>r(1-e)}function P(t,n){if(isNaN(t.slope)||isNaN(n.slope)||t.slope==n.slope)return;const i=t.slope==1/0||t.slope==-1/0,r=n.slope==1/0||n.slope==-1/0;if(i||r)return;const e=i?t.x0:r?n.x0:(n.y0-n.slope*n.x0-t.y0+t.slope*t.x0)/(t.slope-n.slope),c=i?n.slope*(e-n.x0)+n.y0:t.slope*(e-t.x0)+t.y0;return{x:e,y:c}}function $(t,n,i){const r=.01/i;function e(o){const a=t(o),l=d(t,o,r),y=l+Math.PI/2,x=n({direction:1,t:o,position:a,tangentAngle:l})/2,u=p(x,y);return{x:a.x+u.x,y:a.y+u.y}}const c=g(e,{numberOfSegments:i});function f(o){const a=1-o,l=t(a),y=d(t,a,r),x=y-Math.PI/2,u=n({direction:-1,t:a,position:l,tangentAngle:y})/2,h=p(u,x);return{x:l.x+h.x,y:l.y+h.y}}const s=g(f,{numberOfSegments:i,initialCommand:"L"});return`${c} ${s} z`}function v(t){const n=m(0,t.fromAngle,1,t.toAngle),i=m(0,Math.log(t.fromRadius),1,Math.log(t.toRadius)),r=s=>Math.exp(i(s)),e=s=>{const o=p(r(s),n(s));return{x:o.x+t.center.x,y:o.y+t.center.y}},c=2*Math.PI/(t.toAngle-t.fromAngle);return $(e,({t:s,direction:o})=>{const a=r(s+c*o),l=r(s);return Math.abs(l-a)*t.widthRatio},Math.abs(t.fromAngle-t.toAngle)*4)}export{b as a,g as b,v as c,k as l,A as m,S as s,$ as v};
