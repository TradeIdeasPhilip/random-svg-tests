import"./modulepreload-polyfill-B5Qt9EMX.js";import{P as I,Q as i,a as R}from"./path-shape-BXOkZTxi.js";import{g as M,m}from"./client-misc-CqK8Npau.js";import{c as D}from"./path-debugger-widget-BBVk7XcM.js";const p=M("pathInputElement",HTMLInputElement),S=M("displaySinglePath",HTMLButtonElement),T=M("singlePathErrorMessage",HTMLSpanElement),v=D();v.insertBefore("insertPathDebuggerHere");const g=D();g.insertBefore("insertProcessingPathDebuggerHere");{let a=function(){const c=v.pathShape;if(!c)g.pathShape=void 0;else{const n=v.selectedIndex,x=m.assertClass(document.querySelector('input[type="radio"][name="processingType"]:checked'),HTMLInputElement).value,r=c.commands;switch(x){case"select":{g.pathShape=c,g.selectedIndex=n;break}case"mergeWithNext":{if(n<0||n>=r.length-1)g.pathShape=void 0;else{const t=r[n],o=r[n+1];if(!(t instanceof i&&o instanceof i))throw new Error("wtf");const e=i.angles(t.x0,t.y0,t.requestedIncomingAngle,o.x,o.y,o.requestedOutgoingAngle);g.pathShape=new I(r.toSpliced(n,2,e)),g.selectedIndex=n}break}case"deleteThenMerge":{if(n<1||n>=r.length-1)g.pathShape=void 0;else{const t=r[n-1],o=r[n],e=r[n+1];if(!(t instanceof i&&o instanceof i&&e instanceof i))throw new Error("wtf");const d=(t.x+e.x0)/2,l=(t.y+e.y0)/2,u=t.requestedOutgoingAngle,f=e.requestedIncomingAngle,s=u+m.angleBetween(u,f)/2,y=i.angles(t.x0,t.y0,t.requestedIncomingAngle,d,l,s),E=i.angles(d,l,s,e.x,e.y,e.requestedOutgoingAngle),w=r.toSpliced(n-1,3,y,E);g.pathShape=new I(w),g.selectedIndex=n-1}break}case"recreate":{const t=r.map((o,e,d)=>{if(e!=n)return o;{const l=d[e-1],u=l?l instanceof i?l.requestedOutgoingAngle:l.outgoingAngle:o.incomingAngle,f=d[e+1],s=f?f instanceof i?f.requestedIncomingAngle:f.incomingAngle:o.outgoingAngle;return i.angles(o.x0,o.y0,u,o.x,o.y,s)}});g.pathShape=new I(t),g.selectedIndex=n;break}default:throw new Error("wtf")}}};v.listeners.push(a),document.querySelectorAll('input[type="radio"][name="processingType"]').forEach(c=>c.addEventListener("click",a))}S.addEventListener("click",()=>{v.pathShape=void 0;const a=p.value,c=I.fromString(a);v.pathShape=c,p.selectionStart=0,p.selectionEnd=Number.MAX_SAFE_INTEGER,p.focus()});p.addEventListener("keyup",a=>{a.code=="Enter"&&(S.click(),a.preventDefault())});{let a=()=>{};const c=()=>{const n=p.value;if(n.trim()==="")p.style.backgroundColor="",S.disabled=!0,T.innerText="";else try{I.fromString(n),S.disabled=!1,T.innerText=""}catch(x){if(!(x instanceof R))throw x;S.disabled=!0,T.innerText=x.message,a=()=>{p.focus(),p.setSelectionRange(n.length-x.where.length,n.length)}}};p.addEventListener("input",c),p.value='{"commands":[{"command":"Q","x0":3.4887549340077686,"y0":-5.280275296438213,"x1":3.3240358327531427,"y1":-6.603270946497333,"x":3.986127753487767,"y":-6.945992424474607,"creationInfo":{"source":"angles","success":true,"angle":-0.477655307967376,"angle0":-1.69466355563386}},{"command":"Q","x0":3.986127753487767,"y0":-6.945992424474607,"x1":4.480941645468803,"y1":-7.20212505964597,"x":4.909574006894274,"y":-6.919048098782132,"creationInfo":{"source":"angles","success":true,"angle":0.5836648235165767,"angle0":-0.477655307967376}},{"command":"Q","x0":4.909574006894274,"y0":-6.919048098782132,"x1":5.161356230086409,"y1":-6.790075622391445,"x":5.391585826873779,"y":-6.651408910751343,"creationInfo":{"source":"angles","success":true,"angle":0.5421071297267503,"angle0":0.47339017798323246}},{"command":"Q","x0":5.391585826873779,"y0":-6.651408910751343,"x1":6.730367034445631,"y1":-5.845064330167255,"x":7.027256081149708,"y":-5.194728789900199,"creationInfo":{"source":"angles","success":true,"angle":1.1425363287394048,"angle0":0.5421071297267503}},{"command":"Q","x0":7.027256081149708,"y0":-5.194728789900199,"x1":7.754352753646234,"y1":-3.602023324394345,"x":4.193712100677284,"y":0.42449758198971194,"creationInfo":{"source":"angles","success":true,"angle":2.29486772798718,"angle0":1.1425363287394048}},{"command":"Q","x0":4.193712100677284,"y0":0.42449758198971194,"x1":3.518577720366601,"y1":-0.14254705569255727,"x":2.959092378616333,"y":-0.6853286027908325,"creationInfo":{"source":"angles","success":true,"angle":-2.371347368637816,"angle0":-2.4429920947222046}},{"command":"Q","x0":2.959092378616333,"y0":-0.6853286027908325,"x1":2.3354159292244066,"y1":-1.2903847907343782,"x":1.8486189246177673,"y":-1.8415732979774475,"creationInfo":{"source":"angles","success":true,"angle":-2.294238815702362,"angle0":-2.371347368637816}},{"command":"Q","x0":1.8486189246177673,"y0":-1.8415732979774475,"x1":-1.2821837697078784,"y1":-5.386505676828815,"x":1.8393135751921135,"y":-6.893847698517759,"creationInfo":{"source":"angles","success":true,"angle":-0.4498667187414722,"angle0":-2.294238815702362}},{"command":"Q","x0":1.8393135751921135,"y0":-6.893847698517759,"x1":3.5137578853675318,"y1":-7.702421274858965,"x":3.4548192956830346,"y":-6.81906598197989,"creationInfo":{"source":"angles","success":true,"angle":1.6374188551224442,"angle0":-0.4498667187414722}},{"command":"Q","x0":3.4548192956830346,"y0":-6.81906598197989,"x1":3.319461386978055,"y1":-4.790359056217831,"x":3.5514152019515546,"y":-4.386794653044557,"creationInfo":{"source":"angles","success":true,"angle":1.0491403112818258,"angle0":1.6374188551224442}}]}',c(),T.parentElement.addEventListener("click",()=>a())}{let a=function(e,d){const l=document.createElement("th");e.appendChild(l),d!==void 0&&l.append((d*m.degreesPerRadian).toFixed(1)+"Â° "+d.toFixed(3))};const c=M("byAngle",HTMLTableElement),n=0,x=5,r=m.initializedArray(x,e=>n+Math.PI*2*e/x),t=3,o=m.initializedArray(t,e=>n+Math.PI*2*e/t);{const e=c.insertRow();a(e),r.forEach(d=>{a(e,d)})}o.forEach((e,d)=>{const l=c.insertRow();a(l,e),r.forEach((u,f)=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("angles");const y=0,E=1,w=0,P=1;s.viewBox.baseVal.x=y,s.viewBox.baseVal.y=w,s.viewBox.baseVal.width=E-y,s.viewBox.baseVal.height=P-w,l.insertCell().appendChild(s);function L(b,A){const k=document.createElementNS("http://www.w3.org/2000/svg","line"),F=.2,[B,Q,H]=A?[y,w,b+Math.PI]:[E,P,b],q=m.polarToRectangular(F,H);k.x1.baseVal.value=B,k.x2.baseVal.value=B+q.x,k.y1.baseVal.value=Q,k.y2.baseVal.value=Q+q.y,s.appendChild(k)}L(u,!0),L(e,!1);const C=document.createElementNS("http://www.w3.org/2000/svg","path"),h=i.angles(y,w,u,E,P,e);if(h.creationInfo.success){const b=new I([h]).rawPath;C.setAttribute("d",b),s.appendChild(C);const A=Math.abs(m.angleBetween(u,h.incomingAngle))+Math.abs(m.angleBetween(e,h.outgoingAngle));A>m.radiansPerDegree?(console.error({error:A,degrees:A*m.degreesPerRadian,path:C,inExpected:u,inFound:h.incomingAngle,outExpected:e,outFound:h.outgoingAngle,qCommand:h}),s.style.backgroundColor="lightpink"):s.style.backgroundColor="rgb(26, 217, 255)"}else s.style.backgroundColor="hsl(190 100% 85% / 1)";s.addEventListener("click",()=>{console.log({inExpected:u,inFound:h?.incomingAngle,outExpected:e,outFound:h?.outgoingAngle,qCommand:h});const b=i.angles(y,w,u,E,P,e);console.log(b)})})})}S.click();
