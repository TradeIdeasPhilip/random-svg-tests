import"./modulepreload-polyfill-B5Qt9EMX.js";import{g as f,m as u}from"./client-misc-CqK8Npau.js";import{s as E,R as F,m as A,a as m}from"./utility-CcMiQaH1.js";import{P as C}from"./path-shape-C6cKjNL0.js";import{T as I}from"./letters-more-CV-mTeEn.js";import{m as M}from"./rough-lib-CvCwcX-1.js";import"./math-to-path-D11qeOG5.js";const v=f("tau",SVGPathElement),w=v.getTotalLength(),S=(()=>{const t=f("main-handwriting",SVGUseElement);t.style.strokeDasharray=`0, ${w+1}, ${w+1},0`;const e=u.makeLinear(0,0,1,-w);function o(n){m(n),t.style.display="",t.style.strokeDashoffset=e(n).toFixed(6)}function a(){t.style.display="none"}return{show:o,hide:a}})(),g=f("dance",SVGGElement),h=4,b=E("#dance line",SVGLineElement,h,h),x=E("#dance circle",SVGCircleElement,h,h),p=E("#dance .main-path",SVGPathElement,1,1)[0],V=(()=>{const t=C.fromString(v.getAttribute("d")),o=["[865414075,46,1165012143,288037704]","[888652358,42,1959707975,1083510000]","[888761724,43,1169051802,-2117776296]"].map(s=>{const c=F.create(s),l=M(t,25,c);if(l.after.commands.length!=t.commands.length)throw new Error("wtf");return l}),a=o[0].before.cssPath,n=o.map(s=>s.after.cssPath),i=p.animate([{offset:0,d:a},{offset:.1,d:a},{offset:.2,d:n[0]},{offset:.4,d:n[0]},{offset:.5,d:a},{offset:.7,d:n[1]},{offset:.9,d:n[2]},{offset:1,d:a}],{duration:1,fill:"both"});return i.pause(),i})(),L=(()=>{function t(o){m(o),g.style.display="",b.forEach(n=>n.style.display="none"),V.currentTime=0,u.initializedArray(h,n=>{const i=u.positiveModulo(o*(n+1)/h,1);return p.getPointAtLength(p.getTotalLength()*i)}).forEach((n,i)=>{const s=x[i];s.cx.baseVal.value=n.x,s.cy.baseVal.value=n.y})}function e(){g.style.display=""}return{show:t,hide:e}})(),P=(()=>{function t(o,a){function n(i){m(i),g.style.display="",b.forEach(r=>r.style.display="");const s=u.initializedArray(h,r=>{const c=u.positiveModulo(i+r/h,1);return p.getPointAtLength(p.getTotalLength()*c)});s.forEach((r,c)=>{const l=b[c],d=x[c];l.x1.baseVal.value=d.cx.baseVal.value=r.x,l.y1.baseVal.value=d.cy.baseVal.value=r.y;const y=s[c+1]??s[0];l.x2.baseVal.value=y.x,l.y2.baseVal.value=y.y})}V.currentTime=o,n(o*a%1)}function e(){g.style.display="none"}return{show:t,hide:e}})(),T=3,R=A(1,1,T);function B(t){m(t),S.hide(),L.hide(),P.hide();const e=R(t);switch(e.index){case 0:{S.show(e.t);break}case 1:{L.show(e.t);break}case 2:{P.show(e.t,T);break}default:throw new Error("wtf")}}class H{constructor(e){this.parent=e}weight=1;soFar=.01;add(e){const o=e.shape.splitOnMove().map(a=>{const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",a.rawPath),n.style.transform=`translate(${e.x}px, ${e.baseline}px)`,this.parent.appendChild(n);const i=this.soFar,s=n.getTotalLength(),r=i+s;return this.soFar=r,n.style.setProperty("--offset",i.toString()),n.style.setProperty("--length",s.toString()),{element:n,before:i,length:s,after:r}});return this.updateTotalLength(),o}updateTotalLength(){const e=this.soFar;this.parent.style.setProperty("--total-length",e.toString())}}const k=f("conversation-handwriting",SVGGElement),$=f("thumbnail-text",SVGGElement),D=(()=>{const t=k,e=new H(t),o=new I(40);o.rightMargin=1e3,o.CRLF(),o.baseline+=10;function a(s,r){const c=r=="student"?120:45;o.x=o.leftMargin=c,o.addText(s).forEach(d=>{e.add({baseline:d.baseline,x:d.x,shape:d.description.shape}).forEach(({element:y})=>{y.classList.add(r)})}),o.baseline+=10,o.CRLF()}a("Did you see the latest 3Blue1Brown video?","teacher"),a("Yes.  It looks amazing!","student"),a("Would you like to see something similar with tau instead of pi?","teacher"),a("Of course!","student"),a("I have some real stuff on the way.  I just really â™¡ some of those animations so I had to try them myself.","teacher");const n=u.makeBoundedLinear(.05,0,.8,1);function i(s){t.style.setProperty("--t",n(s).toFixed(6)),m(s)}return i})();function G(t){m(t),B(t),D(t)}{const t=f("time",HTMLInputElement),e=()=>{const o=t.valueAsNumber;G(o)};t.addEventListener("input",e),e()}function z(t){switch(t){case"main":{$.style.display="none";break}case"thumbnail":{k.style.display="none";break}default:throw new Error(`unknown scene: ${t}`)}return document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(e=>{if(!(e instanceof SVGElement||e instanceof HTMLElement))throw new Error("wtf");e.style.display="none"}),{source:"tau.ts",devicePixelRatio,scene:t}}window.initScreenCapture=z;window.showFrame=G;
