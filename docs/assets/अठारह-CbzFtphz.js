import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as l}from"./client-misc-DWH6r4ST.js";import{m as i}from"./misc-37UFysM4.js";import"./misc-BtlbED_5.js";function V(e,t,s,n,o){const a=Math.atan2(o-s,n-t),r=i.polarToRectangular(20,a);e.x1.baseVal.value=t+r.x,e.y1.baseVal.value=s+r.y,e.x2.baseVal.value=t-r.x,e.y2.baseVal.value=s-r.y}function L(...e){e.forEach(t=>{t.style.display=""})}function b(...e){e.forEach(t=>{t.style.display="none"})}function C(){return[[29,41],[3,5],[37,7],[11,13],[31,17],[19,23],[103,43],[307,71]].map(([s,n])=>{function o(a,r){function m(d){const u=a*i.FULL_CIRCLE/d;return Math.sin(u)*r}return{Δx:m(s),Δy:m(n)}}return o})}const G=C();function P(e){function s(n){return Math.sin(n*e)*10}return s}const z=[2,Math.E,Math.PI,2**1.5,4,3].map(e=>P(e));class g{#m=l.getById("scale",SVGGElement);#d=l.getById("function",SVGPathElement);#n=l.querySelector("#singleEstimate",SVGLineElement);#t=l.querySelectorAll("#estimateLines line",SVGLineElement);#i=l.querySelector("#margin-of-error",SVGGElement);#a;#e;addBorders(){l.querySelectorAll("svg#main text",SVGTextElement).forEach(s=>{const n=i.assertClass(s.cloneNode(!0),SVGTextElement);n.classList.add("text-background"),s.parentElement.insertBefore(n,s)})}constructor(){[this.#a,this.#e]=l.querySelectorAll("circle.measurement-fill",SVGCircleElement,2,2);const s=.13333333*2,n=s/this.#t.length,o=n*1.15,a=s-o;if(a<0)throw new Error("wtf");const r=`${o} ${a}`;this.#t.forEach((m,d)=>{m.style.strokeDasharray=r,m.style.strokeDashoffset=(n*d).toString()}),this.addBorders(),this.#c=l.querySelectorAll(".blur-me",SVGTSpanElement,2,2),this.#l=l.querySelectorAll(".shake-me",SVGTextElement,2,2),this.update()}#c;#l;static instance=new g;#s=1;#r=2;get dx(){return this.#r}#u=0;set timeInSeconds(t){this.#u=t,this.update()}get timeInSeconds(){return this.#u}update(){const t=0+this.#r,n=-this.f(t),o=this.#s,a=t*o,r=n*o;this.#e.cx.baseVal.value=a,this.#e.cy.baseVal.value=r;let m,d;if(this.blurry){L(this.#i),b(this.#n),L(...this.#t),this.#t.forEach((u,y)=>{const p=.00333333325*this.zoom,E=G[y*2](this.timeInSeconds,p),M=G[y*2+1](this.timeInSeconds,p);V(u,E.Δx,E.Δy,a+M.Δx,r+M.Δy)}),m=g.initialBlurRadius*Math.sqrt(o),d="url(#measurementBlur)";{const p=`blur(${(1-Math.abs(Math.cos(this.timeInSeconds*i.FULL_CIRCLE/2/2)))*.04}px)`;this.#c.forEach(E=>E.style.filter=p)}this.#l.forEach(u=>{const y=z.map(E=>E(this.timeInSeconds));y.push(0);const p=y.join(" ");u.setAttribute("rotate",p)})}else b(this.#i),b(...this.#t),L(this.#n),V(this.#n,0,0,a,r),m=.06666666,d="var(--measurement-color)";[this.#a,this.#e].forEach(u=>{u.r.baseVal.value=m,u.style.fill=d})}#h=!1;get blurry(){return this.#h}set blurry(t){this.#h=t,this.update()}set dx(t){this.#r=t,this.update()}updatePath(){const t=this.#s,s=`path('M ${-3*t} ${-9*t} Q ${0*t} ${9*t} ${3*t} ${-9*t}')`;this.#d.style.d=s}get zoom(){return this.#s}set zoom(t){this.#s=t,this.update(),this.updatePath(),this.#m.style.transform=`scale(${t})`}f(t){return t*t}#o;get automaticTime(){return!!this.#o}set automaticTime(t){this.#o?.cancel(),this.#o=void 0,t&&(this.#o=new l.AnimationLoop(s=>{this.blurry&&(this.timeInSeconds=s/1e3)}))}static initialBlurRadius=1/8}const S=g.instance,T=window;T.GUI=g.instance;function v(e){if(e.length==0)return()=>{throw new Error("empty")};const t=e[0].x,s=[];return e.forEach((o,a)=>{const r=e[a+1];if(r!==void 0){if(o.x>r.x)throw new Error("x’s are out of order.");if(o.x<r.x){const m=o.x,d=o.y,u=r.x,y=r.y,p=d==y?()=>d:i.makeLinear(m,d,u,y);s.push({f:p,x2:u})}}}),o=>{if(o<t)throw new Error("x is too small");for(let a=0;a<s.length;a++){const r=s[a];if(o<=r.x2)return r.f(o)}throw new Error("x is too big")}}const w=22.5,f=22.5-w,c=33.5-w,h=54.5-w,x=82-w,R=v([{x:f,y:2},{x:i.lerp(f,c,.15),y:Math.sqrt(3)},{x:i.lerp(f,c,.3),y:Math.sqrt(2)},{x:i.lerp(f,c,.45),y:1},{x:i.lerp(f,c,.95),y:.005},{x:c,y:.005},{x:c,y:2},{x:i.lerp(c,h,.15),y:Math.sqrt(3)},{x:i.lerp(c,h,.3),y:Math.sqrt(2)},{x:i.lerp(c,h,.45),y:1},{x:i.lerp(c,h,.95),y:.1},{x:h,y:.1},{x:i.lerp(h,x,.25),y:.1},{x:i.lerp(h,x,.5),y:.05},{x:i.lerp(h,x,.75),y:.005},{x,y:.005}]),$=v([{x:f,y:1},{x:i.lerp(f,c,.55),y:1},{x:i.lerp(f,c,.85),y:6},{x:c,y:6},{x:c,y:1},{x:i.lerp(c,h,.55),y:1},{x:i.lerp(c,h,.85),y:6},{x:h,y:6},{x:i.lerp(h,x,.3),y:32},{x,y:32}]);function A(e){S.timeInSeconds=e-c,S.blurry=e>=c,S.dx=R(e),S.zoom=$(e)}let B;function k(){B?.cancel()}function q(){S.automaticTime=!1,k();let e;const t=new l.AnimationLoop(s=>{e??=s;const o=(s-e)/1e3;o>x?t.cancel():A(o)});B=t}l.getById("start",HTMLButtonElement).addEventListener("click",q);l.getById("stop",HTMLButtonElement).addEventListener("click",k);T.startRealtimeAnimation=q;function D(e){return document.querySelectorAll("[data-hideBeforeScreenshot]").forEach(t=>{if(!(t instanceof SVGElement||t instanceof HTMLElement))throw new Error("wtf");t.style.display="none"}),S.automaticTime=!1,{source:"parabola-tangent-line.ts",script:e,seconds:x-f}}T.initScreenCapture=D;T.showFrame=A;function I(e,t){const s=new DOMPointReadOnly(e.clientX,e.clientY);t??=e.target;const n=t.getScreenCTM().inverse(),o=s.matrixTransform(n);return{x:o.x,y:o.y}}function F(e){let t={x:0,y:0};e.addEventListener("pointerdown",s=>{t=I(s);const n=s.target;n.setPointerCapture(s.pointerId),console.log(t,n)}),e.addEventListener("lostpointercapture",s=>{const n=I(s),o=n.x-t.x,a=n.y-t.y;(o!=0||a!=0)&&console.log({...n,dx:o,dy:a})})}l.querySelectorAll("svg",SVGSVGElement).forEach(e=>F(e));
